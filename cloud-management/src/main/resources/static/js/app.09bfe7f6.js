(function(t){function e(e){for(var i,l,s=e[0],r=e[1],c=e[2],u=0,m=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&m.push(o[l][0]),o[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var r=a[s];0!==o[r]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},o={app:0},n=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=r;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"05b1":function(t,e,a){"use strict";a("2399")},"11b4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAYUExURcHBwb+/v7+/v76+vujo6OHh4cnJydTU1IOqnXYAAAADdFJOUxPppyMYpxkAAAD6SURBVEjH7dfbDYIwFAbguoHRCYwTKLcBOIUBaHQAIAxQwvwSEQpyaH/FFxP+5y89vacV4uQBOQix86DsxRmDV3HE4EV4YDa4QQRWSjYILKnNzQ0jekY7Yd3B1AVDeiV3wKCHsQPWPUwdkIbYYWSgtsLAwMwKfQNjFCZWWPwBhEcNz+NoZfLfrLXZPYkD+gtd/H6H97UT5+EK0FPY1ZbABaDYygysuTEvtqg9sI9AiyV/o8xgRNj0DLtHaiuszOahxgJLGueeL8Gpa8vnPHx30yEZGKo5lBwMiEnGwIKDKQMVB+UaSGzWwO2psMGPIfxgh78A8KcC/aY8ACmMo3JtJ3ljAAAAAElFTkSuQmCC"},"127b":function(t,e,a){"use strict";a("3df3")},"177f":function(t,e,a){},2399:function(t,e,a){},"28df":function(t,e,a){t.exports=a.p+"img/kl_logo.af2b0bc0.png"},"2cd4":function(t,e,a){},"2e75":function(t,e,a){},"3bef":function(t,e,a){},"3df3":function(t,e,a){},4844:function(t,e,a){"use strict";a("5c09")},"4c0e":function(t,e,a){},"526b":function(t,e,a){},5683:function(t,e,a){"use strict";a("d090")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container",attrs:{id:"main"}},["Login"!==t.show_type||this.oauth.enalbe?t._e():a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{"label-position":"left","label-width":"0px","status-icon":""}},[a("h3",{staticClass:"title"},[t._v("Roamblue KVM Cloud Login")]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off",autofocus:"true",placeholder:"用户名","prefix-icon":"el-icon-s-custom",type:"text"},model:{value:t.loginData.loginName,callback:function(e){t.$set(t.loginData,"loginName",e)},expression:"loginData.loginName"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"show-password":!0,"auto-complete":"off",placeholder:"密码","prefix-icon":"el-icon-lock",type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.loginData.password,callback:function(e){t.$set(t.loginData,"password",e)},expression:"loginData.password"}})],1),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:""==t.loginData.loginName||""==t.loginData.password,loading:t.loading,type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1),"Loading"===t.show_type?a("el-form",{staticClass:"login-page",attrs:{"label-position":"left","label-width":"0px","status-icon":""}},[a("div",{staticClass:"title"},[t._v(t._s(this.oauth.title))]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticStyle:{height:"80px","font-size":"30px","margin-bottom":"10px"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"正在登录,请稍后..."}})]):t._e(),"Error"===t.show_type?a("el-form",{staticClass:"login-page",attrs:{"label-position":"left","label-width":"0px","status-icon":""}},[a("div",{staticClass:"title"},[t._v(t._s(this.oauth.title))]),a("div",[a("strong",{staticStyle:{color:"red"}},[t._v(t._s(this.errorMessage))])]),a("div",{staticClass:"register"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.go_login()}}},[t._v("重新登录")])],1)]):t._e()],1)},n=[],l={name:"Login",data:function(){return{loginData:{loginName:"",password:""},oauth:{enable:!1,title:" Oauth2 登录"},show_type:"",errorMessage:"",loading:!1}},mounted:function(){var t=this;this.axios_get("/management/config").then((function(e){if(0===e.data.code)if(e.data.data.oauth&&(t.oauth.title=e.data.data.oauth.title,t.oauth.enable=e.data.data.oauth.enable),t.oauth.enable){var a=t.$route.query.code;a&&""!==a?t.post_data("/login",{code:a}).then((function(e){0!==e.data.code?(t.errorMessage="登录失败,服务器返回如下:\r\n".concat(e.data.message),t.show_type="Error"):(t.setToken(e.data.data.token),t.$router.push({path:"/"}))})):t.go_login()}else t.show_type="Login"}))},methods:{login:function(){var t=this;this.loading=!0,this.axios_get("/management/login/signature?loginName=".concat(this.loginData.loginName)).then((function(e){if(0===e.data.code){var a=window.sha256_digest(window.sha256_digest(t.loginData.password+":"+e.data.data.signature)+":"+e.data.data.nonce);t.post_data("/management/login",{loginName:t.loginData.loginName,password:a,nonce:e.data.data.nonce}).then((function(e){t.loading=!1,0===e.data.code&&(t.setToken(e.data.data.token),t.$router.push({path:"/"}))}))}else t.loading=!1}))},go_login:function(){window.location.href="/login"},show_login:function(){this.show_type="Login"}}},s=l,r=(a("d1cf"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,"ed7c2a9e",null),d=c.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"分组管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_group_click}},[t._v("创建群组")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新群组")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_groups}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"300"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return t.on_modify_group_click(e.row)}}},[t._v("编辑")]),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前群组？"},on:{confirm:function(a){return t.on_delete_group_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditGroup",{ref:"EditGroupRef",on:{on_create:t.on_group_create_callback,on_modify:t.on_group_modify_callback}})],1)},m=[],f=(a("c740"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-header",{staticClass:"header"},[i("div",{staticClass:"box"},[i("img",{staticClass:"logo",attrs:{src:a("28df")}}),i("span",{staticClass:"title"},[t._v("Roamblue Cloud")])]),i("div",{staticStyle:{display:"inline"}},[i("el-dropdown",{on:{command:t.menu_change}},[i("img",{staticClass:"user-menu",attrs:{src:a("11b4")}}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!this.oauth.enable,expression:"!this.oauth.enable"}],attrs:{command:"password"}},[t._v("修改密码")]),i("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出登录")])],1)],1),i("ChangePassword",{ref:"ChangePasswordRef"})],1)])}),_=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialog_visible,center:"",title:"修改密码",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"change_password_ref",attrs:{model:this,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"oldPassword"}},[a("el-input",{attrs:{type:"password","show-password":!0},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password","show-password":!0},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password","show-password":!0},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.oldPassword||""==t.newPassword||""==t.confirmPassword,loading:t.loading},on:{click:t.change_password}},[t._v("修 改")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},h=[],v={name:"ChangePassword",data:function(){return{dialog_visible:!1,oldPassword:"",newPassword:"",confirmPassword:"",loading:!1}},methods:{change_password:function(){var t=this;this.newPassword==this.confirmPassword?(this.loading=!0,this.axios_get("/management/signature").then((function(e){if(0===e.data.code){var a=window.sha256_digest(window.sha256_digest(t.oldPassword+":"+e.data.data.signature)+":"+e.data.data.nonce),i=e.data.data.nonce,o=window.sha256_digest(t.newPassword+":"+e.data.data.signature),n={oldPassword:a,newPassword:o,nonce:i};t.post_data("/management/password",n).then((function(e){t.loading=!1,0===e.data.code&&(t.$refs.change_password_ref.resetFields(),t.dialog_visible=!1)}))}else t.loading=!1}))):this.$notify.error({title:"错误",duration:3e3,message:"新密码与旧密码不一致"})}}},b=v,y=Object(r["a"])(b,p,h,!1,null,"7863c82f",null),g=y.exports,w={name:"Top.vue",components:{ChangePassword:g},mounted:function(){var t=this;this.axios_get("/management/config").then((function(e){e.data.data.oauth&&(t.oauth.enable=e.data.data.oauth.enable)})),this.refresh_token(),setInterval(this.refresh_token,36e5)},data:function(){return{oauth:{enable:!0}}},methods:{menu_change:function(t){"logout"===t?(localStorage.setItem("X-Token",""),this.$router.push({path:"/login"})):"password"==t&&(this.$refs.ChangePasswordRef.dialog_visible=!0)},refresh_token:function(){var t=this;this.post_data("/management/token/refresh",{}).then((function(e){t.loading=!1,0===e.data.code&&t.setToken(e.data.data.token)}))}}},k=w,x=(a("d8dc"),Object(r["a"])(k,f,_,!1,null,"b39d1230",null)),I=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{class:t.isCollapse?"menu_un_collapse":"menu_collapse",attrs:{"default-active":t.index,router:!0,"active-text-color":"#ffd04b","background-color":"#34495e","text-color":"#fff"}},[a("div",{staticStyle:{background:"#25262d","text-align":"center",height:"30px",color:"white","line-height":"30px",cursor:"pointer","font-size":"18px"},on:{click:t.change_menu_collapse}},[a("i",{class:t.isCollapse?"el-icon-s-fold":"el-icon-s-unfold",attrs:{id:"menu_collapse"}})]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Instance"),index:"1"}},[a("i",{staticClass:"layui-icon layui-icon-app"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("虚拟机管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Cluster"),index:"2"}},[a("i",{staticClass:"layui-icon layui-icon-location"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("集群管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Network"),index:"3"}},[a("i",{staticClass:"layui-icon layui-icon-website"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("网络管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Host"),index:"4"}},[a("i",{staticClass:"layui-icon layui-icon-slider"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("主机管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Template"),index:"5"}},[a("i",{staticClass:"layui-icon layui-icon-template-1"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("模版管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Storage"),index:"6"}},[a("i",{staticClass:"layui-icon layui-icon-note"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("存储管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Volume"),index:"7"}},[a("i",{staticClass:"layui-icon layui-icon-senior"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("磁盘管理")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Scheme"),index:"8"}},[a("i",{staticClass:"layui-icon layui-icon-theme"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("计算方案")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Category"),index:"9"}},[a("i",{staticClass:"layui-icon layui-icon-windows"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("系统分类")])]),a("el-menu-item",{attrs:{route:t.bind_menu_path("Group"),index:"10"}},[a("i",{staticClass:"layui-icon layui-icon-table"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("群组管理")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.oauth.enable,expression:"!this.oauth.enable"}],attrs:{route:t.bind_menu_path("User"),index:"11"}},[a("i",{staticClass:"layui-icon layui-icon-username"}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollapse,expression:"isCollapse"}],attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])])],1)},C=[],$={name:"Menu.vue",props:{index:String},data:function(){return{isCollapse:!0,oauth:{enable:!0}}},mounted:function(){var t=this;this.axios_get("/management/config").then((function(e){e.data.data.oauth&&(t.oauth.enable=e.data.data.oauth.enable)}))},created:function(){var t=localStorage.getItem("menu_is_collapse");this.isCollapse="0"!==t},methods:{change_menu_collapse:function(){this.isCollapse=!this.isCollapse,localStorage.setItem("menu_is_collapse",this.isCollapse?"1":"0")},bind_menu_path:function(t){return{path:t}}}},E=$,R=(a("fc8b"),Object(r["a"])(E,S,C,!1,null,"d86f382a",null)),N=R.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"serviceName"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_group}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},O=[],T=(a("b0c0"),{name:"EditGroup",data:function(){return{modify:{id:0,name:""},dialog_visible:!1,title:""}},methods:{init_data:function(t){t?(this.title="编辑群组",this.modify.id=t.id,this.modify.name=t.name):(this.title="创建群组",this.modify.id=0,this.modify.name=""),this.dialog_visible=!0},modify_group:function(){var t=this;0===this.modify.id?this.post_data("/management/group/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)})):this.post_data("/management/group/modify",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}}),D=T,A=Object(r["a"])(D,z,O,!1,null,"8be6e308",null),j=A.exports,M={name:"Group.vue",components:{Top:I,Menu:N,EditGroup:j},data:function(){return{menuIndex:"10",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_groups=[],this.loading=!0,this.load_groups().then((function(){return t.loading=!1}))},on_group_click:function(){this.$refs.EditGroupRef.init_data()},on_modify_group_click:function(t){this.$refs.EditGroupRef.init_data(t)},on_delete_group_click:function(t){var e=this;this.post_data("/management/group/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_groups.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_groups,i)}}))},on_group_create_callback:function(t){this.all_groups.push(t)},on_group_modify_callback:function(t){var e=this.all_groups.findIndex((function(e){return e.id===t.id}));this.$set(this.all_groups,e,t)}}},P=M,U=(a("feaf"),Object(r["a"])(P,u,m,!1,null,"6501f6c6",null)),L=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"系统分类管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_category_click}},[t._v("创建系统分类")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新系统分类")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_category}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"categoryName",width:"300"}}),a("el-table-column",{attrs:{label:"磁盘驱动",prop:"diskDriver",width:"300"}}),a("el-table-column",{attrs:{label:"网络驱动",prop:"networkDriver",width:"300"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return t.on_modify_category_click(e.row)}}},[t._v("编辑")]),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前系统分类？"},on:{confirm:function(a){return t.on_delete_category_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditCategory",{ref:"EditEditCategory",on:{on_create:t.on_category_create_callback,on_modify:t.on_category_modify_callback}})],1)},F=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"categoryName"}},[a("el-input",{model:{value:t.modify.categoryName,callback:function(e){t.$set(t.modify,"categoryName",e)},expression:"modify.categoryName"}})],1),a("el-form-item",{attrs:{label:"磁盘驱动",prop:"diskDriver"}},[a("el-select",{model:{value:t.modify.diskDriver,callback:function(e){t.$set(t.modify,"diskDriver",e)},expression:"modify.diskDriver"}},[a("el-option",{attrs:{value:"virtio",label:"virtio"}}),a("el-option",{attrs:{value:"ide",label:"ide"}}),a("el-option",{attrs:{value:"sata",label:"sata"}})],1)],1),a("el-form-item",{attrs:{label:"网卡驱动",prop:"networkDriver"}},[a("el-select",{model:{value:t.modify.networkDriver,callback:function(e){t.$set(t.modify,"networkDriver",e)},expression:"modify.networkDriver"}},[a("el-option",{attrs:{value:"virtio",label:"virtio"}}),a("el-option",{attrs:{value:"e1000",label:"e1000"}}),a("el-option",{attrs:{value:"rtl8139",label:"rtl8139"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_group}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},V=[],H={name:"EditCategory",data:function(){return{modify:{id:0,categoryName:"",diskDriver:"",networkDriver:""},dialog_visible:!1,title:""}},methods:{init_data:function(t){t?(this.title="编辑系统分类",this.modify.id=t.id,this.modify.categoryName=t.categoryName,this.modify.diskDriver=t.diskDriver,this.modify.networkDriver=t.networkDriver):(this.title="创建系统分类",this.modify.id=0,this.modify.categoryName="",this.modify.diskDriver="virtio",this.modify.networkDriver="virtio"),this.dialog_visible=!0},modify_group:function(){var t=this;0===this.modify.id?this.post_data("/management/os/category/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)})):this.post_data("/management/os/category/modify",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}},K=H,Y=Object(r["a"])(K,G,V,!1,null,"f45211ca",null),Q=Y.exports,q={name:"Category.vue",components:{Top:I,Menu:N,EditCategory:Q},data:function(){return{menuIndex:"9",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.loading=!0,this.all_category=[],this.load_category().then((function(){return t.loading=!1}))},on_category_click:function(){this.$refs.EditEditCategory.init_data()},on_modify_category_click:function(t){this.$refs.EditEditCategory.init_data(t)},on_delete_category_click:function(t){var e=this;this.post_data("/management/os/category/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_category.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_category,i)}}))},on_category_create_callback:function(t){this.all_category.push(t)},on_category_modify_callback:function(t){var e=this.all_category.findIndex((function(e){return e.id===t.id}));this.$set(this.all_category,e,t)}}},W=q,J=(a("a7f3"),Object(r["a"])(W,B,F,!1,null,"947e77a0",null)),X=J.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"计算方案管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_scheme_click}},[t._v("创建计算方案")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新计算方案")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.table_scheme}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"200"}}),a("el-table-column",{attrs:{label:"CPU",prop:"cpu",width:"100"}}),a("el-table-column",{attrs:{label:"主频(MHZ)",prop:"speed",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.speed>0?e.row.speed:"-"))])]}}])}),a("el-table-column",{attrs:{label:"套接字",prop:"socket",width:"100"}}),a("el-table-column",{attrs:{label:"核心",prop:"core",width:"100"}}),a("el-table-column",{attrs:{label:"线程",prop:"threads",width:"100"}}),a("el-table-column",{attrs:{label:"内存",prop:"memory",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_memory_capacity(e.row.memory)))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前方案？"},on:{confirm:function(a){return t.on_delete_scheme_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.current_page,"page-sizes":[10,20,50,100,200],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total_size},on:{"size-change":t.page_size_change,"current-change":t.current_page_change}})],1)],1)],1)],1)],1),a("EditScheme",{ref:"EditSchemeRef",on:{on_create:t.on_scheme_create_callback,on_modify:t.on_scheme_modify_callback}})],1)},tt=[],et=(a("4de4"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_scheme_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"serviceName"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"内存",prop:"memory"}},[a("el-input",{model:{value:t.modify.memory,callback:function(e){t.$set(t.modify,"memory",e)},expression:"modify.memory"}},[a("template",{slot:"append"},[t._v("MB")])],2)],1),a("el-form-item",{attrs:{label:"CPU",prop:"cpu"}},[a("el-input-number",{attrs:{max:100,min:1},model:{value:t.modify.cpu,callback:function(e){t.$set(t.modify,"cpu",e)},expression:"modify.cpu"}})],1),a("el-form-item",{attrs:{label:"套接字",prop:"socket"}},[a("el-input-number",{attrs:{max:10,min:1},model:{value:t.modify.socket,callback:function(e){t.$set(t.modify,"socket",e)},expression:"modify.socket"}})],1),a("el-form-item",{attrs:{label:"核心",prop:"core"}},[a("el-input-number",{attrs:{max:10,min:1},model:{value:t.modify.core,callback:function(e){t.$set(t.modify,"core",e)},expression:"modify.core"}})],1),a("el-form-item",{attrs:{label:"线程",prop:"threads"}},[a("el-input-number",{attrs:{max:10,min:1},model:{value:t.modify.threads,callback:function(e){t.$set(t.modify,"threads",e)},expression:"modify.threads"}})],1),a("el-form-item",{attrs:{label:"主频",prop:"memory"}},[a("el-input",{model:{value:t.modify.speed,callback:function(e){t.$set(t.modify,"speed",e)},expression:"modify.speed"}},[a("template",{slot:"append"},[t._v("MHZ")])],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_group}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)}),at=[],it={name:"EditScheme",data:function(){return{modify:{id:0,name:"",memory:"",cpu:1,speed:0,socket:4,core:2,threads:2},dialog_visible:!1,title:""}},methods:{init_data:function(t){t?(this.title="编辑计算方案",this.modify.id=t.id,this.modify.name=t.name,this.modify.memory=t.memory,this.modify.cpu=t.cpu,this.modify.speed=t.speed,this.modify.socket=t.socket,this.modify.core=t.core,this.modify.threads=t.threads):(this.title="创建计算方案",this.modify.id=0,this.modify.name="",this.modify.memory="1024",this.modify.cpu=1,this.modify.socket=4,this.modify.core=2,this.modify.threads=2,this.modify.speed=0),this.dialog_visible=!0},modify_group:function(){var t=this;0===this.modify.id?this.post_data("/management/calculation/scheme/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)})):this.post_data("/management/calculation/scheme/modify",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}},ot=it,nt=Object(r["a"])(ot,et,at,!1,null,"7140014a",null),lt=nt.exports,st={name:"Scheme.vue",components:{Top:I,Menu:N,EditScheme:lt},data:function(){return{menuIndex:"8",current_page:1,page_size:10,total_size:0}},mounted:function(){this.on_refresh()},computed:{table_scheme:function(){return this.all_scheme.filter((function(t){return t.id>0&&(void 0===t.isShow||t.isShow)}))}},methods:{on_refresh:function(){var t=this;this.all_scheme=[],this.loading=!0,this.load_scheme().then((function(){t.current_page=1,t.refresh_data(),t.loading=!1}))},on_scheme_click:function(){this.$refs.EditSchemeRef.init_data()},on_delete_scheme_click:function(t){var e=this;this.post_data("/management/calculation/scheme/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_scheme.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_scheme,i)}}))},on_scheme_create_callback:function(t){this.all_scheme.push(t)},on_scheme_modify_callback:function(t){var e=this.all_scheme.findIndex((function(e){return e.id===t.id}));this.$set(this.all_scheme,e,t)},current_page_change:function(t){this.current_page=t,this.refresh_data()},page_size_change:function(t){this.page_size=t,this.refresh_data()},refresh_data:function(){var t=this,e=0;this.all_scheme.forEach((function(a,i){e++,a.isShow=!0,(e<=t.page_size*(t.current_page-1)||e>t.page_size*t.current_page)&&(a.isShow=!1),t.$set(t.all_scheme,i,a)})),this.total_size=e}}},rt=st,ct=(a("fb17"),Object(r["a"])(rt,Z,tt,!1,null,"53932a64",null)),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"磁盘管理"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_volume_click}},[t._v("创建磁盘")]),t._v("  ")],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{input:t.on_filter_key_change},model:{value:t.filter.key,callback:function(e){t.$set(t.filter,"key",e)},expression:"filter.key"}})],1)])],1),a("el-divider"),a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{on:{change:t.on_select_cluster_change},model:{value:t.search.clusterId,callback:function(e){t.$set(t.search,"clusterId",e)},expression:"search.clusterId"}},[a("el-option",{key:0,attrs:{value:0,label:"无限制"}}),t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"存储池"}},[a("el-select",{model:{value:t.search.storageId,callback:function(e){t.$set(t.search,"storageId",e)},expression:"search.storageId"}},[a("el-option",{key:0,attrs:{value:0,label:"无限制"}}),t._l(t.select_storage,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"实例"}},[a("el-select",{model:{value:t.search.vmId,callback:function(e){t.$set(t.search,"vmId",e)},expression:"search.vmId"}},[a("el-option",{key:-1,attrs:{value:-1,label:"无限制"}}),t._l(t.select_instance,(function(t){return a("el-option",{key:t.id,attrs:{label:t.description,value:t.id}})}))],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.on_search_volume_click}},[t._v("查询")])],1)],1)],1),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.table_volume,"row-key":t.get_volume_id,"expand-row-keys":t.expand_volumes}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"编号"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"集群"}},[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]),a("el-form-item",{attrs:{label:"存储池"}},[a("span",[t._v(t._s(t.get_storage_name_by_id(e.row.storageId)))])]),a("el-form-item",{attrs:{label:"所属实例"}},[a("span",[t._v(t._s(t.get_instance_name_by_id(e.row.vmId)))])]),a("el-form-item",{attrs:{label:"挂载路径"}},[a("span",[t._v(t._s(t.get_volume_path(e.row)))])]),a("el-form-item",{attrs:{label:"磁盘容量"}},[a("span",[t._v(t._s(t.parse_disk_capacity(e.row.capacity)))])]),a("el-form-item",{attrs:{label:"物理大小"}},[a("span",[t._v(t._s(t.parse_disk_capacity(e.row.allocation)))])]),a("el-form-item",{attrs:{label:"磁盘类型"}},[a("el-tag",[t._v(t._s(0===e.row.device&&e.row.vmId>0?"ROOT":"DATA"))])],1),a("el-form-item",{attrs:{label:"磁盘状态"}},[a("el-tag",{attrs:{type:t.get_volume_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])])],1),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Ready"===e.row.status,expression:"props.row.status==='Ready'"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.resize_volume_click(e.row)}}},[t._v("扩容磁盘")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!=e.row.status&&0===e.row.vmId,expression:"props.row.status != `Destroy` && props.row.vmId === 0"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.attach_volume_click(e.row)}}},[t._v("挂载磁盘")]),a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!=e.row.status&&e.row.vmId>0&&e.row.device>0,expression:"props.row.status != `Destroy` && props.row.vmId > 0 && props.row.device>0"}],staticStyle:{"margin-left":"10px"},attrs:{title:"确认卸载当前磁盘？"},on:{confirm:function(a){return t.detach_volume_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("卸载磁盘")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Destroy"===e.row.status,expression:"props.row.status === 'Destroy'"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.resume_volume_click(e.row)}}},[t._v("恢复磁盘")]),a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!=e.row.status&&0===e.row.vmId,expression:"props.row.status != 'Destroy' && props.row.vmId === 0"}],staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前磁盘？"},on:{confirm:function(a){return t.on_delete_volume_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("销毁磁盘")])],1)],1)],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"200"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"存储",prop:"storageId",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_storage_name_by_id(e.row.storageId)))])]}}])}),a("el-table-column",{attrs:{label:"挂载实例",prop:"vmId",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_instance_name_by_id(e.row.vmId)))])]}}])}),a("el-table-column",{attrs:{label:"类型",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(0===e.row.device&&e.row.vmId>0?"ROOT":"DATA"))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_volume_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.current_page,"page-sizes":[10,20,50,100,200],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total_size},on:{"size-change":t.page_size_change,"current-change":t.current_page_change}})],1)],1)],1)],1)],1),a("ResizeVolume",{ref:"ResizeVolumeRef",on:{on_resize:t.on_resize_callback}}),a("AttachVolume",{ref:"AttachVolumeRef",on:{on_attach:t.on_attach_callback}}),a("EditVolume",{ref:"EditVolumeRef",on:{on_create:t.on_volume_create_callback}})],1)},mt=[],ft=a("5530"),_t=a("b85c"),pt=(a("ac1f"),a("841c"),a("99af"),a("498a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_scheme_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"serviceName"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{on:{change:t.on_cluster_change},model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"存储池"}},[a("el-select",{model:{value:t.modify.storageId,callback:function(e){t.$set(t.modify,"storageId",e)},expression:"modify.storageId"}},[a("el-option",{attrs:{value:0,label:"无限制"}}),t._l(t.search_storage,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"磁盘大小",prop:"size"}},[a("el-input-number",{attrs:{max:1e4,min:10},model:{value:t.modify.size,callback:function(e){t.$set(t.modify,"size",e)},expression:"modify.size"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name||0===t.modify.size},on:{click:t.crate_volume}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)}),ht=[],vt=(a("d81d"),{name:"EditVolume",data:function(){return{modify:{name:"",clusterId:"",storageId:0,size:10},dialog_visible:!1,title:""}},computed:{search_storage:function(){return this.all_storage.filter((function(t){return t.isShow}))}},methods:{init_data:function(t,e){this.title="创建磁盘",this.all_cluster=t.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0})})),this.all_storage=e.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!1})})),this.modify.storageId=0,this.modify.size=100,this.modify.name="",this.modify.clusterId="",this.dialog_visible=!0},on_cluster_change:function(t){var e=this;this.all_storage.forEach((function(a,i){a.isShow=a.clusterId===t,e.$set(e.all_volume,i,a)}))},crate_volume:function(){var t=this;this.post_data("/management/volume/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}}),bt=vt,yt=Object(r["a"])(bt,pt,ht,!1,null,"1803eda3",null),gt=yt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_scheme_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"新增大小",prop:"size"}},[a("el-input-number",{attrs:{max:1e4,min:1},model:{value:t.modify.size,callback:function(e){t.$set(t.modify,"size",e)},expression:"modify.size"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:0===t.modify.size},on:{click:t.modify_size}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},kt=[],xt={name:"ResizeVolume",data:function(){return{modify:{id:0,size:0},dialog_visible:!1,title:""}},methods:{init_data:function(t){this.modify.id=t,this.title="扩容磁盘",this.dialog_visible=!0},modify_size:function(){var t=this;this.post_data("/management/volume/resize",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_resize",e.data.data),t.dialog_visible=!1)}))}}},It=xt,St=Object(r["a"])(It,wt,kt,!1,null,"3674e0a2",null),Ct=St.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"挂载实例",prop:"size"}},[a("el-select",{model:{value:t.modify.id,callback:function(e){t.$set(t.modify,"id",e)},expression:"modify.id"}},t._l(t.all_instance,(function(t){return a("el-option",{key:t.id,attrs:{label:t.description,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""===this.modify.id},on:{click:t.modify_size}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Et=[],Rt={name:"AttachVolume",data:function(){return{modify:{id:"",volume:0},dialog_visible:!1,title:""}},methods:{init_data:function(t,e){this.modify.volume=t,this.title="挂载磁盘",this.dialog_visible=!0,this.all_instance=e},modify_size:function(){var t=this;this.post_data("/management/vm/attach/disk",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_attach",e.data.data),t.dialog_visible=!1)}))}}},Nt=Rt,zt=Object(r["a"])(Nt,$t,Et,!1,null,"36c38b96",null),Ot=zt.exports,Tt={name:"Volume.vue",components:{Top:I,Menu:N,EditVolume:gt,ResizeVolume:Ct,AttachVolume:Ot},data:function(){return{menuIndex:"7",filter:{key:""},search:{clusterId:0,storageId:0,vmId:-1},loading:!0,search_storage_list:[],search_instance_list:[],expand_volumes:[],current_page:1,page_size:10,total_size:0}},mounted:function(){this.on_search_volume_click()},computed:{table_volume:function(){return this.all_volume.filter((function(t){return void 0===t.isShow||t.isShow}))},select_storage:function(){return this.search_storage_list.filter((function(t){return void 0===t.isShow||t.isShow}))},select_instance:function(){return this.search_instance_list.filter((function(t){return void 0===t.isShow||t.isShow}))}},methods:{current_page_change:function(t){this.current_page=t,this.on_filter_key_change()},on_select_cluster_change:function(){this.init_search_storage(),this.init_search_instance()},init_search_storage:function(){this.search_storage_list=[];var t,e=!1,a=Object(_t["a"])(this.all_storage);try{for(a.s();!(t=a.n()).done;){var i=t.value;0!==this.search.clusterId&&this.search.clusterId!==i.clusterId||this.search_storage_list.push(Object(ft["a"])(Object(ft["a"])({},i),{},{isShow:!0})),(0===this.search.clusterId||i.id===this.search.storageId&&i.clusterId===this.search.clusterId)&&(e=!0)}}catch(o){a.e(o)}finally{a.f()}e||(this.search.storageId=0)},init_search_instance:function(){this.search_instance_list=[];var t,e=!1,a=Object(_t["a"])(this.all_instance);try{for(a.s();!(t=a.n()).done;){var i=t.value;0!==this.search.clusterId&&this.search.clusterId!==i.clusterId||this.search_instance_list.push(Object(ft["a"])(Object(ft["a"])({},i),{},{isShow:!0})),(0===this.search.clusterId||i.id===this.search.vmId&&i.clusterId===this.search.clusterId)&&(e=!0)}}catch(o){a.e(o)}finally{a.f()}e||(this.search.vmId=-1)},on_search_volume_click:function(){var t=this;this.loading=!0,this.load_cluster().then((function(){return t.load_storage().then((function(){return t.load_instance().then((function(){return t.search_volume().then((function(){t.current_page=1,t.on_filter_key_change(),t.init_search_storage(),t.init_search_instance(),t.loading=!1}))}))}))}))},search_volume:function(){var t=this;return this.axios_get("/management/volume/search?vmId=".concat(this.search.vmId,"&clusterId=").concat(this.search.clusterId,"&storageId=").concat(this.search.storageId)).then((function(e){0===e.data.code&&e.data.data&&(t.all_volume=e.data.data)}))},page_size_change:function(t){this.page_size=t,this.on_filter_key_change()},on_volume_click:function(){this.$refs.EditVolumeRef.init_data(this.all_cluster,this.all_storage)},get_volume_id:function(t){return t.id},on_filter_key_change:function(){var t=this,e=this.filter.key.trim().toLowerCase(),a=0;this.all_volume.forEach((function(i,o){if(""===e)i.isShow=!0;else{var n=t.get_cluster_name_by_id(i.clusterId).toLowerCase(),l=t.get_cluster_name_by_id(i.storateId).toLowerCase(),s=t.get_instance_name_by_id(i.vmId).toLowerCase(),r=i.name.toLowerCase();i.isShow=n.indexOf(e)>=0||l.indexOf(e)>=0||s.indexOf(e)>=0||r.indexOf(e)>=0}i.isShow&&a++,(a<=t.page_size*(t.current_page-1)||a>t.page_size*t.current_page)&&(i.isShow=!1),t.$set(t.all_volume,o,i)})),this.total_size=a},on_delete_volume_click:function(t){var e=this;this.post_data("/management/volume/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_volume.findIndex((function(e){return e.id===t.id}));e.$set(e.all_volume,i,a.data.data)}}))},on_volume_create_callback:function(t){this.all_volume.push(t)},on_resize_callback:function(t){var e=this.all_volume.findIndex((function(e){return e.id===t.id}));this.$set(this.all_volume,e,t)},on_attach_callback:function(t){var e=this.all_volume.findIndex((function(e){return e.id===t.id}));this.$set(this.all_volume,e,t)},resize_volume_click:function(t){this.$refs.ResizeVolumeRef.init_data(t.id)},attach_volume_click:function(t){this.$refs.AttachVolumeRef.init_data(t.id,this.all_instance)},get_volume_status_tag_type:function(t){return"Ready"===t?"":"danger"},detach_volume_click:function(t){var e=this;this.post_data("/management/vm/detach/disk",{id:t.vmId,volume:t.id}).then((function(a){if(0===a.data.code){var i=e.all_volume.findIndex((function(e){return e.id===t.id}));e.$set(e.all_volume,i,a.data.data)}}))},resume_volume_click:function(t){var e=this;this.post_data("/management/volume/resume",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_volume.findIndex((function(e){return e.id===t.id}));e.$set(e.all_volume,i,a.data.data)}}))}}},Dt=Tt,At=(a("d888"),Object(r["a"])(Dt,ut,mt,!1,null,null,null)),jt=At.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"存储池管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_storage_click}},[t._v("创建存储池")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新存储池")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_storage}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"编号"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"集群"}},[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]),a("el-form-item",{attrs:{label:"挂载路径"}},[a("el-tag",[t._v("/mnt/"+t._s(e.row.target))])],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-tag",[t._v("nfs://"+t._s(e.row.host)+t._s(e.row.source))])],1),a("el-form-item",{attrs:{label:"磁盘容量"}},[a("span",[t._v(t._s(t.parse_disk_capacity(e.row.capacity)))])]),a("el-form-item",{attrs:{label:"可用容量"}},[a("span",[t._v(t._s(t.parse_disk_capacity(e.row.available)))])]),a("el-form-item",{attrs:{label:"申请容量"}},[a("span",[t._v(t._s(t.parse_disk_capacity(e.row.allocation)))])]),a("el-form-item",{attrs:{label:"存储状态"}},[a("el-tag",{attrs:{type:t.get_volume_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])])],1)],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"150"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"容量",prop:"name",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:t.get_storage_percentage(e.row),color:"#f56c6c"}})]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_volume_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{attrs:{title:"确认删除当前存储池？"},on:{confirm:function(a){return t.on_delete_storage_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditStorage",{ref:"EditStorageRef",on:{on_create:t.on_storage_create_callback}})],1)},Pt=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"Nfs地址"}},[a("el-input",{model:{value:t.modify.uri,callback:function(e){t.$set(t.modify,"uri",e)},expression:"modify.uri"}})],1),a("el-form-item",{attrs:{label:"Nfs路径"}},[a("el-input",{model:{value:t.modify.source,callback:function(e){t.$set(t.modify,"source",e)},expression:"modify.source"}})],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.uri||""==t.modify.source||""==t.modify.name||""===t.modify.clusterId},on:{click:t.create_storage}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Lt=[],Bt={name:"EditStorage",data:function(){return{modify:{name:"",clusterId:"",uri:"",source:""},dialog_visible:!1,loading:!1,title:""}},methods:{init_data:function(t){this.title="创建存储池",this.modify.name="",this.modify.uri="",this.modify.source="",this.loading=!1,this.all_cluster=t,this.dialog_visible=!0},create_storage:function(){var t=this;this.loading=!0,this.post_data("/management/storage/create",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},Ft=Bt,Gt=Object(r["a"])(Ft,Ut,Lt,!1,null,"6e8258b6",null),Vt=Gt.exports,Ht={name:"Storage.vue",components:{Top:I,Menu:N,EditStorage:Vt},data:function(){return{menuIndex:"6",loading:!0}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_cluster=[],this.all_storage=[],this.loading=!0,this.load_cluster().then((function(){return t.load_storage().then((function(){return t.loading=!1}))}))},on_storage_click:function(){this.$refs.EditStorageRef.init_data(this.all_cluster)},on_delete_storage_click:function(t){var e=this;this.post_data("/management/storage/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_storage.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_storage,i)}}))},get_volume_status_tag_type:function(t){return"Ready"===t?"":"danger"},on_storage_create_callback:function(t){this.all_storage.push(t)},get_storage_percentage:function(t){var e=0===t.capacity?0:parseInt(100*t.allocation/t.capacity);return e}}},Kt=Ht,Yt=(a("127b"),Object(r["a"])(Kt,Mt,Pt,!1,null,"29955d0e",null)),Qt=Yt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"模版管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_template_click}},[t._v("创建模版")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新模版")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_template}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"编号"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"集群"}},[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.row.uri,expression:"props.row.uri"}],attrs:{label:"模版地址"}},[a("el-tag",[t._v(t._s(e.row.uri))])],1),a("el-form-item",{attrs:{label:"模版类型"}},[a("span",[t._v(t._s(e.row.type))])]),a("el-form-item",{attrs:{label:"系统类型"}},[a("el-tag",[t._v(t._s(t.get_category_name_by_id(e.row.osCategoryId)))])],1),a("el-form-item",{attrs:{label:"模版状态"}},[a("el-tag",{attrs:{type:t.get_template_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])])],1)],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"400"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_template_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{attrs:{title:"确认删除当前模版？"},on:{confirm:function(a){return t.on_delete_template_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditTemplate",{ref:"EditTemplateRef",on:{on_create:t.on_template_create_callback}})],1)},Wt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.modify.templateName,callback:function(e){t.$set(t.modify,"templateName",e)},expression:"modify.templateName"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"系统类型"}},[a("el-select",{model:{value:t.modify.osCategoryId,callback:function(e){t.$set(t.modify,"osCategoryId",e)},expression:"modify.osCategoryId"}},t._l(t.all_category,(function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"模版地址"}},[a("el-input",{model:{value:t.modify.templateUri,callback:function(e){t.$set(t.modify,"templateUri",e)},expression:"modify.templateUri"}})],1),a("el-form-item",{attrs:{label:"模版类型"}},[a("el-select",{model:{value:t.modify.templateType,callback:function(e){t.$set(t.modify,"templateType",e)},expression:"modify.templateType"}},[a("el-option",{attrs:{value:"ISO",label:"ISO"}}),a("el-option",{attrs:{value:"Disk",label:"Disk"}}),a("el-option",{attrs:{value:"Route",label:"Route"}}),a("el-option",{attrs:{value:"Console",label:"Console"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.templateType||""==t.modify.templateUri||""==t.modify.osCategoryId||""==t.modify.templateName||""===t.modify.clusterId},on:{click:t.create_template}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Xt=[],Zt={name:"EditTemplate",data:function(){return{modify:{templateName:"",clusterId:"",osCategoryId:"",templateType:"ISO",templateUri:""},dialog_visible:!1,loading:!1,title:""}},methods:{init_data:function(t,e){this.title="创建模版",this.modify.templateName="",this.modify.templateUri="",this.modify.clusterId="",this.modify.osCategoryId="",this.modify.templateType="ISO",this.loading=!1,this.all_cluster=t,this.all_category=e,this.dialog_visible=!0},create_template:function(){var t=this;this.loading=!0,this.post_data("/management/template/create",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},te=Zt,ee=Object(r["a"])(te,Jt,Xt,!1,null,"ebf34174",null),ae=ee.exports,ie={name:"Template.vue",components:{Top:I,Menu:N,EditTemplate:ae},data:function(){return{menuIndex:"5",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_cluster=[],this.all_category=[],this.all_template=[],this.loading=!0,this.load_cluster().then((function(){return t.load_category().then((function(){return t.load_template().then((function(){return t.loading=!1}))}))}))},on_template_click:function(){this.$refs.EditTemplateRef.init_data(this.all_cluster,this.all_category)},on_delete_template_click:function(t){var e=this;this.post_data("/management/template/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_template.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_template,i)}}))},get_template_status_tag_type:function(t){return"Ready"===t?"":"danger"},on_template_create_callback:function(t){this.all_template.push(t)}}},oe=ie,ne=(a("65c7"),Object(r["a"])(oe,qt,Wt,!1,null,"fe8894fa",null)),le=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"主机管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_host_click}},[t._v("创建主机")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新主机")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_host}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"编号"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"主机IP"}},[a("span",[t._v(t._s(e.row.ip))])]),a("el-form-item",{attrs:{label:"通信地址"}},[a("span",[t._v(t._s(e.row.uri))])]),a("el-form-item",{attrs:{label:"主机状态"}},[a("el-tag",{attrs:{type:t.get_host_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])],1),a("el-form-item",{attrs:{label:"集群"}},[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]),a("el-form-item",{attrs:{label:"已用内核"}},[a("span",[t._v(t._s(e.row.allocationCpu))])]),a("el-form-item",{attrs:{label:"总内核"}},[a("span",[t._v(t._s(e.row.cpu))])]),a("el-form-item",{attrs:{label:"已用内存"}},[a("span",[t._v(t._s(t.parse_memory_capacity(e.row.allocationMemory)))])]),a("el-form-item",{attrs:{label:"总内存"}},[a("span",[t._v(" "+t._s(t.parse_memory_capacity(e.row.memory)))])]),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])])],1)],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"50"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"150"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"Cpu使用率",prop:"cpu",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:t.get_host_cpu_percentage(e.row),color:"#f56c6c"}})]}}])}),a("el-table-column",{attrs:{label:"内存使用率",prop:"name",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:t.get_host_memory_percentage(e.row),color:"#f56c6c"}})]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_host_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Maintenance"===e.row.status,expression:"scope.row.status==='Maintenance'"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.start_host_click(e.row)}}},[t._v("启用")]),a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:"Ready"===e.row.status,expression:"scope.row.status==='Ready'"}],attrs:{title:"维护主机会导致该主机所有实例停止，是否继续？"},on:{confirm:function(a){return t.stop_host_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("维护")])],1),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前主机？"},on:{confirm:function(a){return t.on_delete_host_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditHost",{ref:"EditHostRef",on:{on_create:t.on_host_create_callback}})],1)},re=[],ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"主机IP"}},[a("el-input",{attrs:{placeholder:"例:192.168.2.3"},model:{value:t.modify.ip,callback:function(e){t.$set(t.modify,"ip",e)},expression:"modify.ip"}})],1),a("el-form-item",{attrs:{label:"通信地址"}},[a("el-input",{attrs:{placeholder:"例:http://192.168.2.3:8081"},model:{value:t.modify.uri,callback:function(e){t.$set(t.modify,"uri",e)},expression:"modify.uri"}})],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.uri||""==t.modify.source||""==t.modify.name||""===t.modify.clusterId},on:{click:t.create_storage}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},de=[],ue={name:"EditHost",data:function(){return{modify:{name:"",clusterId:"",uri:"",ip:""},dialog_visible:!1,loading:!1,title:""}},methods:{init_data:function(t){this.title="创建主机",this.modify.name="",this.modify.uri="",this.modify.ip="",this.loading=!1,this.all_cluster=t,this.dialog_visible=!0},create_storage:function(){var t=this;this.loading=!0,this.post_data("/management/host/create",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},me=ue,fe=Object(r["a"])(me,ce,de,!1,null,"7d8bdf05",null),_e=fe.exports,pe={name:"Host.vue",components:{Top:I,Menu:N,EditHost:_e},data:function(){return{menuIndex:"4",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_cluster=[],this.all_host=[],this.loading=!0,this.load_cluster().then((function(){return t.load_host()})).then((function(){return t.loading=!1}))},on_host_click:function(){this.$refs.EditHostRef.init_data(this.all_cluster)},on_delete_host_click:function(t){var e=this;this.post_data("/management/host/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_host.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_host,i)}}))},get_host_status_tag_type:function(t){return"Ready"===t?"":"danger"},on_host_create_callback:function(t){this.all_host.push(t)},get_host_cpu_percentage:function(t){var e=0===t.cpu?0:parseInt(100*t.allocationCpu/t.cpu);return e},get_host_memory_percentage:function(t){var e=0===t.memory?0:parseInt(100*t.allocationMemory/t.memory);return e},start_host_click:function(t){var e=this;this.post_data("/management/host/status",{id:t.id,status:"Ready"}).then((function(a){if(0===a.data.code){var i=e.all_host.findIndex((function(e){return e.id===t.id}));e.$set(e.all_host,i,a.data.data)}}))},stop_host_click:function(t){var e=this;this.post_data("/management/host/status",{id:t.id,status:"Maintenance"}).then((function(a){if(0===a.data.code){var i=e.all_host.findIndex((function(e){return e.id===t.id}));e.$set(e.all_host,i,a.data.data)}}))}}},he=pe,ve=(a("73e4"),Object(r["a"])(he,se,re,!1,null,"315888e6",null)),be=ve.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"集群管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_cluster_click}},[t._v("创建集群")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新集群")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_cluster}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"300"}}),a("el-table-column",{attrs:{label:"CPU超配",prop:"overCpu",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.overCpu.toFixed(2)))])]}}])}),a("el-table-column",{attrs:{label:"内存超配",prop:"overMemory",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.overMemory.toFixed(2)))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return t.on_modify_cluster_click(e.row)}}},[t._v("编辑")]),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前集群？"},on:{confirm:function(a){return t.on_delete_cluster_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditCluster",{ref:"EditClusterRef",on:{on_create:t.on_cluster_create_callback,on_modify:t.on_cluster_modify_callback}})],1)},ge=[],we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"serviceName"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"CPU超配",prop:"overCpu"}},[a("el-input",{model:{value:t.modify.overCpu,callback:function(e){t.$set(t.modify,"overCpu",e)},expression:"modify.overCpu"}})],1),a("el-form-item",{attrs:{label:"内存超配",prop:"overMemory"}},[a("el-input",{model:{value:t.modify.overMemory,callback:function(e){t.$set(t.modify,"overMemory",e)},expression:"modify.overMemory"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_cluster}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},ke=[],xe=(a("b680"),{name:"EditCluster",data:function(){return{modify:{id:0,name:"",overCpu:"",overMemory:""},dialog_visible:!1,title:""}},methods:{init_data:function(t){t?(this.title="编辑群组",this.modify.id=t.id,this.modify.name=t.name,this.modify.overCpu=t.overCpu.toFixed(2),this.modify.overMemory=t.overMemory.toFixed(2)):(this.title="创建群组",this.modify.id=0,this.modify.name="",this.modify.overCpu="1.00",this.modify.overMemory="1.00"),this.dialog_visible=!0},modify_cluster:function(){var t=this;0===this.modify.id?this.post_data("/management/cluster/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)})):this.post_data("/management/cluster/modify",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}}),Ie=xe,Se=Object(r["a"])(Ie,we,ke,!1,null,"66519c80",null),Ce=Se.exports,$e={name:"Cluster.vue",components:{Top:I,Menu:N,EditCluster:Ce},data:function(){return{menuIndex:"2",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_cluster=[],this.loading=!0,this.load_cluster().then((function(){return t.loading=!1}))},on_cluster_click:function(){this.$refs.EditClusterRef.init_data()},on_modify_cluster_click:function(t){this.$refs.EditClusterRef.init_data(t)},on_delete_cluster_click:function(t){var e=this;this.post_data("/management/cluster/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_cluster.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_cluster,i)}}))},on_cluster_create_callback:function(t){this.all_cluster.push(t)},on_cluster_modify_callback:function(t){var e=this.all_cluster.findIndex((function(e){return e.id===t.id}));this.$set(this.all_cluster,e,t)}}},Ee=$e,Re=(a("5683"),Object(r["a"])(Ee,ye,ge,!1,null,"4fb21832",null)),Ne=Re.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"网络管理"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_network_click}},[t._v("创建网络")]),t._v("  "),a("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"primary"},on:{click:t.on_refresh}},[t._v("刷新网络")])],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_network}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"编号"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"网卡"}},[a("span",[t._v(t._s(e.row.card))])]),a("el-form-item",{attrs:{label:"名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"集群"}},[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]),a("el-form-item",{attrs:{label:"管理起始IP"}},[a("span",[t._v(t._s(e.row.managerStartIp))])]),a("el-form-item",{attrs:{label:"管理结束IP"}},[a("span",[t._v(t._s(e.row.managerEndIp))])]),a("el-form-item",{attrs:{label:"实例开始IP"}},[a("span",[t._v(t._s(e.row.guestStartIp))])]),a("el-form-item",{attrs:{label:"实例结束IP"}},[a("span",[t._v(t._s(e.row.guestEndIp))])]),a("el-form-item",{attrs:{label:"子网地址"}},[a("span",[t._v(t._s(e.row.subnet))])]),a("el-form-item",{attrs:{label:"DNS信息"}},[a("span",[t._v(t._s(e.row.dns))])]),a("el-form-item",{attrs:{label:"网络状态"}},[a("el-tag",{attrs:{type:t.get_network_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])],1),a("el-form-item",{attrs:{label:"网络类型"}},[a("span",[t._v(" "+t._s(e.row.type))])]),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])])],1)],1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"50"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"150"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_network_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"Pause"===e.row.status,expression:"scope.row.status==='Pause'"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.start_network_click(e.row)}}},[t._v("启用")]),a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:"Ready"===e.row.status,expression:"scope.row.status==='Ready'"}],attrs:{title:"确认暂停网络？"},on:{confirm:function(a){return t.stop_network_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("暂停")])],1),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前网络？"},on:{confirm:function(a){return t.on_delete_network_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)],1),a("EditNetwork",{ref:"EditNetworkRef",on:{on_create:t.on_network_create_callback}})],1)},Oe=[],Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"700px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.modify,"label-position":"right","label-width":"100px",inline:!0}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"网络类型"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.modify.type,callback:function(e){t.$set(t.modify,"type",e)},expression:"modify.type"}},[a("el-option",{key:"Bridge",attrs:{label:"Bridge",value:"Bridge"}})],1)],1),a("el-form-item",{attrs:{label:"网卡名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:br0"},model:{value:t.modify.card,callback:function(e){t.$set(t.modify,"card",e)},expression:"modify.card"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"管理开始IP"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.2"},model:{value:t.modify.managerStartIp,callback:function(e){t.$set(t.modify,"managerStartIp",e)},expression:"modify.managerStartIp"}})],1),a("el-form-item",{attrs:{label:"管理结束IP"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.20"},model:{value:t.modify.managerEndIp,callback:function(e){t.$set(t.modify,"managerEndIp",e)},expression:"modify.managerEndIp"}})],1),a("el-form-item",{attrs:{label:"实例开始IP"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.100"},model:{value:t.modify.guestStartIp,callback:function(e){t.$set(t.modify,"guestStartIp",e)},expression:"modify.guestStartIp"}})],1),a("el-form-item",{attrs:{label:"实例结束IP"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.100"},model:{value:t.modify.guestEndIp,callback:function(e){t.$set(t.modify,"guestEndIp",e)},expression:"modify.guestEndIp"}})],1),a("el-form-item",{attrs:{label:"子网地址"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.0/24"},model:{value:t.modify.subnet,callback:function(e){t.$set(t.modify,"subnet",e)},expression:"modify.subnet"}})],1),a("el-form-item",{attrs:{label:"网关地址"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.1"},model:{value:t.modify.gateway,callback:function(e){t.$set(t.modify,"gateway",e)},expression:"modify.gateway"}})],1),a("el-form-item",{attrs:{label:"系统DNS"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"例:192.168.3.1,8.8.8.8"},model:{value:t.modify.dns,callback:function(e){t.$set(t.modify,"dns",e)},expression:"modify.dns"}})],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.create_storage}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)},De=[],Ae={name:"EditNetwork",data:function(){return{modify:{name:"",clusterId:"",card:"",type:"Bridge",managerStartIp:"",managerEndIp:"",guestStartIp:"",guestEndIp:"",subnet:"",gateway:"",dns:""},dialog_visible:!1,loading:!1,title:""}},methods:{init_data:function(t){this.title="创建网络",this.modify.name="",this.modify.clusterId="",this.modify.card="",this.modify.type="Bridge",this.modify.managerStartIp="",this.modify.managerEndIp="",this.modify.guestStartIp="",this.modify.guestEndIp="",this.modify.subnet="",this.modify.gateway="",this.modify.dns="",this.loading=!1,this.all_cluster=t,this.dialog_visible=!0},create_storage:function(){var t=this;this.loading=!0,this.post_data("/management/network/create",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},je=Ae,Me=Object(r["a"])(je,Te,De,!1,null,"53d34cb6",null),Pe=Me.exports,Ue={name:"Network.vue",components:{Top:I,Menu:N,EditNetwork:Pe},data:function(){return{menuIndex:"3",loading:!1}},created:function(){this.on_refresh()},methods:{on_refresh:function(){var t=this;this.all_cluster=[],this.all_network=[],this.load_cluster().then((function(){return t.load_network()})).then((function(){return t.loading=!1}))},on_network_click:function(){this.$refs.EditNetworkRef.init_data(this.all_cluster)},on_delete_network_click:function(t){var e=this;this.post_data("/management/network/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_network.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_network,i)}}))},get_network_status_tag_type:function(t){return"Ready"===t?"":"danger"},on_network_create_callback:function(t){this.all_network.push(t)},start_network_click:function(t){var e=this;this.post_data("/management/network/start",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_network.findIndex((function(e){return e.id===t.id}));e.$set(e.all_network,i,a.data.data)}}))},stop_network_click:function(t){var e=this;this.post_data("/management/network/pause",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_network.findIndex((function(e){return e.id===t.id}));e.$set(e.all_network,i,a.data.data)}}))}}},Le=Ue,Be=(a("f525"),Object(r["a"])(Le,ze,Oe,!1,null,"1348790b",null)),Fe=Be.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"UserList"}},[a("UserList",{ref:"UserListRef"})],1),a("el-tab-pane",{attrs:{label:"权限管理",name:"RoleList"}},[a("RuleList",{on:{on_rule_create:t.on_rule_create,on_rule_modify:t.on_rule_modify,on_rule_destroy:t.on_rule_destroy}})],1)],1)],1)],1)],1)},Ve=[],He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_register_user_click}},[t._v("注册用户")]),t._v("  ")],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_users}},[a("el-table-column",{attrs:{label:"用户ID",prop:"userId",width:"80"}}),a("el-table-column",{attrs:{label:"登录名",prop:"loginName",width:"100"}}),a("el-table-column",{attrs:{label:"权限",prop:"rule",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(t.get_rule_name_by_id(e.row.rule)))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"state",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(0===e.row.state?"启用":"禁用"))])]}}])}),a("el-table-column",{attrs:{label:"注册时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.parse_date(e.row.registerTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.reset_password_click(e.row)}}},[t._v("重置密码")]),a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.change_rule_click(e.row)}}},[t._v("修改权限")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.row.state,expression:"scope.row.state!==0"}],attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.enable_user_click(e.row)}}},[t._v("启用用户")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.row.state,expression:"scope.row.state===0"}],attrs:{plain:"",size:"small",type:"danger"},on:{click:function(a){return t.disable_user_click(e.row)}}},[t._v("禁用用户")]),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前用户？"},on:{confirm:function(a){return t.delete_user_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"small",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),a("RegisterUser",{ref:"RegisterUserRef",on:{on_create:t.on_user_register_callback}}),a("ChangeUserRule",{ref:"ChangeUserRuleRef",on:{on_modify:t.on_user_modify_callback}}),a("ResetUserPassword",{ref:"ResetUserPasswordRef",on:{on_modify:t.on_user_modify_callback}})],1)],1)},Ke=[],Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"登录名称",prop:"loginName"}},[a("el-input",{model:{value:t.modify.loginName,callback:function(e){t.$set(t.modify,"loginName",e)},expression:"modify.loginName"}})],1),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","show-password":!0},model:{value:t.modify.password,callback:function(e){t.$set(t.modify,"password",e)},expression:"modify.password"}})],1),a("el-form-item",{attrs:{label:"用户权限"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.modify.rule,callback:function(e){t.$set(t.modify,"rule",e)},expression:"modify.rule"}},t._l(t.all_rules,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_user}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Qe=[],qe={name:"RegisterUser",data:function(){return{modify:{loginName:"",password:"",rule:""},dialog_visible:!1,title:""}},methods:{init_data:function(t){this.title="注册用户",this.modify.loginName="",this.modify.password="",this.modify.rule="",this.all_rules=t,this.all_rules.length>0&&(this.modify.rule=this.all_rules[0].id),this.dialog_visible=!0},modify_user:function(){var t=this;this.post_data("/management/user/register",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},We=qe,Je=Object(r["a"])(We,Ye,Qe,!1,null,"5597a0fb",null),Xe=Je.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户权限"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.modify.rule,callback:function(e){t.$set(t.modify,"rule",e)},expression:"modify.rule"}},t._l(t.all_rules,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_user}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},ta=[],ea={name:"ChangeUserRule",data:function(){return{modify:{userId:0,rule:""},dialog_visible:!1,title:""}},methods:{init_data:function(t,e){this.title="修改权限",this.modify.userId=t.userId,this.modify.rule=t.rule,this.all_rules=e,this.dialog_visible=!0},modify_user:function(){var t=this;this.post_data("/management/user/rule",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}},aa=ea,ia=Object(r["a"])(aa,Ze,ta,!1,null,"94b50b06",null),oa=ia.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","show-password":!0},model:{value:t.modify.password,callback:function(e){t.$set(t.modify,"password",e)},expression:"modify.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_user}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},la=[],sa={name:"ResetUserPassword",data:function(){return{modify:{userId:0,password:""},dialog_visible:!1,title:""}},methods:{init_data:function(t){this.title="重置密码",this.modify.password="",this.modify.userId=t.userId,this.dialog_visible=!0},modify_user:function(){var t=this;this.post_data("/management/user/reset/password",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}},ra=sa,ca=Object(r["a"])(ra,na,la,!1,null,"3b58b134",null),da=ca.exports,ua={name:"UserList",components:{RegisterUser:Xe,ChangeUserRule:oa,ResetUserPassword:da},data:function(){return{}},created:function(){var t=this;this.load_rules().then((function(){return t.load_users()}))},methods:{on_register_user_click:function(){this.$refs.RegisterUserRef.init_data(this.all_rules)},on_user_register_callback:function(t){this.all_users.push(t)},reset_password_click:function(t){this.$refs.ResetUserPasswordRef.init_data(t)},change_rule_click:function(t){this.$refs.ChangeUserRuleRef.init_data(t,this.all_rules)},on_user_modify_callback:function(t){var e=this.all_users.findIndex((function(e){return e.userId===t.userId}));this.$set(this.all_users,e,t)},enable_user_click:function(t){var e=this;this.post_data("/management/user/state",{userId:t.userId,state:0}).then((function(a){if(0===a.data.code){var i=e.all_users.findIndex((function(e){return e.userId===t.userId}));e.$set(e.all_users,i,a.data.data)}}))},disable_user_click:function(t){var e=this;this.post_data("/management/user/state",{userId:t.userId,state:1}).then((function(a){if(0===a.data.code){var i=e.all_users.findIndex((function(e){return e.userId===t.userId}));e.$set(e.all_users,i,a.data.data)}}))},delete_user_click:function(t){var e=this;this.post_data("/management/user/destroy",{userId:t.userId}).then((function(a){if(0===a.data.code){var i=e.all_users.findIndex((function(e){return e.userId===t.userId}));e.$delete(e.all_users,i)}}))},on_rule_create:function(t){this.all_rules.push(t)},on_rule_modify:function(t){var e=this.all_rules.findIndex((function(e){return e.id===t.id}));this.$set(this.all_rules,e,t)},on_rule_destroy:function(t){var e=this.all_rules.findIndex((function(e){return e.id===t.id}));this.$delete(this.all_rules,e)}}},ma=ua,fa=(a("5fc8"),Object(r["a"])(ma,He,Ke,!1,null,"14af3541",null)),_a=fa.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary"},on:{click:t.on_create_rule_click}},[t._v("添加权限")]),t._v("  ")],1)])],1),a("el-divider"),a("div",{staticStyle:{display:"flex"}},[a("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.all_rules}},[a("el-table-column",{attrs:{label:"权限ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"权限名称",prop:"name",width:"300"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(a){return t.change_rule_click(e.row)}}},[t._v("修改权限")]),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认删除当前权限组？"},on:{confirm:function(a){return t.delete_rule_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"small",type:"danger"},slot:"reference"},[t._v("删除权限")])],1)]}}])})],1)],1),a("EditRule",{ref:"EditRuleRef",on:{on_create:t.on_rule_create_callback,on_modify:t.on_rule_modify_callback}})],1)},ha=[],va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_project_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[a("div",{staticStyle:{height:"300px",overflow:"auto",border:"1px solid #DCDFE6"}},[a("el-tree",{attrs:{data:t.permission_tree,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":t.default_check_permissions_list,"expand-on-click-node":!1},on:{check:t.on_permission_tree_change}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.modify_rule}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},ba=[],ya=(a("a15b"),a("a4d3"),a("e01a"),{name:"EditRule",data:function(){return{modify:{id:0,name:"",permissions:""},default_check_permissions_list:[],permission_tree:[],dialog_visible:!1,title:""}},methods:{init_data:function(t,e,a){for(var i in t?(this.title="编辑群组",this.modify.id=t.id,this.modify.name=t.name,this.modify.permissions=t.permissions.join(","),this.default_check_permissions_list=t.permissions):(this.title="创建群组",this.modify.id=0,this.modify.name="",this.modify.permissions="",this.default_check_permissions_list=[]),this.permission_tree=[],e){var o=e[i],n={id:"category_".concat(o.id),label:o.name,children:[]};for(var l in a){var s=a[l];s.categoryId===o.id&&n.children.push({id:s.id,label:s.description})}this.permission_tree.push(n)}this.dialog_visible=!0},on_permission_tree_change:function(t,e){this.default_check_permissions_list=e.checkedKeys.filter((function(t){return"number"===typeof t})),this.modify.permissions=this.default_check_permissions_list.join(",")},modify_rule:function(){var t=this;0===this.modify.id?this.post_data("/management/rules/create",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)})):this.post_data("/management/rules/modify",this.modify).then((function(e){0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)}))}}}),ga=ya,wa=Object(r["a"])(ga,va,ba,!1,null,"05225f14",null),ka=wa.exports,xa={name:"RuleList",components:{EditRule:ka},data:function(){return{}},created:function(){var t=this;this.load_permission_category().then((function(){return t.load_permission().then((function(){return t.load_rules()}))}))},methods:{on_create_rule_click:function(){this.$refs.EditRuleRef.init_data(void 0,this.all_permission_category,this.all_permission)},on_rule_create_callback:function(t){this.all_rules.push(t),this.$emit("on_rule_create",t)},on_rule_modify_callback:function(t){var e=this.all_rules.findIndex((function(e){return e.id===t.id}));this.$set(this.all_rules,e,t),this.$emit("on_rule_modify",t)},change_rule_click:function(t){this.$refs.EditRuleRef.init_data(t,this.all_permission_category,this.all_permission)},delete_rule_click:function(t){var e=this;this.post_data("/management/rules/destroy",{id:t.id}).then((function(a){if(0===a.data.code){var i=e.all_rules.findIndex((function(e){return e.id===t.id}));e.$delete(e.all_rules,i),e.$emit("on_rule_destroy",t)}}))}}},Ia=xa,Sa=(a("b64c"),Object(r["a"])(Ia,pa,ha,!1,null,"2696d25c",null)),Ca=Sa.exports,$a={name:"User.vue",components:{Top:I,Menu:N,UserList:_a,RuleList:Ca},data:function(){return{activeName:"UserList",menuIndex:"11"}},methods:{on_rule_create:function(t){this.$refs.UserListRef.on_rule_create(t)},on_rule_modify:function(t){this.$refs.UserListRef.on_rule_modify(t)},on_rule_destroy:function(t){this.$refs.UserListRef.on_rule_destroy(t)}}},Ea=$a,Ra=(a("4844"),Object(r["a"])(Ea,Ge,Ve,!1,null,"328a41fc",null)),Na=Ra.exports,za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Top"),a("div",{staticClass:"container",staticStyle:{display:"flex"}},[a("Menu",{attrs:{index:t.menuIndex}}),a("el-main",[a("el-tabs",[a("el-tab-pane",{attrs:{label:"实例管理"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("Search",{ref:"SearchRef",on:{on_search:t.on_search_callback}}),a("el-button",{attrs:{icon:"el-icon-plus",plain:"",type:"primary",size:"small"},on:{click:t.on_create_instance_click}},[t._v("创建实例")]),t._v("  "),a("el-button",{attrs:{loading:t.batch_start_loading,disabled:!t.select_instance.length,plain:"",size:"small",type:"primary"},on:{click:t.on_batch_start_click}},[t._v("批量启动")]),t._v("  "),a("el-button",{attrs:{disabled:!t.select_instance.length,plain:"",size:"small",type:"primary"},on:{click:t.on_batch_reboot_click}},[t._v("批量重启")]),t._v("  "),a("el-button",{attrs:{disabled:!t.select_instance.length,plain:"",size:"small",type:"danger"},on:{click:t.on_batch_stop_click}},[t._v("批量停止")]),t._v("  ")],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"padding-top":"5px","padding-bottom":"5px"}},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{input:t.on_filter_key_change},model:{value:t.filter.key,callback:function(e){t.$set(t.filter,"key",e)},expression:"filter.key"}})],1)])],1),a("el-divider"),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.table_instance,"expand-row-keys":t.expand_instance,"row-key":t.get_instance_id},on:{"selection-change":t.on_instance_selection_change}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),a("el-table-column",{attrs:{label:"集群",prop:"clusterId"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.get_cluster_name_by_id(e.row.clusterId)))])]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),a("el-table-column",{attrs:{label:"备注",prop:"description"}}),a("el-table-column",{attrs:{label:"IP",prop:"ip"}}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.type))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_instance_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{placement:"bottom",size:"small",trigger:"click",disabled:!0},on:{command:t.on_instance_dropdown_select}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{icon:"el-icon-more",plain:"",size:"mini",type:"primary"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown","instance-id":e.row.id},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:t.bind_instance_dropdown("detail",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-form"}),t._v(" 实例详情 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("attach-cd",e.row),disabled:!("Guest"===e.row.type&&!e.row.iso)}},[a("i",{staticClass:"layui-icon layui-icon-link"}),t._v(" 挂载光盘 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("detach-cd",e.row),disabled:!("Guest"===e.row.type&&e.row.iso)}},[a("i",{staticClass:"layui-icon layui-icon-unlink"}),t._v(" 卸载光盘 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("vnc",e.row),disabled:"Running"!==e.row.status}},[a("i",{staticClass:"layui-icon layui-icon-layer"}),t._v(" 远程桌面 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("modify",e.row),disabled:!("Guest"===e.row.type&&"Running"!==e.row.status)}},[a("i",{staticClass:"layui-icon layui-icon-set"}),t._v(" 修改实例 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("start",e.row),disabled:"Stopped"!==e.row.status}},[a("i",{staticClass:"layui-icon layui-icon-play"}),t._v(" 启动实例 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("reboot",e.row),disabled:"Running"!==e.row.status}},[a("i",{staticClass:"layui-icon layui-icon-refresh-3"}),t._v(" 重启实例 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status  !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("stop",e.row),disabled:!("Running"===e.row.status||"Starting"===e.row.status)}},[a("i",{staticClass:"layui-icon layui-icon-logout"}),t._v(" 停止实例 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("template",e.row),disabled:!("Stopped"===e.row.status&&"Guest"===e.row.type)}},[a("i",{staticClass:"layui-icon layui-icon-export"}),t._v(" 创建模版 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status&&"Guest"===e.row.type,expression:"scope.row.status !== 'Destroy'&&scope.row.type === 'Guest'"}],attrs:{command:t.bind_instance_dropdown("re-install",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-transfer"}),t._v(" 重装系统 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("metric",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-chart"}),t._v(" 指标监控 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("attach-network",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-website"}),t._v(" 附加网络 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"!==e.row.status,expression:"scope.row.status !== 'Destroy'"}],attrs:{command:t.bind_instance_dropdown("destroy",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-delete"}),t._v(" 销毁实例 ")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"Destroy"===e.row.status&&"Guest"===e.row.type,expression:"scope.row.status === 'Destroy'&& scope.row.type === 'Guest'"}],attrs:{command:t.bind_instance_dropdown("resume",e.row)}},[a("i",{staticClass:"layui-icon layui-icon-time"}),t._v(" 恢复实例 ")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.current_page,"page-size":t.page_size,"page-sizes":[10,20,50,100,200],total:t.total_size,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.page_size_change,"current-change":t.current_page_change}})],1)],1)],1)],1)],1),a("InstanceDetail",{ref:"InstanceDetailRef"}),a("AttachCdRoom",{ref:"AttachCdRoomRef",on:{on_modify:t.on_instance_modify}}),a("ModifyInstance",{ref:"ModifyInstanceRef",on:{on_modify:t.on_instance_modify}}),a("StartInstance",{ref:"StartInstanceRef",on:{on_modify:t.on_instance_modify}}),a("RebootInstance",{ref:"RebootInstanceRef",on:{on_modify:t.on_instance_modify}}),a("StopInstance",{ref:"StopInstanceRef",on:{on_modify:t.on_instance_modify}}),a("CreateTemplate",{ref:"CreateTemplateRef",on:{on_modify:t.on_instance_modify}}),a("ReInstall",{ref:"ReInstallRef",on:{on_modify:t.on_instance_modify}}),a("Metric",{ref:"MetricRef"}),a("AttachNetwork",{ref:"AttachNetworkRef",on:{on_modify:t.on_instance_modify}}),a("CreateInstance",{ref:"CreateInstanceRef",on:{on_create:t.on_instance_create}}),a("BatchRebootInstance",{ref:"BatchRebootInstanceRef",on:{on_modify:t.on_instance_modify}}),a("BatchStopInstance",{ref:"BatchStopInstanceRef",on:{on_modify:t.on_instance_modify}})],1)},Oa=[],Ta=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"群组"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.search.groupId,callback:function(e){t.$set(t.search,"groupId",e)},expression:"search.groupId"}},[a("el-option",{key:-1,attrs:{value:-1,label:"无限制"}}),a("el-option",{key:0,attrs:{value:0,label:"默认"}}),t._l(t.all_groups,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:t.on_select_cluster_change},model:{value:t.search.clusterId,callback:function(e){t.$set(t.search,"clusterId",e)},expression:"search.clusterId"}},[a("el-option",{key:0,attrs:{value:0,label:"无限制"}}),t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"运行主机"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.search.hostId,callback:function(e){t.$set(t.search,"hostId",e)},expression:"search.hostId"}},[a("el-option",{key:0,attrs:{value:0,label:"无限制"}}),t._l(t.select_host,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"实例类型"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{key:"",attrs:{value:"",label:"无限制"}}),a("el-option",{key:"Guest",attrs:{value:"Guest",label:"用户"}}),a("el-option",{key:"System",attrs:{value:"System",label:"系统"}})],1)],1),a("el-form-item",{attrs:{label:"实例状态"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("el-option",{key:"",attrs:{value:"",label:"无限制"}}),a("el-option",{key:"Starting",attrs:{value:"Starting",label:"Starting"}}),a("el-option",{key:"Creating",attrs:{value:"Creating",label:"Creating"}}),a("el-option",{key:"Running",attrs:{value:"Running",label:"Running"}}),a("el-option",{key:"Stopped",attrs:{value:"Stopped",label:"Stopped"}}),a("el-option",{key:"Destroy",attrs:{value:"Destroy",label:"Destroy"}}),a("el-option",{key:"Error",attrs:{value:"Error",label:"Error"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.on_search_volume_click}},[t._v("查询")])],1)],1)],1)}),Da=[],Aa={name:"Search.vue",data:function(){return{search:{clusterId:0,hostId:0,groupId:-1,type:"Guest",status:""},search_host_list:[]}},computed:{select_host:function(){return this.search_host_list.filter((function(t){return void 0===t.isShow||t.isShow}))}},methods:{init_data:function(t,e,a){this.all_groups=t,this.all_cluster=e,this.all_host=a,this.init_search_host()},init_search_host:function(){this.search_host_list=[];var t,e=!1,a=Object(_t["a"])(this.all_host);try{for(a.s();!(t=a.n()).done;){var i=t.value;0!==this.search.clusterId&&this.search.clusterId!==i.clusterId||this.search_host_list.push(Object(ft["a"])(Object(ft["a"])({},i),{},{isShow:!0})),(0===this.search.clusterId||i.id===this.search.storageId&&i.clusterId===this.search.clusterId)&&(e=!0)}}catch(o){a.e(o)}finally{a.f()}e||(this.search.hostId=0)},on_select_cluster_change:function(){this.init_search_host()},on_search_volume_click:function(){this.$emit("on_search",this.search)}}},ja=Aa,Ma=Object(r["a"])(ja,Ta,Da,!1,null,"20131e44",null),Pa=Ma.exports,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"620px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础信息",name:"first"}},[a("div",{staticClass:"details"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("实例编号")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.instance.id))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("实例名称")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.instance.name))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("实例备注")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.instance.description))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v(" 集群名称")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_cluster_name_by_id(t.instance.clusterId)))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v(" 计算方案")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_scheme_name_by_id(t.instance.calculationSchemeId)))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("所属群组")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_group_name_by_id(t.instance.groupId)))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("实例类型")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.instance.type))])],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("运行状态")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"content"},[a("el-tag",{attrs:{type:t.get_status_tag_type(t.instance.status),size:"mini"}},[t._v(t._s(t.instance.status))])],1)])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("运行主机")])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_host_name_by_id(t.instance.hostId)))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("附加光盘")])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_template_name_by_id(t.instance.iso)))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v(" 系统模版")])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"content"},[t._v(t._s(t.get_template_name_by_id(t.instance.templateId)))])])],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"title"},[t._v("创建时间")])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"content"},[t._v(t._s(t.parse_date(t.instance.createTime)))])])],1)],1)]),a("el-tab-pane",{attrs:{label:"磁盘信息",name:"second"}},[a("div",{staticClass:"container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.volume_loading,expression:"volume_loading"}],attrs:{size:"small",data:t.instance_volumes}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"60"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"130"}}),a("el-table-column",{attrs:{label:"类型",prop:"type",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(0===e.row.type?"ROOT":"DATA"))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.get_status_tag_type(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:"网络信息",name:"third"}},[a("div",{staticClass:"container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.network_loading,expression:"network_loading"}],ref:"filterTable",attrs:{size:"small",data:t.instance_network_interfaces}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"60"}}),a("el-table-column",{attrs:{label:"MAC",prop:"mac",width:"140"}}),a("el-table-column",{attrs:{label:"IP",prop:"ip",width:"120"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parse_date(e.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确认卸载当前网卡？",disabled:0===e.row.device},on:{confirm:function(a){return t.on_detach_network_interface_click(e.row)}}},[a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"danger",disabled:0===e.row.device},slot:"reference"},[t._v("卸载")])],1)]}}])})],1)],1)])],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)},La=[],Ba={name:"InstanceDetail",data:function(){return{id:0,instance:{},activeName:"first",title:"",instance_volumes:[],instance_network_interfaces:[],dialog_visible:!1,volume_loading:!1,network_loading:!1}},methods:{init_data:function(t,e,a,i,o,n){this.instance=t,this.id=t.id,this.title="".concat(t.description,"-详情"),this.all_cluster=e,this.all_groups=a,this.all_host=i,this.all_scheme=o,this.all_template=n,this.instance_volumes=[],this.instance_network_interfaces=[],this.volume_loading=!1,this.network_loading=!1,this.dialog_visible=!0,this.load_instance_volume(),this.load_network_interface()},get_status_tag_type:function(t){return"Ready"===t?"":"danger"},load_instance_volume:function(){var t=this;this.volume_loading=!0,this.axios_get("/management/volume/search?clusterId=0&vmId=".concat(this.id,"&storageId=0")).then((function(e){t.volume_loading=!1,0===e.data.code&&e.data.data&&(t.instance_volumes=e.data.data)}))},load_network_interface:function(){var t=this;this.network_loading=!0,this.axios_get("/management/network/vm?vmId=".concat(this.id)).then((function(e){t.network_loading=!1,0===e.data.code&&e.data.data&&(t.instance_network_interfaces=e.data.data)}))},on_detach_network_interface_click:function(t){var e=this;this.post_data("/management/vm/detach/network",{vmId:this.id,vmNetworkId:t.id}).then((function(a){if(0===a.data.code){var i=e.instance_network_interfaces.findIndex((function(e){return e.id===t.id}));e.$delete(e.instance_network_interfaces,i)}}))}}},Fa=Ba,Ga=(a("f0c8"),Object(r["a"])(Fa,Ua,La,!1,null,"b7afe4e8",null)),Va=Ga.exports,Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_scheme_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"光盘镜像"}},[a("el-select",{model:{value:t.modify.iso,callback:function(e){t.$set(t.modify,"iso",e)},expression:"modify.iso"}},t._l(t.all_template,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""===t.modify.iso},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Ka=[],Ya={name:"AttachCdRoom",data:function(){return{modify:{id:0,iso:""},title:"",dialog_visible:!1,loading:!1}},methods:{init_data:function(t,e){this.instance=t,this.title="".concat(t.description,"-挂载光驱"),this.all_template=e.filter((function(e){return e.clusterId===t.clusterId&&"ISO"===e.type})),this.all_template.length>0&&(this.modify.iso=this.all_template[0].id),t.iso>0&&(this.modify.iso=t.iso),this.modify.id=t.id,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/attach/cdroom",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},Qa=Ya,qa=Object(r["a"])(Qa,Ha,Ka,!1,null,"634199f1",null),Wa=qa.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.modify.description,callback:function(e){t.$set(t.modify,"description",e)},expression:"modify.description"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.modify.groupId,callback:function(e){t.$set(t.modify,"groupId",e)},expression:"modify.groupId"}},[a("el-option",{key:0,attrs:{value:0,label:"默认"}}),t._l(t.all_groups,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"计算方案"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.modify.calculationSchemeId,callback:function(e){t.$set(t.modify,"calculationSchemeId",e)},expression:"modify.calculationSchemeId"}},t._l(t.all_scheme,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Xa=[],Za={name:"ModifyInstance",data:function(){return{modify:{id:0,description:"",groupId:0,calculationSchemeId:0},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t,e,a){this.title="".concat(t.description,"-修改"),this.all_scheme=e,this.all_groups=a,this.dialog_visible=!0,this.loading=!1,this.modify.id=t.id,this.modify.description=t.description,this.modify.groupId=t.groupId,this.modify.calculationSchemeId=t.calculationSchemeId},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/modify",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},ti=Za,ei=Object(r["a"])(ti,Ja,Xa,!1,null,"573fb304",null),ai=ei.exports,ii=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"主机"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:t.modify.hostId,callback:function(e){t.$set(t.modify,"hostId",e)},expression:"modify.hostId"}},[a("el-option",{key:0,attrs:{value:0,label:"无限制"}}),t._l(t.all_host,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},oi=[],ni={name:"StartInstance",data:function(){return{modify:{id:0,hostId:0},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t,e){this.instance=t,this.title="".concat(t.description,"-启动实例"),this.all_host=e.filter((function(e){return e.clusterId===t.clusterId})),this.modify.id=t.id,this.modify.hostId=0,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/start",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},li=ni,si=Object(r["a"])(li,ii,oi,!1,null,"2c83d596",null),ri=si.exports,ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"30px"}},[a("el-form-item",[a("el-checkbox",{model:{value:t.modify.force,callback:function(e){t.$set(t.modify,"force",e)},expression:"modify.force"}},[t._v("强制重启")])],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},di=[],ui={name:"RebootInstance",data:function(){return{modify:{id:0,force:!1},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t){this.instance=t,this.title="".concat(t.description,"-重启"),this.modify.id=t.id,this.modify.force=!1,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/reboot",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},mi=ui,fi=Object(r["a"])(mi,ci,di,!1,null,"6dc227be",null),_i=fi.exports,pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"30px"}},[a("el-form-item",[a("el-checkbox",{model:{value:t.modify.force,callback:function(e){t.$set(t.modify,"force",e)},expression:"modify.force"}},[t._v("强制关机")])],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},hi=[],vi={name:"StopInstance",data:function(){return{modify:{id:0,force:!1},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t){this.instance=t,this.title="".concat(t.description,"-停止实例"),this.modify.id=t.id,this.modify.force=!1,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/stop",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},bi=vi,yi=Object(r["a"])(bi,pi,hi,!1,null,"bd997d8e",null),gi=yi.exports,wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"模版名称"}},[a("el-input",{model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},ki=[],xi={name:"CreateTemplate",data:function(){return{modify:{id:0,name:""},title:"",dialog_visible:!1}},methods:{init_data:function(t){this.title="".concat(t.description,"-创建模版"),this.dialog_visible=!0,this.modify.id=t.id,this.modify.description=t.description},ok:function(){var t=this,e=this.$loading({lock:!0,text:"正在创建模版，该过程需要一段时间，请耐心等待....",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.dialog_visible=!1,this.post_data("/management/vm/template",this.modify).then((function(a){e.close(),0===a.data.code?(t.$emit("on_modify",a.data.data),t.dialog_visible=!1):t.dialog_visible=!0}))}}},Ii=xi,Si=Object(r["a"])(Ii,wi,ki,!1,null,"77b4f6bb",null),Ci=Si.exports,$i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"系统模版"}},[a("el-select",{model:{value:t.modify.templateId,callback:function(e){t.$set(t.modify,"templateId",e)},expression:"modify.templateId"}},t._l(t.all_template,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""===t.modify.iso},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Ei=[],Ri={name:"ReInstall",data:function(){return{modify:{id:0,templateId:""},title:"",dialog_visible:!1,loading:!1}},methods:{init_data:function(t,e){this.instance=t,this.title="".concat(t.description,"-重装系统"),this.all_template=e.filter((function(e){return e.clusterId===t.clusterId&&("ISO"===e.type||"Disk"===e.type)})),this.all_template.length>0&&(this.modify.templateId=this.all_template[0].id),t.templateId>0&&(this.modify.templateId=t.templateId),this.modify.id=t.id,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/reinstall",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},Ni=Ri,zi=Object(r["a"])(Ni,$i,Ei,!1,null,"86080028",null),Oi=zi.exports,Ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:t.title,visible:t.dialog_visible,center:"",width:"600px"},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"网络",name:"first"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{id:"network"}})])]),a("el-tab-pane",{attrs:{label:"磁盘",name:"second"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{id:"disk"}})])]),a("el-tab-pane",{attrs:{label:"CPU",name:"third"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{id:"cpu"}})])])],1)],1)},Di=[],Ai=a("313e"),ji={name:"Metric",data:function(){return{id:0,activeName:"first",title:"",dialog_visible:!1,loading:!1}},methods:{init_data:function(t){this.id=t.id,this.title="".concat(t.description,"-运行状态"),this.dialog_visible=!0,this.load()},load:function(){var t=this;this.loading=!0,this.axios_get("/management/vm/statistics?vmId=".concat(this.id)).then((function(e){if(t.loading=!1,0===e.data.code&&e.data.data){var a={in:[],out:[]},i={in:[],out:[]},o=[];for(var n in e.data.data){var l=e.data.data[n],s=t.parse_date(l.time);a.in.push([s,(l.receive/1024).toFixed(2)]),a.out.push([s,(l.send/1024).toFixed(2)]),i.in.push([s,(l.read/1024).toFixed(2)]),i.out.push([s,(l.write/1024).toFixed(2)]),o.push([s,l.cpu])}console.log(a);var r=Ai["a"](document.getElementById("disk")),c=Ai["a"](document.getElementById("network")),d=Ai["a"](document.getElementById("cpu"));r.setOption(t.render_double_chat(i,"disk")),c.setOption(t.render_double_chat(a,"network")),d.setOption(t.render_one_chat(o,"Cpu使用率"))}}))},render_one_chat:function(t){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},backgroundColor:"#fff",padding:10,textStyle:{fontSize:12,color:"#152934",lineHeight:24}},xAxis:{type:"time",boundaryGap:!1},yAxis:{type:"value",boundaryGap:[0,"100%"]},series:[{name:"Cpu使用率",type:"line",symbol:"none",markPoint:{label:{normal:{show:!0,backgroundColor:"#fff",position:"top",color:"#5AAAFA",borderColor:"rgba(90,170,250,0.3)",borderWidth:1,padding:8}},symbol:"circle",itemStyle:{normal:{borderColor:"rgba(90,170,250,0.3)",borderWidth:15}},symbolSize:7,data:[{type:"max",name:"Max"}]},lineStyle:{normal:{color:"#5AAAFA",width:1}},areaStyle:{normal:{color:"#5AAAFA",opacity:.5}},connectNulls:!1,data:t}]}},render_double_chat:function(t,e){var a="KBps",i="disk"===e?["读速率","写速率"]:["上行速率","下行速率"];return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},backgroundColor:"#fff",padding:10,textStyle:{fontSize:12,color:"#152934",lineHeight:24},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3); border-radius: 0;",formatter:function(t){var e="".concat(t[0].data[0]," <br/>");return t.map((function(t){e+="".concat(t.seriesName," : ").concat(isNaN(t.value[1])?"-":t.value[1]," ").concat(a,"</br>")})),e}},yAxis:[{splitLine:{show:!0,lineStyle:{type:"dotted",color:"rgba(155, 155, 155, 0.5)"}},axisLine:{show:!1},axisLabel:{color:"#5A6872",fontSize:11},axisTick:{show:!1},type:"value"}],xAxis:[{type:"time",splitLine:{show:!1},axisLine:{lineStyle:{width:0}},axisLabel:{color:"#5A6872",fontSize:11},axisTick:{show:!1},boundaryGap:!1,data:t.in.map((function(t){return t[0]}))}],legend:{data:i},color:["#41D6C3","#5AAAFA"],series:[{name:"disk"===e?"读速率":"上行速率",type:"line",symbol:"none",markPoint:{label:{normal:{show:!0,backgroundColor:"#fff",position:"top",color:"#41D6C3",borderColor:"rgba(65,214,195,0.3)",borderWidth:1,padding:8,formatter:"{b}: {c} ".concat(a)}},symbol:"circle",itemStyle:{normal:{borderColor:"rgba(65,214,195,0.3)",borderWidth:15}},symbolSize:7,data:[{type:"max",name:"Max"}]},lineStyle:{normal:{color:"#41D6C3",width:1}},areaStyle:{normal:{color:"#41D6C3",opacity:.5}},data:t["out"]},{name:"disk"===e?"写速率":"下行速率",type:"line",symbol:"none",markPoint:{label:{normal:{show:!0,backgroundColor:"#fff",position:"top",color:"#5AAAFA",borderColor:"rgba(90,170,250,0.3)",borderWidth:1,padding:8,formatter:"{b}: {c} ".concat(a)}},symbol:"circle",itemStyle:{normal:{borderColor:"rgba(90,170,250,0.3)",borderWidth:15}},symbolSize:7,data:[{type:"max",name:"Max"}]},lineStyle:{normal:{color:"#5AAAFA",width:1}},areaStyle:{normal:{color:"#5AAAFA",opacity:.5}},connectNulls:!1,data:t["in"]}]}}}},Mi=ji,Pi=Object(r["a"])(Mi,Ti,Di,!1,null,"47e74aea",null),Ui=Pi.exports,Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{ref:"create_scheme_service_ref",attrs:{model:t.modify,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择网络"}},[a("el-select",{model:{value:t.modify.networkId,callback:function(e){t.$set(t.modify,"networkId",e)},expression:"modify.networkId"}},t._l(t.all_network,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""===t.modify.iso},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Bi=[],Fi={name:"AttachNetwork",data:function(){return{modify:{vmId:0,networkId:""},title:"",dialog_visible:!1,loading:!1}},methods:{init_data:function(t,e){this.instance=t,this.title="".concat(t.description,"-附加网卡"),console.log(e),this.all_network=e.filter((function(e){return e.clusterId===t.clusterId})),this.all_network.length>0&&(this.modify.networkId=this.all_network[0].id),this.modify.vmId=t.id,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/attach/network",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_modify",e.data.data),t.dialog_visible=!1)})),this.dialog_visible=!0}}},Gi=Fi,Vi=Object(r["a"])(Gi,Li,Bi,!1,null,"74f704ee",null),Hi=Vi.exports,Ki=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-container",[a("el-header",[a("el-steps",{attrs:{active:t.active,"finish-status":"success",simple:!1,"align-center":!0}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"系统镜像"}}),a("el-step",{attrs:{title:"网络与存储"}}),a("el-step",{attrs:{title:"完成"}})],1)],1),a("el-divider"),a("el-main",[a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active===0"}],attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.modify.name,callback:function(e){t.$set(t.modify,"name",e)},expression:"modify.name"}})],1),a("el-form-item",{attrs:{label:"集群"}},[a("el-select",{on:{change:t.on_select_change},model:{value:t.modify.clusterId,callback:function(e){t.$set(t.modify,"clusterId",e)},expression:"modify.clusterId"}},t._l(t.all_cluster,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"系统类型"}},[a("el-select",{on:{change:t.on_select_change},model:{value:t.modify.templateType,callback:function(e){t.$set(t.modify,"templateType",e)},expression:"modify.templateType"}},[a("el-option",{key:"ISO",attrs:{label:"ISO镜像",value:"ISO"}}),a("el-option",{key:"Disk",attrs:{label:"系统模版",value:"Disk"}})],1)],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active===1"}],attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"选择系统"}},[a("el-select",{model:{value:t.modify.templateId,callback:function(e){t.$set(t.modify,"templateId",e)},expression:"modify.templateId"}},t._l(t.select_template,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active===2"}],attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"系统网络"}},[a("el-select",{model:{value:t.modify.networkId,callback:function(e){t.$set(t.modify,"networkId",e)},expression:"modify.networkId"}},t._l(t.select_network,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"存储池"}},[a("el-select",{model:{value:t.modify.storageId,callback:function(e){t.$set(t.modify,"storageId",e)},expression:"modify.storageId"}},[a("el-option",{key:0,attrs:{label:"不限制",value:0}}),t._l(t.select_storage,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"磁盘大小",prop:"size"}},[a("el-input-number",{attrs:{max:1e4,min:10},model:{value:t.modify.size,callback:function(e){t.$set(t.modify,"size",e)},expression:"modify.size"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:3===t.active,expression:"active===3"}],attrs:{model:t.modify,"label-position":"right","label-width":"90px"}},[a("el-form-item",{attrs:{label:"分组"}},[a("el-select",{model:{value:t.modify.groupId,callback:function(e){t.$set(t.modify,"groupId",e)},expression:"modify.groupId"}},[a("el-option",{key:0,attrs:{label:"默认",value:0}}),t._l(t.all_groups,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"计算方案"}},[a("el-select",{model:{value:t.modify.calculationSchemeId,callback:function(e){t.$set(t.modify,"calculationSchemeId",e)},expression:"modify.calculationSchemeId"}},t._l(t.all_scheme,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.active>0,expression:"active>0"}],attrs:{type:"primary"},on:{click:t.prev}},[t._v("上一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active===0"}],attrs:{type:"primary",disabled:""===t.modify.name||""===t.modify.clusterId},on:{click:t.next}},[t._v("下一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active===1"}],attrs:{type:"primary",disabled:""===t.modify.templateId||""===t.modify.size},on:{click:t.next}},[t._v("下一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active===2"}],attrs:{type:"primary",disabled:""===t.modify.networkId},on:{click:t.next}},[t._v("下一步")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===t.active,expression:"active===3"}],attrs:{loading:t.loading,type:"primary"},on:{click:t.create_instance}},[t._v("完成")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)},Yi=[],Qi={name:"CreateInstance",data:function(){return{modify:{name:"",groupId:0,clusterId:"",templateType:"",templateId:"",networkId:"",storageId:"",calculationSchemeId:0,size:100},active:0,title:"",loading:!1,dialog_visible:!1}},computed:{select_template:function(){return this.all_template.filter((function(t){return void 0===t.isShow||t.isShow}))},select_network:function(){return this.all_network.filter((function(t){return void 0===t.isShow||t.isShow}))},select_storage:function(){return this.all_storage.filter((function(t){return void 0===t.isShow||t.isShow}))}},methods:{init_data:function(t,e,a,i,o,n){this.title="创建实例",this.all_cluster=t.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0})})),this.all_groups=e.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0})})),this.all_scheme=a.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0})})),this.all_template=i.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!1})})),this.all_storage=o.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!1})})),this.all_network=n.map((function(t){return Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!1})})),this.active=0,this.modify.name="",this.modify.clusterId="",this.modify.templateId="",this.modify.networkId="",this.modify.groupId=0,this.modify.storageId=0,this.modify.calculationSchemeId=0,this.modify.size=100,this.modify.templateType="ISO",this.loading=!1,this.dialog_visible=!0},next:function(){this.active++},prev:function(){this.active--},on_select_change:function(){var t=this;this.all_template.forEach((function(e,a){e.clusterId!=t.modify.clusterId?e.isShow=!1:e.type===t.modify.templateType?e.isShow=!0:e.isShow=!1,t.$set(t.all_template,e,a)})),this.all_network.forEach((function(e,a){e.clusterId!=t.modify.clusterId?e.isShow=!1:e.isShow=!0,console.log(e),t.$set(t.all_network,e,a)})),this.all_storage.forEach((function(e,a){e.clusterId!=t.modify.clusterId?e.isShow=!1:e.isShow=!0,t.$set(t.all_storage,e,a)}))},create_instance:function(){var t=this;this.loading=!0,this.post_data("/management/vm/create",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(t.$emit("on_create",e.data.data),t.dialog_visible=!1)}))}}},qi=Qi,Wi=Object(r["a"])(qi,Ki,Yi,!1,null,"4f59a47c",null),Ji=Wi.exports,Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"30px"}},[a("el-form-item",[a("el-checkbox",{model:{value:t.modify.force,callback:function(e){t.$set(t.modify,"force",e)},expression:"modify.force"}},[t._v("强制重启")])],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},Zi=[],to=a("5c96"),eo=a.n(to),ao={name:"BatchRebootInstance",data:function(){return{modify:{ids:"",force:!1},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t){this.title="批量重启",this.modify.ids=t.map((function(t){return t.id})),this.all_instance=t,this.modify.force=!1,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/batch/reboot",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(e.data.data.forEach((function(e,a){if(0===e.code)t.$emit("on_modify",e.data);else{var i=t.modify.ids[a],o=t.all_instance.find((function(t){return t.id===i}));o&&to["Notification"].error({title:"错误",duration:5e3,message:"[".concat(o.description,"]重启失败:").concat(e.message)})}})),t.dialog_visible=!1)})),this.dialog_visible=!0}}},io=ao,oo=Object(r["a"])(io,Xi,Zi,!1,null,"feef2cd2",null),no=oo.exports,lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialog_visible,center:"",width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialog_visible=e}}},[a("el-form",{attrs:{model:t.modify,"label-position":"right","label-width":"30px"}},[a("el-form-item",[a("el-checkbox",{model:{value:t.modify.force,callback:function(e){t.$set(t.modify,"force",e)},expression:"modify.force"}},[t._v("强制关机")])],1),a("el-form-item",[a("el-button",{attrs:{loading:t.loading,type:"primary",disabled:""==t.modify.name},on:{click:t.ok}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialog_visible=!1}}},[t._v("取 消")])],1)],1)],1)},so=[],ro={name:"BatchStopInstance",data:function(){return{modify:{ids:"",force:!1},title:"",loading:!1,dialog_visible:!1}},methods:{init_data:function(t){this.title="批量停止实例",this.modify.ids=t.map((function(t){return t.id})),this.all_instance=t,this.modify.force=!1,this.dialog_visible=!0,this.loading=!1},ok:function(){var t=this;this.loading=!0,this.post_data("/management/vm/batch/stop",this.modify).then((function(e){t.loading=!1,0===e.data.code&&(e.data.data.forEach((function(e,a){if(0===e.code)t.$emit("on_modify",e.data);else{var i=t.modify.ids[a],o=t.all_instance.find((function(t){return t.id===i}));o&&to["Notification"].error({title:"错误",duration:5e3,message:"[".concat(o.description,"]停止失败:").concat(e.message)})}})),t.dialog_visible=!1)})),this.dialog_visible=!0}}},co=ro,uo=Object(r["a"])(co,lo,so,!1,null,"5c8d93c0",null),mo=uo.exports,fo={name:"Instance.vue",components:{Top:I,Menu:N,Search:Pa,InstanceDetail:Va,AttachCdRoom:Wa,ModifyInstance:ai,StartInstance:ri,RebootInstance:_i,StopInstance:gi,CreateTemplate:Ci,ReInstall:Oi,Metric:Ui,AttachNetwork:Hi,CreateInstance:Ji,BatchRebootInstance:no,BatchStopInstance:mo},data:function(){return{filter:{key:""},menuIndex:"1",current_page:1,page_size:10,total_size:0,expand_instance:[],select_instance:[],loading:!0,batch_start_loading:!1}},mounted:function(){var t=this;this.load_cluster().then((function(){return t.load_host().then((function(){return t.load_groups().then((function(){return t.load_template().then((function(){return t.load_scheme().then((function(){return t.load_network().then((function(){return t.load_storage().then((function(){t.$refs.SearchRef.init_data(t.all_groups,t.all_cluster,t.all_host),t.on_search_callback()}))}))}))}))}))}))}))},computed:{table_instance:function(){return this.all_instance.filter((function(t){return void 0===t.isShow||t.isShow}))}},methods:{get_instance_id:function(t){return t.id},on_create_instance_click:function(){this.$refs.CreateInstanceRef.init_data(this.all_cluster,this.all_groups,this.all_scheme,this.all_template,this.all_storage,this.all_network)},on_batch_start_click:function(){var t=this,e={ids:this.select_instance.map((function(t){return t.id})),hostId:0};this.batch_start_loading=!0,this.post_data("/management/vm/batch/start",e).then((function(e){t.batch_start_loading=!1,0===e.data.code&&e.data.data.forEach((function(e,a){if(0===e.code)t.on_instance_modify(e.data);else{var i=t.modify.ids[a],o=t.all_instance.find((function(t){return t.id===i}));o&&to["Notification"].error({title:"错误",duration:5e3,message:"[".concat(o.description,"]启动失败:").concat(e.message)})}}))}))},on_batch_reboot_click:function(){this.$refs.BatchRebootInstanceRef.init_data(this.select_instance)},on_batch_stop_click:function(){this.$refs.BatchStopInstanceRef.init_data(this.select_instance)},on_search_callback:function(t){var e=this;t||(t=this.$refs.SearchRef.search),this.current_page=1,this.load_cluster().then((function(){return e.load_host().then((function(){return e.load_groups().then((function(){return e.load_template().then((function(){return e.load_scheme().then((function(){return e.load_network().then((function(){e.search_instance(t)}))}))}))}))}))}))},search_instance:function(t){var e=this;return this.all_instance=[],this.expand_instance=[],this.loading=!0,this.axios_get("/management/vm/search?clusterId=".concat(t.clusterId,"&groupId=").concat(t.groupId,"&hostId=").concat(t.hostId,"&type=").concat(t.type,"&status=").concat(t.status)).then((function(t){0===t.data.code&&t.data.data&&(e.all_instance=t.data.data,e.on_filter_key_change(),e.loading=!1)}))},get_instance_status_tag_type:function(t){return"Running"===t?"":"danger"},current_page_change:function(t){this.current_page=t,this.on_filter_key_change()},page_size_change:function(t){this.page_size=t,this.on_filter_key_change()},on_filter_key_change:function(){var t=this,e=this.filter.key.trim().toLowerCase(),a=0;this.all_instance.forEach((function(i,o){if(""===e)i.isShow=!0;else{var n=t.get_cluster_name_by_id(i.clusterId).toLowerCase();i.isShow=n.indexOf(e)>=0||i.name.toLowerCase().indexOf(e)>=0||i.ip.indexOf(e)>=0||i.description.toLowerCase().indexOf(e)>=0}i.isShow&&a++,(a<=t.page_size*(t.current_page-1)||a>t.page_size*t.current_page)&&(i.isShow=!1),t.$set(t.all_instance,o,i)})),this.total_size=a},on_instance_selection_change:function(t){this.select_instance=t},bind_instance_dropdown:function(t,e){return{command:t,instance:e}},on_instance_modify:function(t){var e=this.all_instance.findIndex((function(e){return e.id===t.id}));this.$set(this.all_instance,e,Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0}))},on_instance_create:function(t){this.all_instance.push(Object(ft["a"])(Object(ft["a"])({},t),{},{isShow:!0}))},on_instance_dropdown_select:function(t){var e=this;if("detail"===t.command)this.$refs.InstanceDetailRef.init_data(t.instance,this.all_cluster,this.all_groups,this.all_host,this.all_scheme,this.all_template);else if("attach-cd"===t.command)this.$refs.AttachCdRoomRef.init_data(t.instance,this.all_template);else if("detach-cd"===t.command)this.post_data("/management/vm/detach/cdroom",{id:t.instance.id}).then((function(t){0===t.data.code&&e.on_instance_modify(t.data.data)}));else if("vnc"===t.command){var a=this.$router.resolve({path:"/Vnc",query:{id:t.instance.id,description:t.instance.description}}),i=a.href;window.open(i,"_blank")}else"modify"===t.command?this.$refs.ModifyInstanceRef.init_data(t.instance,this.all_scheme,this.all_groups):"start"===t.command?this.$refs.StartInstanceRef.init_data(t.instance,this.all_host):"reboot"===t.command?this.$refs.RebootInstanceRef.init_data(t.instance):"stop"===t.command?this.$refs.StopInstanceRef.init_data(t.instance):"template"===t.command?this.$refs.CreateTemplateRef.init_data(t.instance,this.all_template):"re-install"===t.command?this.$refs.ReInstallRef.init_data(t.instance,this.all_template):"metric"===t.command?this.$refs.MetricRef.init_data(t.instance):"attach-network"===t.command?this.$refs.AttachNetworkRef.init_data(t.instance,this.all_network):"destroy"===t.command?this.$confirm("确认销毁".concat(t.instance.description,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",distinguishCancelAndClose:!0}).then((function(){e.post_data("/management/vm/destroy",{id:t.instance.id}).then((function(a){if(0===a.data.code)if(a.data.data)e.on_instance_modify(a.data.data);else{var i=e.all_instance.findIndex((function(e){return e.id===t.instance.id}));e.$delete(e.all_instance,i)}else if(1000001===a.data.code){var o=e.all_instance.findIndex((function(e){return e.id===t.instance.id}));e.$delete(e.all_instance,o)}}))})):"resume"===t.command&&this.post_data("/management/vm/resume",{id:t.instance.id}).then((function(t){0===t.data.code&&e.on_instance_modify(t.data.data)}))}}},_o=fo,po=(a("6270"),Object(r["a"])(_o,za,Oa,!1,null,"789b6174",null)),ho=po.exports,vo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{attrs:{id:"top_bar"}},[a("div",{attrs:{id:"status"}},[t._v(t._s(t.status))]),a("div",{attrs:{id:"sendCtrlAltDelButton"},on:{onclick:t.on_send_ctrl_alt_del}},[t._v("发送 Ctrl+Alt+Del")])]),a("div",{attrs:{id:"screen"}})])},bo=[],yo=a("eeac"),go={name:"Vnc",data:function(){return{id:0,description:"",rfb:null,url:"",status:"连接中..."}},mounted:function(){var t;this.id=this.$route.query.id,this.description=this.$route.query.description,t="https:"===window.location.protocol?"wss":"ws",this.status="正在连接[".concat(this.description,"]..."),this.url="".concat(t,"://").concat(window.location.host,"/vnc/connect/").concat(this.id),this.connect()},methods:{connect:function(){var t=this;this.axios_get("/management/vm/vnc?id=".concat(this.id)).then((function(e){0===e.data.code&&e.data.data&&(t.rfb=new yo["a"](document.getElementById("screen"),t.url,{credentials:{password:e.data.data.password}}),t.rfb.addEventListener("connect",t.on_connect_success),t.rfb.addEventListener("disconnect",t.on_disconnect),t.rfb.addEventListener("credentialsrequired",t.on_required_password),t.rfb.scaleViewport=!1,t.rfb.resizeSession=!1)}))},on_connect_success:function(){this.status="连接成功[".concat(this.description,"]")},on_disconnect:function(t){this.status="远程连接已断开[".concat(this.description,"]"),t.detail.clean&&(this.status="正在重新连接[".concat(this.description,"]..."),this.connect())},on_required_password:function(){var t=this;this.axios_get("/management/vm/vnc?id=".concat(this.id)).then((function(e){0===e.data.code&&e.data.data&&t.rfb.sendCredentials({password:e.data.data.password})}))},on_send_ctrl_alt_del:function(){this.rfb.sendCtrlAltDel()}}},wo=go,ko=(a("05b1"),Object(r["a"])(wo,vo,bo,!1,null,"c6bd5ae2",null)),xo=ko.exports,Io=a("8c4f"),So=Io["a"].prototype.push;Io["a"].prototype.push=function(t){return So.call(this,t).catch((function(t){return new Error(t)}))},i["default"].use(Io["a"]);var Co=[{path:"/login",component:d},{path:"/Group",component:L},{path:"/Category",component:X},{path:"/Scheme",component:dt},{path:"/Storage",component:Qt},{path:"/Volume",component:jt},{path:"/Template",component:le},{path:"/Host",component:be},{path:"/Cluster",component:Ne},{path:"/Network",component:Fe},{path:"/User",component:Na},{path:"/Instance",component:ho},{path:"/Vnc",component:xo},{path:"/",component:ho}],$o=new Io["a"]({routes:Co}),Eo=$o,Ro=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")}),No=[],zo={name:"App"},Oo=zo,To=(a("034f"),Object(r["a"])(Oo,Ro,No,!1,null,null,null)),Do=To.exports,Ao=(a("d3b7"),a("a9e3"),a("5319"),a("4d63"),a("25f0"),a("bc3a")),jo=a.n(Ao);jo.a.interceptors.request.use((function(t){return t.headers=Object(ft["a"])(Object(ft["a"])({},t.headers),{},{"X-CLOUD-TOKEN":localStorage.getItem("X-CLOUD-TOKEN")}),t}),(function(t){return Promise.reject(t)})),jo.a.interceptors.response.use((function(t){return 200===t.status&&(401===t.data.code?Eo.push({path:"/login"}):0!=t.data.code&&1000001!=t.data.code&&to["Notification"].error({title:"错误",duration:3e3,message:"请求出错[".concat(t.data.code,"]:").concat(t.data.message)})),t}),(function(t){return to["Notification"].error({title:"错误",duration:3e3,message:"请求出现未知错误"}),Promise.reject(t)})),i["default"].mixin({created:function(){jo.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"},data:function(){return{base_api_uri:".",base_image_uri:""}},methods:{axios_get:function(t){return jo.a.get("".concat(this.base_api_uri).concat(t))},post_data:function(t,e){return jo()({url:"".concat(this.base_api_uri).concat(t),method:"POST",data:e,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},setToken:function(t){localStorage.setItem("X-CLOUD-TOKEN",t)},getToken:function(){return localStorage.getItem("X-CLOUD-TOKEN")},parse_date:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!t)return"";t=new Date(Number(t));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e},parse_memory_capacity:function(t){return t>=1048576?(t/1024/1024).toFixed(0)+"GB":t>=1024?(t/1024).toFixed(0)+"MB":t+"KBytes"},parse_disk_capacity:function(t){return t>1099511627776?(t/1024/1024/1024/1024).toFixed(2)+"TB":t>1073741824?(t/1024/1024/1024).toFixed(2)+"GB":t>1048576?(t/1024/1024).toFixed(2)+"MB":t>1024?(t/1024).toFixed(2)+"KB":t+"B"}}}),i["default"].mixin({data:function(){return{all_groups:[],all_category:[],all_scheme:[],all_volume:[],all_instance:[],all_storage:[],all_cluster:[],all_network:[],all_template:[],all_host:[],all_users:[],all_rules:[],all_permission:[],all_permission_category:[]}},methods:{load_groups:function(){var t=this;return this.axios_get("/management/group").then((function(e){0===e.data.code&&e.data.data&&(t.all_groups=e.data.data)}))},load_category:function(){var t=this;return this.axios_get("/management/os/category").then((function(e){0===e.data.code&&e.data.data&&(t.all_category=e.data.data)}))},load_scheme:function(){var t=this;return this.axios_get("/management/calculation/scheme").then((function(e){0===e.data.code&&e.data.data&&(t.all_scheme=e.data.data)}))},load_volume:function(){var t=this;return this.axios_get("/management/volume").then((function(e){0===e.data.code&&e.data.data&&(t.all_volume=e.data.data)}))},load_instance:function(){var t=this;return this.axios_get("/management/vm").then((function(e){0===e.data.code&&e.data.data&&(t.all_instance=e.data.data)}))},load_storage:function(){var t=this;return this.axios_get("/management/storage").then((function(e){0===e.data.code&&e.data.data&&(t.all_storage=e.data.data)}))},load_cluster:function(){var t=this;return this.axios_get("/management/cluster").then((function(e){0===e.data.code&&e.data.data&&(t.all_cluster=e.data.data)}))},load_network:function(){var t=this;return this.axios_get("/management/network").then((function(e){0===e.data.code&&e.data.data&&(t.all_network=e.data.data)}))},load_template:function(){var t=this;return this.axios_get("/management/template").then((function(e){0===e.data.code&&e.data.data&&(t.all_template=e.data.data)}))},load_host:function(){var t=this;return this.axios_get("/management/host").then((function(e){0===e.data.code&&e.data.data&&(t.all_host=e.data.data)}))},load_users:function(){var t=this;return this.axios_get("/management/user/list").then((function(e){0===e.data.code&&e.data.data&&(t.all_users=e.data.data)}))},load_rules:function(){var t=this;return this.axios_get("/management/rules").then((function(e){0===e.data.code&&e.data.data&&(t.all_rules=e.data.data)}))},load_permission:function(){var t=this;return this.axios_get("/management/rules/permission").then((function(e){0===e.data.code&&e.data.data&&(t.all_permission=e.data.data)}))},load_permission_category:function(){var t=this;return this.axios_get("/management/rules/category").then((function(e){0===e.data.code&&e.data.data&&(t.all_permission_category=e.data.data)}))},get_host_name_by_id:function(t){var e=this.all_host;for(var a in e)if(e[a].id===t)return e[a].name;return"--"},get_category_name_by_id:function(t){var e=this.all_category;for(var a in e)if(e[a].id===t)return e[a].categoryName;return"--"},get_cluster_name_by_id:function(t){var e=this.all_cluster;for(var a in e)if(e[a].id===t)return e[a].name;return"--"},get_group_name_by_id:function(t){var e=this.all_groups;for(var a in e)if(e[a].id===t)return e[a].name;return"默认"},get_storage_name_by_id:function(t){var e=this.all_storage;for(var a in e)if(e[a].id===t)return e[a].name;return"--"},get_volume_path:function(t){var e=this.all_storage;for(var a in e)if(e[a].id===t.storageId)return"/mnt/".concat(e[a].target,"/").concat(t.target);return"--"},get_template_name_by_id:function(t){var e=this.all_template;for(var a in e)if(e[a].id===t)return e[a].name;return"--"},get_scheme_name_by_id:function(t){var e=this.all_scheme;for(var a in e)if(e[a].id===t)return e[a].name;return"--"},get_instance_name_by_id:function(t){var e=this.all_instance;for(var a in e)if(e[a].id===t)return e[a].description;return"--"},get_rule_name_by_id:function(t){var e=this.all_rules;for(var a in e)if(e[a].id===t)return e[a].name;return"--"}}}),i["default"].use(eo.a),i["default"].config.productionTip=!1,new i["default"]({router:Eo,render:function(t){return t(Do)}}).$mount("#app")},"586b":function(t,e,a){},"5c09":function(t,e,a){},"5fc8":function(t,e,a){"use strict";a("2cd4")},6270:function(t,e,a){"use strict";a("177f")},"65c7":function(t,e,a){"use strict";a("2e75")},"734f":function(t,e,a){},"73e4":function(t,e,a){"use strict";a("ba48")},"7f92":function(t,e,a){},"81d7":function(t,e,a){},"85ec":function(t,e,a){},a0c6:function(t,e,a){},a7f3:function(t,e,a){"use strict";a("4c0e")},b64c:function(t,e,a){"use strict";a("a0c6")},ba48:function(t,e,a){},d090:function(t,e,a){},d1cf:function(t,e,a){"use strict";a("7f92")},d1e1:function(t,e,a){},d888:function(t,e,a){"use strict";a("dee5")},d8dc:function(t,e,a){"use strict";a("586b")},dee5:function(t,e,a){},f0c8:function(t,e,a){"use strict";a("3bef")},f525:function(t,e,a){"use strict";a("81d7")},fb17:function(t,e,a){"use strict";a("526b")},fc8b:function(t,e,a){"use strict";a("734f")},feaf:function(t,e,a){"use strict";a("d1e1")}});
//# sourceMappingURL=app.09bfe7f6.js.map