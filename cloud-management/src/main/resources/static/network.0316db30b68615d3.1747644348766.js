"use strict";(self["webpackChunkkvm_cloud_web"]=self["webpackChunkkvm_cloud_web"]||[]).push([[815],{15:function(e,t,l){l.r(t),l.d(t,{default:function(){return x}});var a=l(6845),n=(l(4974),l(8206),l(9464)),o=(l(2708),l(6390)),r=(l(8145),l(7477)),i=(l(6788),l(1177),l(3979)),c=(l(2403),l(9136)),d=(l(2890),l(2666),l(5143)),u=(l(493),l(7836)),b=(l(3020),l(9622),l(7255)),s=(l(756),l(5567),l(6918)),p=l(1654),m=l(4673),k=l(3097),f=l(2303),v=l(6555),g=l(7898),w=(l(7191),l(6622)),_=(l(4005),l(7233),l(5286),l(1210),l(1421)),y=l(7445),R=l(8180);l(6447);const j={class:"dialog-footer"};var h={__name:"EditNetworkDialog",emits:["on-create-network"],setup(e,{expose:t,emit:l}){const a=l,{t:n}=(0,y.s9)(),o=(0,p.Kh)({name:"",startIp:"",endIp:"",gateway:"",mask:"",subnet:"",broadcast:"",bridge:"",bridgeType:0,dns:"",domain:"cj.kvm.internal",type:0,status:2,vlanId:0,vlanGatewayType:0,basicNetworkId:void 0}),r=(0,p.KR)(null),i=(0,p.KR)(!1);function c(e,t,l,a,o){if(!t)return void l(new Error(n("cj.tooltip.global.ip_verify_error",{name:a,sample:o})));const r=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/;r.test(t)?l():l(new Error(n("cj.tooltip.global.ip_verify_error",{name:a,sample:o})))}const f=(0,p.Kh)({name:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.basic.name")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.name")}),trigger:["blur","change"]}],bridgeType:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.network.bridgeType")}),trigger:["blur","change"]}],vlanGatewayType:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.network.vlanGatewayType")}),trigger:["blur","change"]}],type:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.basic.type")}),trigger:["blur","change"]}],startIp:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.startIp"),"192.168.1.100")},trigger:["blur","change"]}],endIp:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.endIp"),"192.168.1.200")},trigger:["blur","change"]}],mask:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.mask"),"255.255.255.0")},trigger:["blur","change"]}],broadcast:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.broadcast"),"192.168.1.255")},trigger:["blur","change"]}],gateway:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.gateway"),"192.168.1.1")},trigger:["blur","change"]}],subnet:[{required:!0,validator:(e,t,l)=>{c(e,t,l,n("cj.label.network.subnet"),"192.168.1.0")},trigger:["blur","change"]}],bridge:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.network.bridge")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.network.bridge")}),trigger:["blur","change"]}],dns:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.network.dns.label")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.name")}),trigger:["blur","change"]}],domain:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.network.searchDomain")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.name")}),trigger:["blur","change"]}],vlanId:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.network.vlanId")}),trigger:["blur","change"]},{type:"number",message:n("cj.tooltip.global.must_number",{name:n("cj.label.network.vlanId")}),trigger:["blur"]}],basicNetworkId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.network.basicNetwork")}),trigger:["blur","change"]}]}),v=(0,p.KR)(null);function h(){r.value.validate((e=>{if(e){let e="on-create-network",t=k.ls,l={...o};1==o.bridgeType&&1===o.vlanGatewayType&&delete l.gateway,0==o.type&&(0===o.bridgeType&&delete l.vlanId,delete l.basicNetworkId),delete l.vlanGatewayType,t(l).then((t=>{0===t.code?(i.value=!1,a(e,t.data,!0),(0,_.zo)(t)):show_api_error(t)}))}else(0,R.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return t({open:()=>{(0,k.Mw)().then((e=>{v.value=e.data.filter((e=>0===e.type))||[]})),r.value&&r.value.resetFields(),i.value=!0}}),(e,t)=>{const l=b.WK,a=d.xE,n=w.P9,c=w.AV,k=d.US,_=u.S2,y=g.kZ;return(0,s.uX)(),(0,s.Wv)(y,{modelValue:(0,p.R1)(i),"onUpdate:modelValue":t[16]||(t[16]=e=>(0,p.i9)(i)?i.value=e:null),title:e.$t("cj.dialog.network.create"),width:"600","close-on-click-modal":!1},{footer:(0,s.k6)((()=>[(0,s.Lk)("div",j,[(0,s.bF)(_,{onClick:t[15]||(t[15]=e=>i.value=!1)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,s.bF)(_,{type:"primary",onClick:h},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(k,{model:(0,p.R1)(o),"label-width":"auto",class:"demo-form-inline",ref_key:"network_ref",ref:r,rules:(0,p.R1)(f)},{default:(0,s.k6)((()=>[(0,s.bF)(a,{label:e.$t("cj.label.basic.description"),prop:"name"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,p.R1)(o).name=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.startIp"),prop:"startIp"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).startIp,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,p.R1)(o).startIp=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.endIp"),prop:"endIp"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).endIp,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,p.R1)(o).endIp=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.bridgeType"),prop:"bridgeType"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:(0,p.R1)(o).bridgeType,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,p.R1)(o).bridgeType=e)},{default:(0,s.k6)((()=>[(0,s.bF)(n,{label:"Basic",value:0}),(0,s.bF)(n,{label:"OpenvSwitch Bridge",value:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),1==(0,p.R1)(o).bridgeType?((0,s.uX)(),(0,s.Wv)(a,{key:0,label:e.$t("cj.label.basic.type"),prop:"type"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:(0,p.R1)(o).type,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,p.R1)(o).type=e)},{default:(0,s.k6)((()=>[(0,s.bF)(n,{label:"Basic",value:0}),(0,s.bF)(n,{label:"OpenvSwitch Vlan",value:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),1==(0,p.R1)(o).bridgeType&&1==(0,p.R1)(o).type?((0,s.uX)(),(0,s.Wv)(a,{key:1,label:e.$t("cj.label.network.vlanGatewayType"),prop:"vlanGatewayType"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:(0,p.R1)(o).vlanGatewayType,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,p.R1)(o).vlanGatewayType=e)},{default:(0,s.k6)((()=>[(0,s.bF)(n,{label:e.$t("cj.enum.vlanGateway.soft"),value:0},null,8,["label"]),(0,s.bF)(n,{label:e.$t("cj.enum.vlanGateway.external"),value:1},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),1==(0,p.R1)(o).bridgeType&&1===(0,p.R1)(o).vlanGatewayType||0===(0,p.R1)(o).type?((0,s.uX)(),(0,s.Wv)(a,{key:2,label:e.$t("cj.label.network.gateway"),prop:"gateway"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).gateway,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,p.R1)(o).gateway=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bF)(a,{label:e.$t("cj.label.network.subnet"),prop:"subnet"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).subnet,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,p.R1)(o).subnet=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.mask"),prop:"mask"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).mask,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,p.R1)(o).mask=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.broadcast"),prop:"broadcast"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).broadcast,"onUpdate:modelValue":t[9]||(t[9]=e=>(0,p.R1)(o).broadcast=e)},null,8,["modelValue"])])),_:1},8,["label"]),0===(0,p.R1)(o).type||0===(0,p.R1)(o).bridgeType?((0,s.uX)(),(0,s.Wv)(a,{key:3,label:e.$t("cj.label.network.bridge"),prop:"bridge"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).bridge,"onUpdate:modelValue":t[10]||(t[10]=e=>(0,p.R1)(o).bridge=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bF)(a,{label:e.$t("cj.label.network.dns.label"),prop:"dns"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).dns,"onUpdate:modelValue":t[11]||(t[11]=e=>(0,p.R1)(o).dns=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(a,{label:e.$t("cj.label.network.searchDomain"),prop:"domain"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).domain,"onUpdate:modelValue":t[12]||(t[12]=e=>(0,p.R1)(o).domain=e)},null,8,["modelValue"])])),_:1},8,["label"]),1===(0,p.R1)(o).bridgeType?((0,s.uX)(),(0,s.Wv)(a,{key:4,label:e.$t("cj.label.network.vlanId"),prop:"vlanId"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:(0,p.R1)(o).vlanId,"onUpdate:modelValue":t[13]||(t[13]=e=>(0,p.R1)(o).vlanId=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),1===(0,p.R1)(o).bridgeType&&1===(0,p.R1)(o).type?((0,s.uX)(),(0,s.Wv)(a,{key:5,label:e.$t("cj.label.network.basicNetwork"),prop:"basicNetworkId"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:(0,p.R1)(o).basicNetworkId,"onUpdate:modelValue":t[14]||(t[14]=e=>(0,p.R1)(o).basicNetworkId=e)},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,p.R1)(v),(e=>((0,s.uX)(),(0,s.Wv)(n,{key:e.networkId,label:e.name,value:e.networkId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const I=h;var F=I,$=l(5563),W=l(9451),C=l(7774),V=(l(5280),Object.assign({name:"Network"},{__name:"Network",setup(e){const t=(0,W.rd)(),l=(0,p.KR)(null),{t:g}=(0,y.s9)(),w=(0,p.KR)({keyword:"",no:1,size:10}),R=(0,p.KR)(!1),j=(0,p.KR)({data:[],total:0}),h=(0,p.KR)(["networkId","name","poolId","status","createTime"]),I=(0,p.KR)([{prop:"networkId",label:g("cj.label.basic.id")},{prop:"name",label:g("cj.label.basic.description")},{prop:"poolId",label:g("cj.label.basic.name")},{prop:"bridge",label:g("cj.label.network.bridge")},{prop:"subnet",label:g("cj.label.network.subnet")},{prop:"type",label:g("cj.label.basic.type")},{prop:"bridgeType",label:g("cj.label.network.bridgeType")},{prop:"status",label:g("cj.label.basic.status")},{prop:"createTime",label:g("cj.label.basic.createTime")}]),V=(0,p.KR)(null);function T(e){w.value.no=e,x()}function z(e){w.value.size=e,x()}function x(){R.value=!0,(0,k.B4)(w.value).then((e=>{const{list:t=[],total:l=0}=e.data||{};j.value={data:t,total:l}})).catch((()=>{j.value={data:[],total:0}})).finally((()=>{R.value=!1}))}function U(){l.value.open()}function X(e,l){t.push({path:`/network/${l.networkId}`})}function N(e,t=!1){let l=j.value.data.findIndex((t=>t.networkId===e.networkId));-1!==l?Object.assign(j.value.data[l],e):t&&(j.value.data.push(e),j.value.total++)}function A(e){let t=j.value.data.findIndex((t=>t.networkId===e));-1!==t&&(j.value.data.splice(t,1),j.value.total--)}function E(e,t){C.s.confirm(g("cj.dialog.network.deleteConfirm"),"Warning",{confirmButtonText:g("cj.btn.basic.confirm"),cancelButtonText:g("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,k.KQ)({networkId:t.networkId}).then((e=>{0===e.code?(A(t.networkId),(0,_.zo)(e)):(0,_.Ue)(e)}))}))}return(0,$.A)("network_list",x,N,A),(e,t)=>{const k=b.WK,g=d.xE,_=u.S2,y=d.US,$=c.dI,W=c.o5,C=i.Vc,A=o.o8,K=r.u,S=o.Up,Q=n.aQ,P=(0,s.gN)("Admin"),B=a.L;return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(y,{model:(0,p.R1)(w),inline:"",size:"small"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{label:e.$t("cj.label.basic.keyword")},{default:(0,s.k6)((()=>[(0,s.bF)(k,{modelValue:(0,p.R1)(w).keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,p.R1)(w).keyword=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(_,{type:"primary",onClick:x,icon:(0,p.R1)(f.Search),disabled:(0,p.R1)(R)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon","disabled"])])),_:1})])),_:1},8,["model"]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(S,{data:(0,p.R1)(j).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{header:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(_,{size:"small",onClick:U,icon:(0,p.R1)(f.DocumentAdd)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])),[[P]]),(0,s.bF)(_,{size:"small",ref_key:"btnFilter",ref:V,icon:(0,p.R1)(f.Filter)},null,8,["icon"]),(0,s.bF)(C,{"virtual-ref":(0,p.R1)(V),trigger:"click","virtual-triggering":""},{default:(0,s.k6)((()=>[(0,s.bF)(W,{modelValue:(0,p.R1)(h),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,p.i9)(h)?h.value=e:null),min:1},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,p.R1)(I),(e=>((0,s.uX)(),(0,s.Wv)($,{label:e.label,value:e.prop,key:e.prop,style:{display:"block"},vertical:""},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["virtual-ref"])])),default:(0,s.k6)((()=>[(0,p.R1)(h).includes("networkId")?((0,s.uX)(),(0,s.Wv)(A,{key:0,prop:"networkId",label:e.$t("cj.label.basic.id")},null,8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("name")?((0,s.uX)(),(0,s.Wv)(A,{key:1,prop:"name",label:e.$t("cj.label.basic.description"),"min-width":"150","show-overflow-tooltip":""},null,8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("poolId")?((0,s.uX)(),(0,s.Wv)(A,{key:2,prop:"poolId",label:e.$t("cj.label.basic.name"),"min-width":"300","show-overflow-tooltip":""},null,8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("bridge")?((0,s.uX)(),(0,s.Wv)(A,{key:3,prop:"bridge",label:e.$t("cj.label.network.bridge"),"min-width":"150","show-overflow-tooltip":""},null,8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("subnet")?((0,s.uX)(),(0,s.Wv)(A,{key:4,label:e.$t("cj.label.network.subnet"),prop:"subnet","min-width":"150","show-overflow-tooltip":""},{default:(0,s.k6)((e=>[(0,s.eW)((0,m.v_)(e.row.subnet)+"/"+(0,m.v_)((0,p.R1)(v.BJ)(e.row.mask)),1)])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("type")?((0,s.uX)(),(0,s.Wv)(A,{key:5,prop:"type",label:e.$t("cj.label.basic.type")},{default:(0,s.k6)((e=>[(0,s.bF)(K,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)((0,p.R1)(v.Jn)(e.row.type)),1)])),_:2},1024)])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("bridgeType")?((0,s.uX)(),(0,s.Wv)(A,{key:6,prop:"bridgeType",label:e.$t("cj.label.network.bridgeType")},{default:(0,s.k6)((e=>[(0,s.bF)(K,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)((0,p.R1)(v.ke)(e.row.bridgeType)),1)])),_:2},1024)])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("status")?((0,s.uX)(),(0,s.Wv)(A,{key:7,prop:"status",label:e.$t("cj.label.basic.status")},{default:(0,s.k6)((e=>[(0,s.bF)(K,{type:(0,p.R1)(v.$k)(e.row.status)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)((0,p.R1)(v.Tt)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,p.R1)(h).includes("createTime")?((0,s.uX)(),(0,s.Wv)(A,{key:8,prop:"createTime",label:e.$t("cj.label.basic.createTime"),"min-width":"200","show-overflow-tooltip":""},{default:(0,s.k6)((e=>[(0,s.eW)((0,m.v_)((0,p.R1)(v.BU)(e.row.createTime)),1)])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bF)(A,{label:e.$t("cj.label.basic.operation"),"min-width":"250"},{default:(0,s.k6)((t=>[(0,s.bF)(_,{size:"small",type:"",onClick:e=>X(t.$index,t.row),icon:(0,p.R1)(f.View)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(_,{size:"small",type:"danger",onClick:e=>E(t.$index,t.row),icon:(0,p.R1)(f.Delete)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])),[[P]])])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[B,(0,p.R1)(R)]]),t[4]||(t[4]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(Q,{size:"small",background:"",onCurrentChange:T,onSizeChange:z,"current-page":(0,p.R1)(w).no,"onUpdate:currentPage":t[2]||(t[2]=e=>(0,p.R1)(w).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,p.R1)(w).size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,p.R1)(w).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,p.R1)(j).total},null,8,["current-page","page-size","total"]),(0,s.bF)(F,{ref_key:"editNetworkDialogRef",ref:l,onOnCreateNetwork:N,onOnUpdateNetwork:N},null,512)])}}})),T=l(3508);const z=(0,T.A)(V,[["__scopeId","data-v-a7ae7e04"]]);var x=z},573:function(e,t,l){l.d(t,{fR:function(){return m}});var a=l(6918),n=l(4673),o=l(1654),r=l(2267);const i=(0,r.b_)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:(0,r.jq)(String),default:"solid"}});var c=l(7860),d=l(7636);const u=(0,a.pM)({name:"ElDivider"}),b=(0,a.pM)({...u,props:i,setup(e){const t=e,l=(0,d.DU)("divider"),r=(0,a.EW)((()=>l.cssVar({"border-style":t.borderStyle})));return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)([(0,o.R1)(l).b(),(0,o.R1)(l).m(e.direction)]),style:(0,n.Tr)((0,o.R1)(r)),role:"separator"},[e.$slots.default&&"vertical"!==e.direction?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,n.C4)([(0,o.R1)(l).e("text"),(0,o.R1)(l).is(e.contentPosition)])},[(0,a.RG)(e.$slots,"default")],2)):(0,a.Q3)("v-if",!0)],6))}});var s=(0,c.A)(b,[["__file","divider.vue"]]),p=l(713);const m=(0,p.GU)(s)},2403:function(e,t,l){l(4974),l(754)},2890:function(e,t,l){l(4974)},3097:function(e,t,l){l.d(t,{B4:function(){return r},CP:function(){return c},E2:function(){return d},KQ:function(){return u},Mw:function(){return n},l3:function(){return o},ls:function(){return i}});var a=l(3162);const n=()=>(0,a.A)({url:"api/network/all"}),o=(e={})=>(0,a.A)({url:"api/network/info",params:e}),r=(e={})=>(0,a.A)({url:"api/network/search",params:e}),i=(e={})=>(0,a.A)({url:"api/network/create",params:e,method:"put"}),c=(e={})=>(0,a.A)({url:"api/network/register",data:e,method:"POST"}),d=(e={})=>(0,a.A)({url:"api/network/maintenance",data:e,method:"POST"}),u=(e={})=>(0,a.A)({url:"api/network/destroy",params:e,method:"delete"})},3568:function(e,t,l){l(4974)},3912:function(e,t,l){l.d(t,{A:function(){return d}});var a=l(6918);const n={t:"1745291014407",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15517",width:"200",height:"200"};function o(e,t){return(0,a.uX)(),(0,a.CE)("svg",n,t[0]||(t[0]=[(0,a.Lk)("path",{d:"M168 88l-18.016 16.992-44.992 44.992-16.992 18.016 12.992 20.992 67.008 112 8.992 16H271.04l128 127.008c-114.336 114.912-259.84 260.8-264.992 266.016-50.144 50.112-50.304 132.288 0.96 180 50.08 49.376 131.456 50.624 179.04 0l0.96-1.024L512 691.008l198.016 198.976 2.976 2.016c50.208 47.392 130.112 47.936 177.024-2.016v-0.96h0.96c49.024-50.112 49.536-131.584-0.96-179.04l-1.024-0.96-166.976-166.016c112.32-10.464 200.32-105.376 201.984-220h0.992c0.064-0.672-0.064-1.344 0-2.016V320c3.104-37.024-4.832-72.32-24-103.008L879.04 183.04l-28 28-121.024 120.992-44.992-47.008 118.016-117.984 33.984-34.016-44-17.984A224.096 224.096 0 0 0 704 96c-123.04 0-224 100.96-224 224 0 13.408 2.848 25.056 4.992 36.992-14.016 14.08-24.544 25.504-40.992 42.016L316.992 272V176.992l-16-8.992-112-67.008-20.992-12.992zM704 160c4.544 0 7.68 2.624 12 3.008l-99.008 98.976-21.984 22.016 21.984 23.008 90.016 92.992 21.984 23.008 23.008-23.008 104-104c0.672 7.36 5.824 12.736 4.992 20.992V320c0 88.16-71.84 160-160 160-11.712 0-25.984-2.816-41.984-6.016l-17.024-2.976-12 12-360.96 361.984h-1.024v1.024c-22.784 24.864-62.528 25.44-88.992-1.024v-0.992h-1.024c-24.864-22.784-25.44-62.528 1.024-88.992 12.096-12.128 247.008-249.024 361.984-364l13.024-12.992-5.024-18.016A198.08 198.08 0 0 1 544 320c0-88.16 71.84-160 160-160z m-526.016 8l75.008 46.016v32l-6.976 6.976h-32L168 178.016l10.016-10.016z m468 388.992l199.04 198.016v0.992h0.96c24.896 22.784 25.472 62.528-0.96 88.992h-1.024v1.024c-22.784 24.864-62.528 25.44-88.992-1.024l-198.016-198.976 89.024-89.024z","p-id":"15518"},null,-1)]))}var r=l(3508);const i={},c=(0,r.A)(i,[["render",o]]);var d=c},3979:function(e,t,l){l.d(t,{Vc:function(){return F}});var a=l(6918),n=l(1654),o=l(4673),r=l(3295),i=l(9504),c=l(2267),d=l(4603),u=l(5092),b=l(2386);const s=(0,c.b_)({trigger:d.p.trigger,triggerKeys:d.p.triggerKeys,placement:i.Qy.placement,disabled:d.p.disabled,visible:u.E.visible,transition:u.E.transition,popperOptions:i.Qy.popperOptions,tabindex:i.Qy.tabindex,content:u.E.content,popperStyle:u.E.popperStyle,popperClass:u.E.popperClass,enterable:{...u.E.enterable,default:!0},effect:{...u.E.effect,default:"light"},teleported:u.E.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),p={"update:visible":e=>(0,b.Lm)(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0};var m=l(7860),k=l(7636),f=l(2679);const v="onUpdate:visible",g=(0,a.pM)({name:"ElPopover"}),w=(0,a.pM)({...g,props:s,emits:p,setup(e,{expose:t,emit:l}){const i=e,c=(0,a.EW)((()=>i[v])),d=(0,k.DU)("popover"),u=(0,n.KR)(),b=(0,a.EW)((()=>{var e;return null==(e=(0,n.R1)(u))?void 0:e.popperRef})),s=(0,a.EW)((()=>[{width:(0,f._V)(i.width)},i.popperStyle])),p=(0,a.EW)((()=>[d.b(),i.popperClass,{[d.m("plain")]:!!i.content}])),m=(0,a.EW)((()=>i.transition===`${d.namespace.value}-fade-in-linear`)),g=()=>{var e;null==(e=u.value)||e.hide()},w=()=>{l("before-enter")},_=()=>{l("before-leave")},y=()=>{l("after-enter")},R=()=>{l("update:visible",!1),l("after-leave")};return t({popperRef:b,hide:g}),(e,t)=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(r.R7),(0,a.v6)({ref_key:"tooltipRef",ref:u},e.$attrs,{trigger:e.trigger,"trigger-keys":e.triggerKeys,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":(0,n.R1)(p),"popper-style":(0,n.R1)(s),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":(0,n.R1)(m),"onUpdate:visible":(0,n.R1)(c),onBeforeShow:w,onBeforeHide:_,onShow:y,onHide:R}),{content:(0,a.k6)((()=>[e.title?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)((0,n.R1)(d).e("title")),role:"title"},(0,o.v_)(e.title),3)):(0,a.Q3)("v-if",!0),(0,a.RG)(e.$slots,"default",{},(()=>[(0,a.eW)((0,o.v_)(e.content),1)]))])),default:(0,a.k6)((()=>[e.$slots.reference?(0,a.RG)(e.$slots,"reference",{key:0}):(0,a.Q3)("v-if",!0)])),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var _=(0,m.A)(w,[["__file","popover.vue"]]);const y=(e,t)=>{const l=t.arg||t.value,a=null==l?void 0:l.popperRef;a&&(a.triggerRef=e)};var R={mounted(e,t){y(e,t)},updated(e,t){y(e,t)}};const j="popover";var h=l(713);const I=(0,h.PZ)(R,j),F=(0,h.GU)(_,{directive:I})},5563:function(e,t,l){l.d(t,{A:function(){return n}});var a=l(6918);function n(e,t,l,n){const o=(0,a.WQ)("websocket");(0,a.sV)((()=>{o.subscribe_notify(e,(e=>{if(3===e.type){let t=e.data;0==t.code?l(t.data):1000001==t.code&&n(e.id)}})),o.subscribe_connect_notify(e,(()=>{t()})),o.init(),t()})),(0,a.xo)((()=>{o.unsubscribe_notify(e),o.unsubscribe_connect_notify(e)}))}},5688:function(e,t,l){l.d(t,{A:function(){return d}});var a=l(6918);const n={t:"1745292604454",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"29837",width:"200",height:"200"};function o(e,t){return(0,a.uX)(),(0,a.CE)("svg",n,t[0]||(t[0]=[(0,a.Lk)("path",{d:"M512 28.444A483.556 483.556 0 0 1 995.556 512 483.556 483.556 0 0 1 512 995.556 483.556 483.556 0 0 1 28.444 512 483.556 483.556 0 0 1 512 28.444z m0 56.89A426.667 426.667 0 0 0 85.333 512 426.667 426.667 0 0 0 512 938.667 426.667 426.667 0 0 0 938.667 512 426.667 426.667 0 0 0 512 85.333zM353.337 313.115a28.444 28.444 0 0 1 0 40.22 224.37 224.37 0 1 0 317.326 317.327 224.37 224.37 0 0 0 0-317.326 28.444 28.444 0 1 1 40.22-40.22 281.259 281.259 0 1 1-397.767 0 28.444 28.444 0 0 1 40.22 0zM512 230.741a28.444 28.444 0 0 1 27.99 23.325l0.454 5.12V512a28.444 28.444 0 0 1-56.433 5.12l-0.455-5.12V259.186A28.444 28.444 0 0 1 512 230.74z","p-id":"29838"},null,-1)]))}var r=l(3508);const i={},c=(0,r.A)(i,[["render",o]]);var d=c},6192:function(e,t,l){l.d(t,{IO:function(){return _}});var a=l(6918),n=l(4673),o=l(1654),r=l(387),i=l(573),c=l(2303),d=l(2267),u=l(6663);const b=(0,d.b_)({icon:{type:u.Ze,default:()=>c.Back},title:String,content:{type:String,default:""}}),s={back:()=>!0};var p=l(7860),m=l(2360),k=l(7636);const f=(0,a.pM)({name:"ElPageHeader"}),v=(0,a.pM)({...f,props:b,emits:s,setup(e,{emit:t}){const{t:l}=(0,m.Ym)(),c=(0,k.DU)("page-header");function d(){t("back")}return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)([(0,o.R1)(c).b(),{[(0,o.R1)(c).m("has-breadcrumb")]:!!e.$slots.breadcrumb,[(0,o.R1)(c).m("has-extra")]:!!e.$slots.extra,[(0,o.R1)(c).is("contentful")]:!!e.$slots.default}])},[e.$slots.breadcrumb?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,n.C4)((0,o.R1)(c).e("breadcrumb"))},[(0,a.RG)(e.$slots,"breadcrumb")],2)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,n.C4)((0,o.R1)(c).e("header"))},[(0,a.Lk)("div",{class:(0,n.C4)((0,o.R1)(c).e("left"))},[(0,a.Lk)("div",{class:(0,n.C4)((0,o.R1)(c).e("back")),role:"button",tabindex:"0",onClick:d},[e.icon||e.$slots.icon?((0,a.uX)(),(0,a.CE)("div",{key:0,"aria-label":e.title||(0,o.R1)(l)("el.pageHeader.title"),class:(0,n.C4)((0,o.R1)(c).e("icon"))},[(0,a.RG)(e.$slots,"icon",{},(()=>[e.icon?((0,a.uX)(),(0,a.Wv)((0,o.R1)(r.tk),{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.icon)))])),_:1})):(0,a.Q3)("v-if",!0)]))],10,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,n.C4)((0,o.R1)(c).e("title"))},[(0,a.RG)(e.$slots,"title",{},(()=>[(0,a.eW)((0,n.v_)(e.title||(0,o.R1)(l)("el.pageHeader.title")),1)]))],2)],2),(0,a.bF)((0,o.R1)(i.fR),{direction:"vertical"}),(0,a.Lk)("div",{class:(0,n.C4)((0,o.R1)(c).e("content"))},[(0,a.RG)(e.$slots,"content",{},(()=>[(0,a.eW)((0,n.v_)(e.content),1)]))],2)],2),e.$slots.extra?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,n.C4)((0,o.R1)(c).e("extra"))},[(0,a.RG)(e.$slots,"extra")],2)):(0,a.Q3)("v-if",!0)],2),e.$slots.default?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,n.C4)((0,o.R1)(c).e("main"))},[(0,a.RG)(e.$slots,"default")],2)):(0,a.Q3)("v-if",!0)],2))}});var g=(0,p.A)(v,[["__file","page-header.vue"]]),w=l(713);const _=(0,w.GU)(g)},6465:function(e,t,l){l.r(t),l.d(t,{default:function(){return Fe}});var a=l(6845),n=(l(4974),l(8206),l(6192)),o=(l(7063),l(8301)),r=(l(6810),l(4639),l(4279)),i=(l(3110),l(2889)),c=(l(2914),l(7477)),d=(l(6788),l(6672),l(7836)),u=(l(3020),l(5567),l(6918)),b=l(4673),s=l(1654),p=l(3097),m=l(6555),k=l(2303),f=l(8830),v=l(3912),g=l(5563),w=l(7471),_=l(387),y=(l(6573),l(573));l(3568),l(5286),l(8068);function R(e,t,l,a){const n=(0,u.WQ)("websocket");(0,u.sV)((()=>{n.subscribe_notify(e,(e=>{if(11===e.type){let t=e.data;0==t.code?l(t.data):1000003==t.code&&a(e.id)}})),n.subscribe_connect_notify(e,(()=>{t()})),n.init(),t()})),(0,u.xo)((()=>{n.unsubscribe_notify(e),n.unsubscribe_connect_notify(e)}))}var j=l(3162);const h=(e={})=>(0,j.A)({url:"api/component/all",params:e}),I=(e={})=>(0,j.A)({url:"api/component/slave/number",data:e,method:"POST"}),F=(e={})=>(0,j.A)({url:"api/component",data:e,method:"DELETE"}),$=(e={})=>(0,j.A)({url:"api/component/guest",params:e}),W=(e={})=>(0,j.A)({url:"api/component/nat/create",data:e,method:"PUT"});var C=l(6390),V=(l(8145),l(1177),l(1210),l(9343),l(8084)),T=l(9464),z=(l(2708),l(5143)),x=(l(493),l(9622),l(7255));l(756);const U=(e={})=>(0,j.A)({url:"api/dns/search",params:e}),X=(e={})=>(0,j.A)({url:"api/dns/create",params:e,method:"put"}),N=(e={})=>(0,j.A)({url:"api/dns/destroy",params:e,method:"delete"});function A(e,t,l,a){const n=(0,u.WQ)("websocket");(0,u.sV)((()=>{n.subscribe_notify(e,(e=>{if(10===e.type){let t=e.data;0==t.code?l(t.data):11000001==t.code&&a(e.id)}})),n.subscribe_connect_notify(e,(()=>{t()})),n.init(),t()})),(0,u.xo)((()=>{n.unsubscribe_notify(e),n.unsubscribe_connect_notify(e)}))}var E=l(7898),K=(l(7191),l(1421)),S=l(7445),Q=l(8180);l(6447);const P={class:"dialog-footer"};var B={__name:"EditDnsDialog",props:{componentId:Number,componentType:Number,networkId:Number},emits:["on-create-dns"],setup(e,{expose:t,emit:l}){const a=e,n=(0,s.KR)(!1),o=l,r=(0,s.Kh)({ip:"",domain:""}),i=(0,s.KR)(null),{t:c}=(0,S.s9)();function p(e,t,l,a,n){if(!t)return void l(new Error(c("cj.tooltip.global.not_empty",{name:a})));const o=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/;o.test(t)?l():l(new Error(c("cj.tooltip.global.ip_verify_error",{name:a,sample:n})))}const m=(0,s.Kh)({domain:[{required:!0,message:c("cj.tooltip.global.not_empty",{name:c("cj.label.network.dns.domain")}),trigger:["blur","change"]},{min:1,max:64,message:c("cj.tooltip.global.length_error",{name:c("cj.label.network.dns.domain")}),trigger:["blur","change"]}],ip:[{required:!0,message:c("cj.tooltip.global.not_empty",{name:c("cj.label.network.nic.ip")}),trigger:["blur","change"]},{validator:(e,t,l)=>{p(e,t,l,c("cj.label.network.nic.ip"),"192.168.1.100")},trigger:["blur","change"]}]});function k(){i.value.validate((e=>{if(e){let e="on-create-dns",t=X,l={...r,networkId:a.networkId};t(l).then((t=>{0===t.code?(n.value=!1,o(e,t.data,!0),(0,K.zo)(t)):show_api_error(t)}))}else(0,Q.nk)({type:"error",message:c("cj.tooltip.global.has_error")})}))}return t({open:()=>{r.ip="",r.domain="",n.value=!0}}),(e,t)=>{const l=x.WK,a=z.xE,o=z.US,c=d.S2,p=E.kZ;return(0,u.uX)(),(0,u.Wv)(p,{modelValue:(0,s.R1)(n),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,s.i9)(n)?n.value=e:null),title:e.$t("cj.dialog.dns.create"),width:"400","close-on-click-modal":!1},{footer:(0,u.k6)((()=>[(0,u.Lk)("div",P,[(0,u.bF)(c,{onClick:t[2]||(t[2]=e=>n.value=!1)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,u.bF)(c,{type:"primary",onClick:k},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,u.k6)((()=>[(0,u.bF)(o,{model:(0,s.R1)(r),"label-width":"auto",ref_key:"dns_ref",ref:i,rules:(0,s.R1)(m)},{default:(0,u.k6)((()=>[(0,u.bF)(a,{label:e.$t("cj.label.network.dns.domain"),prop:"domain"},{default:(0,u.k6)((()=>[(0,u.bF)(l,{modelValue:(0,s.R1)(r).domain,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.R1)(r).domain=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.network.nic.ip"),prop:"ip"},{default:(0,u.k6)((()=>[(0,u.bF)(l,{modelValue:(0,s.R1)(r).ip,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.R1)(r).ip=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const L=B;var D=L,M=l(7774),q=(l(5280),{__name:"Dns",props:{componentId:Number,componentType:Number,networkId:Number},setup(e){const t=e,{t:l}=(0,S.s9)(),n=(0,s.KR)({keyword:"",no:1,size:10}),o=(0,s.KR)(!1),r=(0,s.KR)({data:[],total:0}),i=(0,s.KR)(null);function c(){g()}function p(){i.value.open()}function m(e,t){M.s.confirm(l("cj.dialog.dns.deleteConfirm"),"Warning",{confirmButtonText:l("cj.btn.basic.confirm"),cancelButtonText:l("cj.btn.basic.cancel"),type:"warning"}).then((()=>{N({id:t.id}).then((e=>{0===e.code?(_(t.id),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function f(e){n.value.no=e,g()}function v(e){n.value.size=e,g()}function g(){o.value=!0,U({keyword:n.value.keyword,networkId:t.networkId,no:n.value.no,size:n.value.size}).then((e=>{const{list:t=[],total:l=0}=e.data||{};r.value={data:t,total:l}})).catch((()=>{r.value={data:[],total:0}})).finally((()=>{o.value=!1}))}function w(e,l=!1){let a=r.value.data.findIndex((t=>t.id===e.id));-1!==a?Object.assign(r.value.data[a],e):l&&e.networkId===t.networkId&&(r.value.data.push(e),r.value.total++)}function _(e){let t=r.value.data.findIndex((t=>t.id===e));-1!==t&&(r.value.data.splice(t,1),r.value.total--)}return A("dns_list",c,w,_),(e,l)=>{const c=x.WK,_=z.xE,y=d.S2,R=z.US,j=C.o8,h=C.Up,I=T.aQ,F=a.L;return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.bo)(((0,u.uX)(),(0,u.Wv)(h,{data:(0,s.R1)(r).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,u.k6)((()=>[(0,u.bF)(j,null,{header:(0,u.k6)((()=>[(0,u.bF)(R,{model:(0,s.R1)(n),inline:""},{default:(0,u.k6)((()=>[(0,u.bF)(_,{label:e.$t("cj.label.basic.keyword")},{default:(0,u.k6)((()=>[(0,u.bF)(c,{size:"small",modelValue:(0,s.R1)(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.R1)(n).keyword=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(_,null,{default:(0,u.k6)((()=>[(0,u.bF)(y,{size:"small",type:"primary",onClick:g,icon:(0,s.R1)(k.Search)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon"]),(0,u.bF)(y,{size:"small",type:"primary",onClick:p,icon:(0,s.R1)(k.DocumentAdd)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),default:(0,u.k6)((()=>[(0,u.bF)(j,{label:e.$t("cj.label.basic.id"),prop:"id"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.nic.ip"),prop:"ip"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.dns.domain"),prop:"domain"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.basic.operation")},{default:(0,u.k6)((t=>[(0,u.bF)(y,{size:"small",type:"danger",onClick:e=>m(t.$index,t.row),icon:(0,s.R1)(k.Delete)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[F,(0,s.R1)(o)]]),(0,u.bF)(I,{size:"small",style:{"margin-top":"10px"},background:"",onCurrentChange:f,onSizeChange:v,"current-page":(0,s.R1)(n).no,"onUpdate:currentPage":l[1]||(l[1]=e=>(0,s.R1)(n).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,s.R1)(n).size,"onUpdate:pageSize":l[2]||(l[2]=e=>(0,s.R1)(n).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,s.R1)(r).total},null,8,["current-page","page-size","total"]),(0,u.bF)(D,{ref_key:"editDnsDialogRef",ref:i,"component-id":t.componentId,"component-type":t.componentType,"network-id":t.networkId,onOnCreateDns:w},null,8,["component-id","component-type","network-id"])],64)}}});const G=q;var O=G;const H=(e={})=>(0,j.A)({url:"api/nat/search",params:e}),Z=(e={})=>(0,j.A)({url:"api/nat/create",params:e,method:"put"}),J=(e={})=>(0,j.A)({url:"api/nat/destroy",params:e,method:"delete"});var Y=l(6622);l(4005),l(7233);const ee={class:"dialog-footer"};var te={__name:"EditNatDialog",props:{componentId:Number,componentType:Number,networkId:Number},emits:["on-create-nat"],setup(e,{expose:t,emit:l}){const a=(0,s.KR)(!1),n=l,o=e,r=(0,s.Kh)({protocol:"tcp",localPort:"",remoteIp:"",remotePort:""});function i(e,t,l,a,n){if(!t)return void l(new Error(c("cj.tooltip.global.not_empty",{name:a})));const o=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/;o.test(t)?l():l(new Error(c("cj.tooltip.global.ip_verify_error",{name:a,sample:n})))}const{t:c}=(0,S.s9)(),p=(0,s.KR)(null),m=(0,s.Kh)({protocol:[{required:!0,message:c("cj.tooltip.global.select_empty",{name:c("cj.label.network.nat.protocol")}),trigger:["blur","change"]}],remoteIp:[{required:!0,message:c("cj.tooltip.global.not_empty",{name:c("cj.label.network.nat.remoteIp")}),trigger:["blur","change"]},{validator:(e,t,l)=>{i(e,t,l,c("cj.label.network.nat.remoteIp"),"192.168.1.100")},trigger:["blur","change"]}],localPort:[{required:!0,message:c("cj.tooltip.global.not_empty",{name:c("cj.label.network.nat.localPort")}),trigger:["blur","change"]},{type:"number",message:c("cj.tooltip.global.must_number",{name:c("cj.label.network.nat.localPort")}),trigger:["blur"]}],remotePort:[{required:!0,message:c("cj.tooltip.global.not_empty",{name:c("cj.label.network.nat.remotePort")}),trigger:["blur","change"]},{type:"number",message:c("cj.tooltip.global.must_number",{name:c("cj.label.network.nat.remotePort")}),trigger:["blur"]}]});function k(){p.value.validate((e=>{if(e){let e="on-create-nat",t=Z,l={protocol:r.protocol,localPort:r.localPort,remoteIp:r.remoteIp,remotePort:r.remotePort,componentId:o.componentId};t(l).then((t=>{0===t.code?(a.value=!1,n(e,t.data,!0),(0,K.zo)(t)):show_api_error(t)}))}else(0,Q.nk)({type:"error",message:c("cj.tooltip.global.has_error")})}))}return t({open:()=>{r.protocol="tcp",r.localPort="",r.remoteIp="",r.remotePort="",a.value=!0}}),(e,t)=>{const l=Y.P9,n=Y.AV,o=z.xE,i=x.WK,c=z.US,f=d.S2,v=E.kZ;return(0,u.uX)(),(0,u.Wv)(v,{modelValue:(0,s.R1)(a),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,s.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.nat.create"),width:"400","close-on-click-modal":!1},{footer:(0,u.k6)((()=>[(0,u.Lk)("div",ee,[(0,u.bF)(f,{onClick:t[4]||(t[4]=e=>a.value=!1)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,u.bF)(f,{type:"primary",onClick:k},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,u.k6)((()=>[(0,u.bF)(c,{model:(0,s.R1)(r),"label-width":"auto",ref_key:"nat_ref",ref:p,rules:(0,s.R1)(m)},{default:(0,u.k6)((()=>[(0,u.bF)(o,{label:e.$t("cj.label.network.nat.protocol"),prop:"protocol"},{default:(0,u.k6)((()=>[(0,u.bF)(n,{modelValue:(0,s.R1)(r).protocol,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.R1)(r).protocol=e)},{default:(0,u.k6)((()=>[(0,u.bF)(l,{label:"tcp",value:"tcp"}),(0,u.bF)(l,{label:"udp",value:"udp"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(o,{label:e.$t("cj.label.network.nat.localPort"),prop:"localPort"},{default:(0,u.k6)((()=>[(0,u.bF)(i,{modelValue:(0,s.R1)(r).localPort,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.R1)(r).localPort=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(o,{label:e.$t("cj.label.network.nat.remoteIp"),prop:"remoteIp"},{default:(0,u.k6)((()=>[(0,u.bF)(i,{modelValue:(0,s.R1)(r).remoteIp,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.R1)(r).remoteIp=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(o,{label:e.$t("cj.label.network.nat.remotePort"),prop:"remotePort"},{default:(0,u.k6)((()=>[(0,u.bF)(i,{modelValue:(0,s.R1)(r).remotePort,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,s.R1)(r).remotePort=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const le=te;var ae=le;function ne(e,t,l,a){const n=(0,u.WQ)("websocket");(0,u.sV)((()=>{n.subscribe_notify(e,(e=>{if(12===e.type){let t=e.data;0==t.code?l(t.data):1000003==t.code&&a(e.id)}})),n.subscribe_connect_notify(e,(()=>{t()})),n.init(),t()})),(0,u.xo)((()=>{n.unsubscribe_notify(e),n.unsubscribe_connect_notify(e)}))}var oe={__name:"Nat",props:{componentId:Number,componentType:Number,networkId:Number},setup(e){const t=(0,s.KR)(null),l=e,{t:n}=(0,S.s9)(),o=(0,s.KR)({keyword:"",no:1,size:10}),r=(0,s.KR)(!1),i=(0,s.KR)({data:[],total:0});function c(){v()}function p(e,t){M.s.confirm(n("cj.dialog.nat.deleteConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{J({natId:t.natId}).then((e=>{0===e.code?(w(t.natId),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function m(e){o.value.no=e,v()}function f(e){o.value.size=e,v()}function v(){r.value=!0,H({keyword:o.value.keyword,componentId:l.componentId,no:o.value.no,size:o.value.size}).then((e=>{const{list:t=[],total:l=0}=e.data||{};i.value={data:t,total:l}})).catch((()=>{i.value={data:[],total:0}})).finally((()=>{r.value=!1}))}function g(e,t=!1){let a=i.value.data.findIndex((t=>t.natId===e.natId));-1!==a?Object.assign(i.value.data[a],e):t&&e.componentId===l.componentId&&(i.value.data.push(e),i.value.total++)}function w(e){let t=i.value.data.findIndex((t=>t.natId===e));-1!==t&&(i.value.data.splice(t,1),i.value.total--)}function _(){t.value.open()}return ne("nat_list",c,g,w),(e,n)=>{const c=x.WK,w=z.xE,y=d.S2,R=z.US,j=C.o8,h=C.Up,I=T.aQ,F=a.L;return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.bo)(((0,u.uX)(),(0,u.Wv)(h,{data:(0,s.R1)(i).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,u.k6)((()=>[(0,u.bF)(j,null,{header:(0,u.k6)((()=>[(0,u.bF)(R,{model:(0,s.R1)(o),inline:""},{default:(0,u.k6)((()=>[(0,u.bF)(w,{label:e.$t("cj.label.basic.keyword")},{default:(0,u.k6)((()=>[(0,u.bF)(c,{modelValue:(0,s.R1)(o).keyword,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,s.R1)(o).keyword=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,u.bF)(w,null,{default:(0,u.k6)((()=>[(0,u.bF)(y,{type:"primary",onClick:v,icon:(0,s.R1)(k.Search)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon"]),(0,u.bF)(y,{type:"primary",onClick:_,icon:(0,s.R1)(k.DocumentAdd)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),default:(0,u.k6)((()=>[(0,u.bF)(j,{label:e.$t("cj.label.basic.id"),prop:"natId"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.nat.protocol"),prop:"protocol"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.nat.localPort"),prop:"localPort"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.nat.remoteIp"),prop:"remoteIp"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.network.nat.remotePort"),prop:"remotePort"},null,8,["label"]),(0,u.bF)(j,{label:e.$t("cj.label.basic.operation")},{default:(0,u.k6)((t=>[(0,u.bF)(y,{size:"small",type:"danger",onClick:e=>p(t.$index,t.row),icon:(0,s.R1)(k.Delete)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[F,(0,s.R1)(r)]]),(0,u.bF)(I,{size:"small",style:{"margin-top":"10px"},background:"",onCurrentChange:m,onSizeChange:f,"current-page":(0,s.R1)(o).no,"onUpdate:currentPage":n[1]||(n[1]=e=>(0,s.R1)(o).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,s.R1)(o).size,"onUpdate:pageSize":n[2]||(n[2]=e=>(0,s.R1)(o).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,s.R1)(i).total},null,8,["current-page","page-size","total"]),(0,u.bF)(ae,{ref_key:"editNatDialogRef",ref:t,"component-id":l.componentId,"component-type":l.componentType,"network-id":l.networkId,onOnCreateNat:g},null,8,["component-id","component-type","network-id"])],64)}}};const re=oe;var ie=re,ce=l(5688),de=l(8882),ue=l(5254),be=l(9451),se={__name:"vm",props:{componentId:Number,componentType:Number,networkId:Number},emits:["on-running-update"],setup(e,{emit:t}){const l=e,{t:a}=(0,S.s9)(),n=(0,be.rd)(),r=(0,s.KR)("Vm"),i=(0,s.KR)([]),p=t,f=(0,s.KR)(!1);function v(e){n.push({path:`/vm/${e.guestId}`})}function g(e){let{href:t}=n.resolve({path:`/vnc/${e.guestId}`});window.open(t,"_blank")}function w(){i.value=[],$({componentId:l.componentId}).then((e=>{let{data:t}=e||{};i.value=t.filter((e=>e.component&&e.component.componentId===l.componentId))||[],R()}))}function _(e){let t=i.value.findIndex((t=>t.guestId===e.guestId));-1!==t?Object.assign(i.value[t],e):e.component&&e.component.componentId===l.componentId&&i.value.push(e),R()}function y(e){let t=i.value.findIndex((t=>t.guestId===e));-1!==t&&i.value.splice(t,1),R()}function R(){let e=!1;i.value.forEach((t=>{2===t.status&&(e=!0)})),f.value!=e&&(f.value=e,p("on-running-update",l.componentId,f.value))}function j(e){M.s.confirm(a("cj.dialog.vm.stopConfirm"),"Warning",{confirmButtonText:a("cj.btn.basic.confirm"),cancelButtonText:a("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,ue.rW)({guestId:e.guestId,force:!1}).then((t=>{0===t.code?(_(e),(0,K.zo)(t)):(0,K.Ue)(t)}))}))}function h(e){M.s.confirm(a("cj.dialog.vm.deleteConfirm"),"Warning",{confirmButtonText:a("cj.btn.basic.confirm"),cancelButtonText:a("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,ue.Uk)({guestId:e.guestId}).then((e=>{0===e.code?(_(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}return(0,V.A)("network_component_guest",w,_,y),(e,t)=>{const a=C.o8,n=c.u,p=d.S2,f=C.Up,w=o.v$,_=o.q;return(0,u.uX)(),(0,u.Wv)(_,{modelValue:(0,s.R1)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.i9)(r)?r.value=e:null),class:"component-tabs"},{default:(0,u.k6)((()=>[(0,u.bF)(w,{label:"Component VM",name:"Vm"},{default:(0,u.k6)((()=>[(0,u.bF)(f,{data:(0,s.R1)(i),size:"small",border:"","table-layout":"auto"},{default:(0,u.k6)((()=>[(0,u.bF)(a,{label:e.$t("cj.label.basic.id"),prop:"guestId"},null,8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.basic.name"),prop:"name"},null,8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.basic.description"),prop:"description"},null,8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.network.nic.ip"),prop:"guestIp"},null,8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.basic.status"),prop:"status"},{default:(0,u.k6)((e=>[(0,u.bF)(n,{type:(0,s.R1)(m.P5)(e.row.status)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.hX)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"]),(0,u.bF)(a,{label:e.$t("cj.label.basic.operation")},{default:(0,u.k6)((t=>[(0,u.bF)(p,{size:"small",type:"",onClick:e=>v(t.row),icon:(0,s.R1)(k.View)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),[1,2].includes(t.row.status)?((0,u.uX)(),(0,u.Wv)(p,{key:0,size:"small",type:"",onClick:e=>g(t.row),icon:de.A},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.vm.vnc")),1)])),_:2},1032,["onClick"])):(0,u.Q3)("",!0),[1,2,3,5].includes(t.row.status)?((0,u.uX)(),(0,u.Wv)(p,{key:1,size:"small",type:"warning",onClick:e=>j(t.row),icon:ce.A},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.vm.stop")),1)])),_:2},1032,["onClick"])):(0,u.Q3)("",!0),[4,6].includes(t.row.status)?((0,u.uX)(),(0,u.Wv)(p,{key:2,size:"small",type:"danger",onClick:e=>h(t.row),icon:(0,s.R1)(k.Delete)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])):(0,u.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])),_:1}),1===l.componentType?((0,u.uX)(),(0,u.Wv)(w,{key:0,label:"DNS Rule",name:"dns"},{default:(0,u.k6)((()=>[(0,u.bF)(O,{"component-id":l.componentId,"component-type":l.componentType,"network-id":l.networkId},null,8,["component-id","component-type","network-id"])])),_:1})):(0,u.Q3)("",!0),2===l.componentType?((0,u.uX)(),(0,u.Wv)(w,{key:1,label:"Nat Rule",name:"nat"},{default:(0,u.k6)((()=>[(0,u.bF)(ie,{"component-id":l.componentId,"component-type":l.componentType,"network-id":l.networkId},null,8,["component-id","component-type","network-id"])])),_:1})):(0,u.Q3)("",!0)])),_:1},8,["modelValue"])}}},pe=l(3508);const me=(0,pe.A)(se,[["__scopeId","data-v-bcaa583a"]]);var ke=me;const fe={class:"dialog-footer"};var ve={__name:"EditSlaveNumberDialog",emits:["on-update-component"],setup(e,{expose:t,emit:l}){const a=(0,s.KR)(!1),n=l,{t:o}=(0,S.s9)(),r=(0,s.Kh)({number:0,componentId:0}),i=(0,s.KR)(null),c=(0,s.Kh)({number:[{required:!0,message:o("cj.tooltip.global.not_empty",{name:o("cj.label.network.component.slaveNumber")}),trigger:["blur","change"]},{type:"number",message:o("cj.tooltip.global.must_number",{name:o("cj.label.network.component.slaveNumber")}),trigger:["blur"]}]});function p(){i.value.validate((e=>{if(!e)return(0,Q.nk)({type:"error",message:o("cj.tooltip.global.has_error")}),!1;{let e="on-update-component",t=I,l={number:r.number,componentId:r.componentId};t(l).then((t=>{0===t.code?(a.value=!1,n(e,t.data),(0,K.zo)(t)):(0,K.Ue)(t)}))}}))}return t({open:(e,t)=>{r.componentId=e,r.number=t,a.value=!0}}),(e,t)=>{const l=x.WK,n=z.xE,o=z.US,m=d.S2,k=E.kZ;return(0,u.uX)(),(0,u.Wv)(k,{modelValue:(0,s.R1)(a),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.network.editSlaveNumber"),width:"400","close-on-click-modal":!1},{footer:(0,u.k6)((()=>[(0,u.Lk)("div",fe,[(0,u.bF)(m,{onClick:t[1]||(t[1]=e=>a.value=!1)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,u.bF)(m,{type:"primary",onClick:p},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,u.k6)((()=>[(0,u.bF)(o,{model:(0,s.R1)(r),"label-width":"auto",ref_key:"edit_ref",ref:i,rules:(0,s.R1)(c)},{default:(0,u.k6)((()=>[(0,u.bF)(n,{label:e.$t("cj.label.network.component.slaveNumber"),prop:"number"},{default:(0,u.k6)((()=>[(0,u.bF)(l,{modelValue:(0,s.R1)(r).number,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.R1)(r).number=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const ge=ve;var we=ge,_e={__name:"NetworkComponent",props:{networkId:Number},setup(e){const t=e,l=(0,s.KR)([]),a=(0,s.KR)(null),{t:n}=(0,S.s9)();function o(){h({networkId:t.networkId}).then((e=>{let{data:t=[]}=e||{};l.value=t.map((e=>({...e,isRunning:!1})))||[]}))}function i(e){let a=l.value.findIndex((t=>t.componentId===e.componentId));if(-1!==a){let t=l.value[a].isRunning;Object.assign(l.value[a],{...e,isRunning:t})}else e.networkId===t.networkId&&l.value.push({...e,isRunning:!1})}function p(e){let t=l.value.findIndex((t=>t.componentId===e));-1!==t&&l.value.splice(t,1)}function f(e,t){setTimeout((()=>{let a=l.value.findIndex((t=>t.componentId===Number(e)));-1!==a&&(l.value[a]={...l.value[a],isRunning:t})}),1e3)}function v(e){a.value.open(e.componentId,e.componentSlaveNumber)}function g(e){M.s.confirm(n("cj.dialog.network.deleteComponetConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{F({componentId:e.componentId}).then((t=>{0===t.code?(p(e.componentId),(0,K.zo)(t)):(0,K.Ue)(t)}))}))}function w(){M.s.confirm(n("cj.dialog.network.createNatComponentConfirm"),"Info",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"info"}).then((()=>{W({networkId:t.networkId}).then((e=>{0===e.code?(i(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}return R("network_component",o,i,p),(e,n)=>{const o=d.S2,p=y.fR,R=r.MF,j=c.u,h=_.tk,I=r.TS,F=(0,u.gN)("Admin");return(0,u.uX)(),(0,u.CE)("div",null,[(0,u.bo)(((0,u.uX)(),(0,u.Wv)(o,{size:"small",type:"primary",onClick:w,icon:(0,s.R1)(k.DocumentAdd)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.network.createNatComponent")),1)])),_:1},8,["icon"])),[[F]]),(0,u.bF)(p),((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)((0,s.R1)(l),(l=>((0,u.uX)(),(0,u.CE)("div",{key:l.componentId},[(0,u.bF)(I,{column:2,border:"",style:{"margin-bottom":"10px"},"label-width":"200"},{default:(0,u.k6)((()=>[(0,u.bF)(R,{span:2},{default:(0,u.k6)((()=>[(0,u.bo)(((0,u.uX)(),(0,u.Wv)(o,{type:"primary",size:"small",onClick:e=>v(l),icon:(0,s.R1)(k.Edit)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.network.updateSlaveNumber")),1)])),_:2},1032,["onClick","icon"])),[[F]]),1!=l.componentType?(0,u.bo)(((0,u.uX)(),(0,u.Wv)(o,{key:0,type:"danger",size:"small",onClick:e=>g(l),icon:(0,s.R1)(k.Delete)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])),[[F]]):(0,u.Q3)("",!0)])),_:2},1024),(0,u.bF)(R,{label:e.$t("cj.label.basic.id")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(l.componentId),1)])),_:2},1032,["label"]),(0,u.bF)(R,{label:e.$t("cj.label.basic.type")},{default:(0,u.k6)((()=>[(0,u.bF)(j,null,{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.dv)(l.componentType)),1)])),_:2},1024)])),_:2},1032,["label"]),(0,u.bF)(R,{label:e.$t("cj.label.network.component.vip")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(l.componentVip),1)])),_:2},1032,["label"]),(0,u.bF)(R,{label:e.$t("cj.label.network.component.baseVip")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(l.basicComponentVip),1)])),_:2},1032,["label"]),(0,u.bF)(R,{label:e.$t("cj.label.network.component.slaveNumber")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(l.componentSlaveNumber),1)])),_:2},1032,["label"]),(0,u.bF)(R,{label:e.$t("cj.label.basic.status")},{default:(0,u.k6)((()=>[(0,u.bF)(h,{size:20},{default:(0,u.k6)((()=>[l.isRunning?((0,u.uX)(),(0,u.Wv)((0,s.R1)(k.SuccessFilled),{key:0,color:"#67C23A"})):((0,u.uX)(),(0,u.Wv)((0,s.R1)(k.CircleCloseFilled),{key:1,color:"#F56C6C"}))])),_:2},1024)])),_:2},1032,["label"]),(0,u.bF)(R,{span:2},{default:(0,u.k6)((()=>[(0,u.bF)(ke,{componentId:l.componentId,componentType:l.componentType,networkId:t.networkId,onOnRunningUpdate:f},null,8,["componentId","componentType","networkId"])])),_:2},1024)])),_:2},1024)])))),128)),(0,u.bF)(we,{ref_key:"editSlaveNumberDialogRef",ref:a,onOnUpdateComponent:i},null,512)])}}};const ye=_e;var Re=ye;const je={class:"flex items-center"};var he=Object.assign({name:"ViewNetwork"},{__name:"ViewNetwork",setup(e){const t=(0,be.rd)(),l=(0,be.lq)(),{t:_}=(0,S.s9)(),y=(0,s.KR)("basic"),R=(0,s.KR)({networkId:36,poolId:"",name:"",startIp:"",endIp:"",gateway:"",mask:"",subnet:"",broadcast:"",bridge:"",bridgeType:1,dns:"",domain:"cj.kvm.internal",type:0,status:2,vlanId:0,basicNetworkId:0,createTime:(new Date).getTime()}),j=(0,s.KR)(!0);function h(e){e===R.value.networkId&&F()}function I(){j.value=!0,(0,p.l3)({networkId:l.params.id}).then((e=>{0===e.code?R.value=e.data:(0,Q.nk)({type:"error",message:e.message})})).finally((()=>{j.value=!1}))}function F(){t.back(-1)}function $(e){t.push({path:e})}function W(){M.s.confirm(_("cj.dialog.network.deleteConfirm"),"Warning",{confirmButtonText:_("cj.btn.basic.confirm"),cancelButtonText:_("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,p.KQ)({networkId:R.value.networkId}).then((e=>{0===e.code?(F(),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function C(){M.s.confirm(_("cj.dialog.network.maintenanceConfirm"),"Warning",{confirmButtonText:_("cj.btn.basic.confirm"),cancelButtonText:_("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,p.E2)({networkId:R.value.networkId}).then((e=>{0===e.code?(T(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function V(){M.s.confirm(_("cj.dialog.network.registerConfirm"),"Info",{confirmButtonText:_("cj.btn.basic.confirm"),cancelButtonText:_("cj.btn.basic.cancel"),type:"info"}).then((()=>{(0,p.CP)({networkId:R.value.networkId}).then((e=>{0===e.code?(T(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function T(e){e.networkId===R.value.networkId&&Object.assign(R.value,e)}return(0,g.A)("network_detail",I,T,h),(e,t)=>{const p=d.S2,g=r.MF,_=c.u,h=i.C4,I=r.TS,T=o.v$,z=o.q,x=n.IO,U=(0,u.gN)("Admin"),X=a.L;return(0,u.uX)(),(0,u.CE)("div",null,[(0,u.bF)(x,{onBack:F},{content:(0,u.k6)((()=>[(0,u.Lk)("span",null,(0,b.v_)(e.$t("cj.tabs.network")),1)])),extra:(0,u.k6)((()=>[(0,u.Lk)("div",je,[2!==(0,s.R1)(R).status?(0,u.bo)(((0,u.uX)(),(0,u.Wv)(p,{key:0,type:"primary",onClick:V,icon:f.A},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.user.register")),1)])),_:1})),[[U]]):(0,u.Q3)("",!0),3!==(0,s.R1)(R).status?(0,u.bo)(((0,u.uX)(),(0,u.Wv)(p,{key:1,type:"warning",onClick:C,icon:v.A},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.maintenance")),1)])),_:1})),[[U]]):(0,u.Q3)("",!0),(0,u.bo)(((0,u.uX)(),(0,u.Wv)(p,{type:"danger",onClick:W,icon:(0,s.R1)(k.Delete)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:1},8,["icon"])),[[U]])])])),default:(0,u.k6)((()=>[(0,u.bF)(z,{class:"demo-tabs",modelValue:(0,s.R1)(y),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.i9)(y)?y.value=e:null),type:"card"},{default:(0,u.k6)((()=>[(0,u.bo)(((0,u.uX)(),(0,u.Wv)(T,{label:e.$t("cj.tabs.basic"),name:"basic"},{default:(0,u.k6)((()=>[(0,u.bF)(I,{border:"",column:2,style:{"margin-top":"10px"}},{default:(0,u.k6)((()=>[(0,u.bF)(g,{label:e.$t("cj.label.basic.id")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).networkId),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.basic.description")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).name),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.basic.name")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).poolId),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.startIp")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).startIp),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.endIp")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).endIp),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.gateway")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).gateway),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.mask")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).mask),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.subnet")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).subnet),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.broadcast")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).broadcast),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.bridge")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).bridge),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.bridgeType")},{default:(0,u.k6)((()=>[(0,u.bF)(_,null,{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.ke)((0,s.R1)(R).bridgeType)),1)])),_:1})])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.dns.label")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).dns),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.network.searchDomain")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).domain),1)])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.basic.type")},{default:(0,u.k6)((()=>[(0,u.bF)(_,null,{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.Jn)((0,s.R1)(R).type)),1)])),_:1})])),_:1},8,["label"]),1===(0,s.R1)(R).bridgeType?((0,u.uX)(),(0,u.Wv)(g,{key:0,label:e.$t("cj.label.network.vlanId")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).vlanId),1)])),_:1},8,["label"])):(0,u.Q3)("",!0),(0,s.R1)(R).basic?((0,u.uX)(),(0,u.Wv)(g,{key:1,label:e.$t("cj.label.network.basicNetwork")},{default:(0,u.k6)((()=>[(0,u.bF)(h,{type:"primary",onClick:t[0]||(t[0]=e=>$(`/network/${(0,s.R1)(R).basic.networkId}`))},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(R).basic.name),1)])),_:1})])),_:1},8,["label"])):(0,u.Q3)("",!0),(0,u.bF)(g,{label:e.$t("cj.label.basic.status")},{default:(0,u.k6)((()=>[(0,u.bF)(_,{type:(0,s.R1)(m.$k)((0,s.R1)(R).status)},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.Tt)((0,s.R1)(R).status)),1)])),_:1},8,["type"])])),_:1},8,["label"]),(0,u.bF)(g,{label:e.$t("cj.label.basic.createTime")},{default:(0,u.k6)((()=>[(0,u.eW)((0,b.v_)((0,s.R1)(m.BU)((0,s.R1)(R).createTime)),1)])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])),[[X,(0,s.R1)(j)]]),(0,u.bF)(T,{label:e.$t("cj.tabs.component"),name:"component"},{default:(0,u.k6)((()=>[(0,u.bF)(Re,{networkId:Number((0,s.R1)(l).params.id)},null,8,["networkId"])])),_:1},8,["label"]),(0,u.bF)(T,{label:e.$t("cj.tabs.config"),name:"second"},{default:(0,u.k6)((()=>[(0,u.bF)(w.A,{allocateType:1,allocateId:Number((0,s.R1)(l).params.id)},null,8,["allocateId"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1})])}}});const Ie=(0,pe.A)(he,[["__scopeId","data-v-099a1d64"]]);var Fe=Ie},7063:function(e,t,l){l(4974),l(3568)},8830:function(e,t,l){l.d(t,{A:function(){return d}});var a=l(6918);const n={t:"1745291696880",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"25438",width:"200",height:"200"};function o(e,t){return(0,a.uX)(),(0,a.CE)("svg",n,t[0]||(t[0]=[(0,a.Lk)("path",{d:"M170.666667 42.666667C123.306667 42.666667 85.333333 80.64 85.333333 128L85.333333 298.666667C85.333333 346.026667 123.306667 384 170.666667 384L42.666667 384 42.666667 469.333333 554.666667 469.333333 554.666667 384 426.666667 384C474.026667 384 512 346.026667 512 298.666667L512 128C512 80.64 474.026667 42.666667 426.666667 42.666667L170.666667 42.666667M170.666667 128 426.666667 128 426.666667 298.666667 170.666667 298.666667 170.666667 128M128 554.666667 128 768 128 853.333333 426.666667 853.333333 426.666667 768 213.333333 768 213.333333 554.666667 128 554.666667M597.333333 554.666667C549.973333 554.666667 512 592.64 512 640L512 810.666667C512 858.026667 549.973333 896 597.333333 896L469.333333 896 469.333333 981.333333 981.333333 981.333333 981.333333 896 853.333333 896C900.693333 896 938.666667 858.026667 938.666667 810.666667L938.666667 640C938.666667 592.64 900.693333 554.666667 853.333333 554.666667L597.333333 554.666667M597.333333 640 853.333333 640 853.333333 810.666667 597.333333 810.666667 597.333333 640Z","p-id":"25439"},null,-1)]))}var r=l(3508);const i={},c=(0,r.A)(i,[["render",o]]);var d=c},8882:function(e,t,l){l.d(t,{A:function(){return d}});var a=l(6918);const n={t:"1745290465121",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11419",width:"200",height:"200"};function o(e,t){return(0,a.uX)(),(0,a.CE)("svg",n,t[0]||(t[0]=[(0,a.Lk)("path",{d:"M512 0c282.7776 0 512 229.2224 512 512 0 282.7776-229.2224 512-512 512C229.2224 1024 0 794.7776 0 512 0 229.2224 229.2224 0 512 0z m0 51.2C257.501867 51.2 51.2 257.501867 51.2 512s206.301867 460.8 460.8 460.8 460.8-206.301867 460.8-460.8S766.498133 51.2 512 51.2z m217.6 691.2a12.8 12.8 0 1 1 0 25.6h-435.2a12.8 12.8 0 1 1 0-25.6h435.2zM614.4 678.4a12.8 12.8 0 1 1 0 25.6H409.6a12.8 12.8 0 1 1 0-25.6h204.8zM742.4 256a25.6 25.6 0 0 1 25.6 25.6V614.4a25.6 25.6 0 0 1-25.6 25.6h-460.8A25.6 25.6 0 0 1 256 614.4V281.6a25.6 25.6 0 0 1 25.6-25.6h460.8z m-19.2 25.6h-422.4c-10.615467 0-19.2 8.6016-19.2 19.217067v294.365866c0 10.615467 8.6016 19.217067 19.2 19.217067h422.4c10.615467 0 19.2-8.6016 19.2-19.217067V300.817067c0-10.615467-8.6016-19.217067-19.2-19.217067z m-71.355733 95.112533c28.791467 0.802133 47.598933 14.199467 56.388266 40.209067l-28.791466 6.6048c-3.9936-13.602133-13.192533-20.821333-27.5968-21.6064-20.411733 1.194667-31.197867 15.394133-32.4096 42.5984 0.802133 27.5968 11.605333 42.205867 32.4096 43.810133 16.384-0.4096 25.992533-10.205867 28.791466-29.405866l28.808534 8.994133c-6.8096 30.0032-26.0096 45.0048-57.6 45.0048-40.789333-1.9968-62.208-24.797867-64.2048-68.4032 1.9968-42.8032 23.3984-65.399467 64.2048-67.805867z m-164.4032 1.809067l50.397866 80.9984c0.4096 0.802133 1.006933 1.792 1.809067 3.003733 2.798933 4.4032 4.590933 7.799467 5.393067 10.1888v-0.597333a238.216533 238.216533 0 0 1-0.597334-19.797333V378.538667h28.194134v131.9936H542.037333l-52.189866-82.7904-7.202134-11.997867c0.392533 5.597867 0.597333 12.987733 0.597334 22.186667v72.6016h-28.194134V378.538667h32.392534z m-108.014934 105.557333c0-0.3584 0.4096-1.365333 1.211734-2.952533 0.802133-2.013867 1.792-5.410133 3.003733-10.205867l29.405867-92.398933H445.44l-49.800533 131.9936h-33.604267L311.637333 378.538667h32.392534l31.214933 92.398933c0.802133 2.9696 1.706667 5.922133 2.679467 8.840533l1.501866 4.317867z",fill:"#323132","p-id":"11420"},null,-1)]))}var r=l(3508);const i={},c=(0,r.A)(i,[["render",o]]);var d=c}}]);