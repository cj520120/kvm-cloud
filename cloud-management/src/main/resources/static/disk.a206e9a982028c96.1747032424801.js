"use strict";(self["webpackChunkkvm_cloud_web"]=self["webpackChunkkvm_cloud_web"]||[]).push([[532],{573:function(e,a,t){t.d(a,{fR:function(){return v}});var l=t(6918),o=t(4673),n=t(1654),i=t(2267);const r=(0,i.b_)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:(0,i.jq)(String),default:"solid"}});var u=t(7860),s=t(7636);const c=(0,l.pM)({name:"ElDivider"}),d=(0,l.pM)({...c,props:r,setup(e){const a=e,t=(0,s.DU)("divider"),i=(0,l.EW)((()=>t.cssVar({"border-style":a.borderStyle})));return(e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,o.C4)([(0,n.R1)(t).b(),(0,n.R1)(t).m(e.direction)]),style:(0,o.Tr)((0,n.R1)(i)),role:"separator"},[e.$slots.default&&"vertical"!==e.direction?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)([(0,n.R1)(t).e("text"),(0,n.R1)(t).is(e.contentPosition)])},[(0,l.RG)(e.$slots,"default")],2)):(0,l.Q3)("v-if",!0)],6))}});var b=(0,u.A)(d,[["__file","divider.vue"]]),p=t(713);const v=(0,p.GU)(b)},3364:function(e,a,t){t.d(a,{A:function(){return o}});var l=t(6918);function o(e,a,t,o){const n=(0,l.WQ)("websocket");(0,l.sV)((()=>{n.subscribe_notify(e,(e=>{if(2===e.type){let a=e.data;0==a.code?t(a.data):4000001==a.code&&o(e.id)}})),n.subscribe_connect_notify(e,(()=>{a()})),n.init(),a()})),(0,l.xo)((()=>{n.unsubscribe_notify(e),n.unsubscribe_connect_notify(e)}))}},3568:function(e,a,t){t(4974)},3604:function(e,a,t){t.r(a),t.d(a,{default:function(){return A}});var l=t(6845),o=(t(4974),t(8206),t(9464)),n=(t(2708),t(6390)),i=(t(8145),t(2889)),r=(t(2914),t(3295)),u=(t(9994),t(6951)),s=(t(5560),t(4279)),c=(t(3110),t(6672),t(7477)),d=(t(6788),t(1177),t(5143)),b=(t(493),t(7836)),p=(t(3020),t(7255)),v=(t(756),t(9622),t(6622)),m=(t(4005),t(7233),t(5567),t(5286),t(8068),t(6918)),g=t(1654),f=t(4673),k=t(4878),h=t(7770),_=t(7861),R=t(2303),y=t(6555),j=t(7898),$=(t(7191),t(1210),t(1421)),w=t(7445),F=t(8180);t(6447);const W={class:"dialog-footer"};var C={__name:"EditDiskDialog",emits:["on-create-disk"],setup(e,{expose:a,emit:t}){const l=(0,g.KR)(!1),o=t,{t:n}=(0,w.s9)(),i=(0,g.Kh)({description:"",storageId:0,capacity:100}),r=(0,g.Kh)({description:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.description")}),trigger:["blur","change"]}],storageId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}],capacity:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:n("cj.tooltip.global.must_number",{name:n("cj.label.disk.capacity")}),trigger:["blur","change"]}]}),u=(0,g.KR)(null),s=(0,g.KR)([]);function c(){u.value.validate((e=>{if(e){let e="on-create-disk",a=k.Ke,t={description:i.description,storageId:i.storageId,volumeSize:i.capacity};a(t).then((a=>{0===a.code?(l.value=!1,o(e,a.data,!0),(0,$.zo)(a)):(0,$.Ue)(a)}))}else(0,F.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return a({open:()=>{l.value=!0,i.description="",i.storageId=0,i.capacity=100,s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0}],(0,h.ho)().then((e=>{let{data:a=[]}=e||{};s.value=a.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...s.value]}))}}),(e,a)=>{const t=p.WK,o=d.xE,n=v.P9,k=v.AV,h=d.US,_=b.S2,R=j.kZ;return(0,m.uX)(),(0,m.Wv)(R,{modelValue:(0,g.R1)(l),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,g.i9)(l)?l.value=e:null),title:e.$t("cj.dialog.disk.create"),width:"600","close-on-click-modal":!1},{footer:(0,m.k6)((()=>[(0,m.Lk)("div",W,[(0,m.bF)(_,{onClick:a[3]||(a[3]=e=>l.value=!1)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,m.bF)(_,{type:"primary",onClick:c},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,m.k6)((()=>[(0,m.bF)(h,{ref_key:"disk_ref",ref:u,model:(0,g.R1)(i),"label-width":"auto",rules:(0,g.R1)(r)},{default:(0,m.k6)((()=>[(0,m.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,m.k6)((()=>[(0,m.bF)(t,{modelValue:(0,g.R1)(i).description,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,g.R1)(i).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(o,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,m.k6)((()=>[(0,m.bF)(k,{modelValue:(0,g.R1)(i).storageId,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,g.R1)(i).storageId=e),style:{width:"240px"}},{default:(0,m.k6)((()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,g.R1)(s),(a=>((0,m.uX)(),(0,m.Wv)(n,{key:a.value,label:a.hasLanguage?e.$t(a.label):a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(o,{label:e.$t("cj.label.disk.capacity"),prop:"capacity"},{default:(0,m.k6)((()=>[(0,m.bF)(t,{modelValue:(0,g.R1)(i).capacity,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,g.R1)(i).capacity=e),modelModifiers:{number:!0}},{append:(0,m.k6)((()=>a[5]||(a[5]=[(0,m.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const I=C;var x=I,V=t(3364),T=t(9451),X=t(7774);t(5280);const U={key:1};var E=Object.assign({name:"Disk"},{__name:"Disk",setup(e){const a=(0,T.rd)(),t=(0,g.KR)(null),{t:j}=(0,w.s9)(),F=(0,g.KR)({keyword:"",status:-1,storageId:0,templateId:0,no:1,size:10}),W=(0,g.KR)([{label:"cj.label.select.all",value:0,hasLanguage:!0}]),C=(0,g.KR)([{label:"cj.label.select.all",value:0,hasLanguage:!0}]),I=(0,g.KR)(!1),E=(0,g.KR)({data:[],total:0});function z(){S(),(0,h.ho)().then((e=>{let{data:a=[]}=e||{};W.value=a.map((e=>({label:e.description,value:e.storageId}))),W.value=[{label:"cj.label.select.all",value:0,hasLanguage:!0},...W.value]})),(0,_.Gj)().then((e=>{let{data:a=[]}=e||{};C.value=a.map((e=>({label:e.name,value:e.templateId}))),C.value=[{label:"cj.label.select.all",value:0,hasLanguage:!0},...C.value]}))}function K(e){F.value.no=e,S()}function A(e){F.value.size=e,S()}function S(){I.value=!0;let e={...F.value};e.storageId<=0&&delete e.storageId,e.templateId<=0&&delete e.templateId,e.status<0&&delete e.status,(0,k.u_)(e).then((e=>{const{list:a=[],total:t=0}=e.data||{};E.value={data:a,total:t}})).catch((()=>{E.value={data:[],total:0}})).finally((()=>{I.value=!1}))}function L(){t.value.open()}function D(e,t){a.push({path:`/disk/${t.volumeId}`})}function q(e){a.push({path:`/vm/${e.guest.guestId}`})}function B(e,a=!1){let t=E.value.data.findIndex((a=>a.volumeId===e.volumeId));-1!==t?Object.assign(E.value.data[t],e):a&&(E.value.data.push(e),E.value.total++)}function Q(e){let a=E.value.data.findIndex((a=>a.volumeId===e));-1!==a&&(E.value.data.splice(a,1),E.value.total--)}function P(e,a){X.s.confirm(j("cj.dialog.disk.deleteConfirm"),"Warning",{confirmButtonText:j("cj.btn.basic.confirm"),cancelButtonText:j("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,k.RN)({volumeId:a.volumeId}).then((e=>{0===e.code?(B(e.data),(0,$.zo)(e)):(0,$.Ue)(e)}))}))}return(0,V.A)("disk_list",z,B,Q),(e,a)=>{const k=v.P9,h=v.AV,_=d.xE,$=p.WK,w=b.S2,V=d.US,T=n.o8,X=c.u,z=s.MF,Q=s.TS,M=u.ve,O=r.R7,G=i.C4,H=n.Up,N=o.aQ,Z=l.L;return(0,m.uX)(),(0,m.CE)("div",null,[(0,m.bF)(V,{model:(0,g.R1)(F),inline:"",size:"small"},{default:(0,m.k6)((()=>[(0,m.bF)(_,{label:e.$t("cj.label.storage.label")},{default:(0,m.k6)((()=>[(0,m.bF)(h,{modelValue:(0,g.R1)(F).storageId,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,g.R1)(F).storageId=e),placeholder:"",filterable:""},{default:(0,m.k6)((()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,g.R1)(W),(a=>((0,m.uX)(),(0,m.Wv)(k,{key:a.value,label:a.hasLanguage?e.$t(a.label):a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(_,{label:e.$t("cj.label.template.label")},{default:(0,m.k6)((()=>[(0,m.bF)(h,{modelValue:(0,g.R1)(F).templateId,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,g.R1)(F).templateId=e),placeholder:"",filterable:""},{default:(0,m.k6)((()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,g.R1)(C),(a=>((0,m.uX)(),(0,m.Wv)(k,{key:a.value,label:a.hasLanguage?e.$t(a.label):a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(_,{label:e.$t("cj.label.basic.status")},{default:(0,m.k6)((()=>[(0,m.bF)(h,{modelValue:(0,g.R1)(F).status,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,g.R1)(F).status=e),placeholder:"",filterable:""},{default:(0,m.k6)((()=>[(0,m.bF)(k,{label:(0,g.R1)(j)("cj.label.select.all"),value:-1},null,8,["label"]),(0,m.bF)(k,{label:"Ready",value:1}),(0,m.bF)(k,{label:"Creating",value:0}),(0,m.bF)(k,{label:"Cloning",value:4}),(0,m.bF)(k,{label:"CreateTemplate",value:5}),(0,m.bF)(k,{label:"Migrating",value:6}),(0,m.bF)(k,{label:"Resizing",value:7}),(0,m.bF)(k,{label:"Deleting",value:8}),(0,m.bF)(k,{label:"Error",value:9})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(_,{label:e.$t("cj.label.basic.keyword")},{default:(0,m.k6)((()=>[(0,m.bF)($,{modelValue:(0,g.R1)(F).keyword,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,g.R1)(F).keyword=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,m.bF)(_,null,{default:(0,m.k6)((()=>[(0,m.bF)(w,{type:"primary",onClick:S,icon:(0,g.R1)(R.Search),disabled:(0,g.R1)(I)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon","disabled"]),(0,m.bF)(w,{type:"primary",onClick:L,icon:(0,g.R1)(R.DocumentAdd)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"]),(0,m.bo)(((0,m.uX)(),(0,m.Wv)(H,{data:(0,g.R1)(E).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,m.k6)((()=>[(0,m.bF)(T,{label:e.$t("cj.label.basic.id"),prop:"volumeId"},null,8,["label"]),(0,m.bF)(T,{label:e.$t("cj.label.basic.name"),prop:"name","min-width":"350","show-overflow-tooltip":""},null,8,["label"]),(0,m.bF)(T,{label:e.$t("cj.label.basic.description"),prop:"description","min-width":"150","show-overflow-tooltip":""},null,8,["label"]),(0,m.bF)(T,{label:e.$t("cj.label.basic.type")},{default:(0,m.k6)((e=>[(0,m.bF)(X,null,{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.row.type),1)])),_:2},1024)])),_:1},8,["label"]),(0,m.bF)(T,{prop:"capacity",label:e.$t("cj.label.disk.capacity")},{default:(0,m.k6)((a=>[(0,m.bF)(O,{placement:"bottom",effect:"light"},{content:(0,m.k6)((()=>[(0,m.bF)(Q,{column:1,border:""},{default:(0,m.k6)((()=>[(0,m.bF)(z,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)((0,g.R1)(y.yv)(a.row.allocation)),1)])),_:2},1032,["label"]),(0,m.bF)(z,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)((0,g.R1)(y.yv)(a.row.capacity)),1)])),_:2},1032,["label"])])),_:2},1024)])),default:(0,m.k6)((()=>[(0,m.bF)(M,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,g.R1)(y.Nj)(a.row.allocation,a.row.capacity)),status:"success"},null,8,["percentage"])])),_:2},1024)])),_:1},8,["label"]),(0,m.bF)(T,{label:e.$t("cj.label.vm.label"),prop:"description","min-width":"150","show-overflow-tooltip":""},{default:(0,m.k6)((a=>[a.row.guest?((0,m.uX)(),(0,m.Wv)(O,{key:0,placement:"right",effect:"light"},{content:(0,m.k6)((()=>[(0,m.bF)(Q,{column:1,border:""},{default:(0,m.k6)((()=>[(0,m.bF)(z,{label:e.$t("cj.label.basic.name"),"label-align":"right"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(a.row.guest.name),1)])),_:2},1032,["label"]),(0,m.bF)(z,{label:e.$t("cj.label.basic.description"),"label-align":"right"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(a.row.guest.description),1)])),_:2},1032,["label"]),(0,m.bF)(z,{label:e.$t("cj.label.network.nic.ip"),"label-align":"right"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(a.row.guest.guestIp),1)])),_:2},1032,["label"]),(0,m.bF)(z,{label:e.$t("cj.label.vm.label"),"label-align":"right"},{default:(0,m.k6)((()=>[(0,m.bF)(X,null,{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)((0,g.R1)(y.WH)(a.row.guest.bootstrapType)),1)])),_:2},1024)])),_:2},1032,["label"]),a.row.guestId>0?((0,m.uX)(),(0,m.Wv)(z,{key:0,label:e.$t("cj.label.disk.driver"),"label-align":"right"},{default:(0,m.k6)((()=>[(0,m.bF)(X,null,{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(a.row.deviceDriver),1)])),_:2},1024)])),_:2},1032,["label"])):(0,m.Q3)("",!0)])),_:2},1024)])),default:(0,m.k6)((()=>[(0,m.bF)(G,{onClick:e=>q(a.row),type:"primary"},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(a.row.guest.description),1)])),_:2},1032,["onClick"])])),_:2},1024)):((0,m.uX)(),(0,m.CE)("span",U,"-"))])),_:1},8,["label"]),(0,m.bF)(T,{prop:"status",label:e.$t("cj.label.basic.status")},{default:(0,m.k6)((e=>[(0,m.bF)(X,{type:(0,g.R1)(y.QJ)(e.row.status)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)((0,g.R1)(y._k)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"]),(0,m.bF)(T,{prop:"createTime",label:e.$t("cj.label.basic.createTime"),"min-width":"150","show-overflow-tooltip":""},{default:(0,m.k6)((e=>[(0,m.eW)((0,f.v_)((0,g.R1)(y.BU)(e.row.createTime)),1)])),_:1},8,["label"]),(0,m.bF)(T,{label:e.$t("cj.label.basic.operation"),"min-width":"250","show-overflow-tooltip":""},{default:(0,m.k6)((a=>[(0,m.bF)(w,{size:"small",type:"",onClick:e=>D(a.$index,a.row),icon:(0,g.R1)(R.View)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),[1,9,10].includes(a.row.status)&&0===a.row.guestId?((0,m.uX)(),(0,m.Wv)(w,{key:0,size:"small",type:"danger",onClick:e=>P(a.$index,a.row),icon:(0,g.R1)(R.Delete)},{default:(0,m.k6)((()=>[(0,m.eW)((0,f.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])):(0,m.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])),[[Z,(0,g.R1)(I)]]),a[6]||(a[6]=(0,m.Lk)("br",null,null,-1)),(0,m.bF)(N,{size:"small",background:"",onCurrentChange:K,onSizeChange:A,"current-page":(0,g.R1)(F).no,"onUpdate:currentPage":a[4]||(a[4]=e=>(0,g.R1)(F).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,g.R1)(F).size,"onUpdate:pageSize":a[5]||(a[5]=e=>(0,g.R1)(F).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,g.R1)(E).total},null,8,["current-page","page-size","total"]),(0,m.bF)(x,{ref_key:"editDiskDialogRef",ref:t,onOnCreateDisk:B,onOnUpdateDisk:B},null,512)])}}}),z=t(3508);const K=(0,z.A)(E,[["__scopeId","data-v-25c10128"]]);var A=K},4878:function(e,a,t){t.d(a,{Di:function(){return c},Ke:function(){return r},RN:function(){return b},TI:function(){return u},UQ:function(){return n},Vy:function(){return d},Wq:function(){return s},Xf:function(){return p},e9:function(){return o},u_:function(){return i}});var l=t(3162);const o=(e={})=>(0,l.A)({url:"api/volume/info",params:e}),n=(e={})=>(0,l.A)({url:"api/volume/not/attach/all",params:e}),i=(e={})=>(0,l.A)({url:"api/volume/search",params:e}),r=(e={})=>(0,l.A)({url:"api/volume/create",params:e,method:"put"}),u=(e={})=>(0,l.A)({url:"api/volume/migrate",data:e,method:"PUT"}),s=(e={})=>(0,l.A)({url:"api/volume/resize",params:e,method:"POST"}),c=(e={})=>(0,l.A)({url:"api/volume/clone",params:e,method:"PUT"}),d=(e={})=>(0,l.A)({url:"api/volume/template/create",params:e,method:"put"}),b=(e={})=>(0,l.A)({url:"api/volume/destroy",params:e,method:"delete"}),p=(e={})=>(0,l.A)({url:"api/volume/all",params:e})},5560:function(e,a,t){t(4974)},6192:function(e,a,t){t.d(a,{IO:function(){return _}});var l=t(6918),o=t(4673),n=t(1654),i=t(387),r=t(573),u=t(2303),s=t(2267),c=t(6663);const d=(0,s.b_)({icon:{type:c.Ze,default:()=>u.Back},title:String,content:{type:String,default:""}}),b={back:()=>!0};var p=t(7860),v=t(2360),m=t(7636);const g=(0,l.pM)({name:"ElPageHeader"}),f=(0,l.pM)({...g,props:d,emits:b,setup(e,{emit:a}){const{t:t}=(0,v.Ym)(),u=(0,m.DU)("page-header");function s(){a("back")}return(e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,o.C4)([(0,n.R1)(u).b(),{[(0,n.R1)(u).m("has-breadcrumb")]:!!e.$slots.breadcrumb,[(0,n.R1)(u).m("has-extra")]:!!e.$slots.extra,[(0,n.R1)(u).is("contentful")]:!!e.$slots.default}])},[e.$slots.breadcrumb?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)((0,n.R1)(u).e("breadcrumb"))},[(0,l.RG)(e.$slots,"breadcrumb")],2)):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("header"))},[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("left"))},[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("back")),role:"button",tabindex:"0",onClick:s},[e.icon||e.$slots.icon?((0,l.uX)(),(0,l.CE)("div",{key:0,"aria-label":e.title||(0,n.R1)(t)("el.pageHeader.title"),class:(0,o.C4)((0,n.R1)(u).e("icon"))},[(0,l.RG)(e.$slots,"icon",{},(()=>[e.icon?((0,l.uX)(),(0,l.Wv)((0,n.R1)(i.tk),{key:0},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.icon)))])),_:1})):(0,l.Q3)("v-if",!0)]))],10,["aria-label"])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("title"))},[(0,l.RG)(e.$slots,"title",{},(()=>[(0,l.eW)((0,o.v_)(e.title||(0,n.R1)(t)("el.pageHeader.title")),1)]))],2)],2),(0,l.bF)((0,n.R1)(r.fR),{direction:"vertical"}),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).e("content"))},[(0,l.RG)(e.$slots,"content",{},(()=>[(0,l.eW)((0,o.v_)(e.content),1)]))],2)],2),e.$slots.extra?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)((0,n.R1)(u).e("extra"))},[(0,l.RG)(e.$slots,"extra")],2)):(0,l.Q3)("v-if",!0)],2),e.$slots.default?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,o.C4)((0,n.R1)(u).e("main"))},[(0,l.RG)(e.$slots,"default")],2)):(0,l.Q3)("v-if",!0)],2))}});var k=(0,p.A)(f,[["__file","page-header.vue"]]),h=t(713);const _=(0,h.GU)(k)},6951:function(e,a,t){t.d(a,{ve:function(){return g}});t(5286),t(8068);var l=t(6918),o=t(4673),n=t(1654),i=t(387),r=t(2303),u=t(2267);const s=(0,u.b_)({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:(0,u.jq)(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:(0,u.jq)([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:(0,u.jq)(Function),default:e=>`${e}%`}});var c=t(7860),d=t(7636);const b=(0,l.pM)({name:"ElProgress"}),p=(0,l.pM)({...b,props:s,setup(e){const a=e,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},u=(0,d.DU)("progress"),s=(0,l.EW)((()=>{const e={width:`${a.percentage}%`,animationDuration:`${a.duration}s`},t=$(a.percentage);return t.includes("gradient")?e.background=t:e.backgroundColor=t,e})),c=(0,l.EW)((()=>(a.strokeWidth/a.width*100).toFixed(1))),b=(0,l.EW)((()=>["circle","dashboard"].includes(a.type)?Number.parseInt(""+(50-Number.parseFloat(c.value)/2),10):0)),p=(0,l.EW)((()=>{const e=b.value,t="dashboard"===a.type;return`\n          M 50 50\n          m 0 ${t?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${t?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${t?"":"-"}${2*e}\n          `})),v=(0,l.EW)((()=>2*Math.PI*b.value)),m=(0,l.EW)((()=>"dashboard"===a.type?.75:1)),g=(0,l.EW)((()=>{const e=-1*v.value*(1-m.value)/2;return`${e}px`})),f=(0,l.EW)((()=>({strokeDasharray:`${v.value*m.value}px, ${v.value}px`,strokeDashoffset:g.value}))),k=(0,l.EW)((()=>({strokeDasharray:`${v.value*m.value*(a.percentage/100)}px, ${v.value}px`,strokeDashoffset:g.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),h=(0,l.EW)((()=>{let e;return e=a.color?$(a.percentage):t[a.status]||t.default,e})),_=(0,l.EW)((()=>"warning"===a.status?r.WarningFilled:"line"===a.type?"success"===a.status?r.CircleCheck:r.CircleClose:"success"===a.status?r.Check:r.Close)),R=(0,l.EW)((()=>"line"===a.type?12+.4*a.strokeWidth:.111111*a.width+2)),y=(0,l.EW)((()=>a.format(a.percentage)));function j(e){const a=100/e.length,t=e.map(((e,t)=>(0,o.Kg)(e)?{color:e,percentage:(t+1)*a}:e));return t.sort(((e,a)=>e.percentage-a.percentage))}const $=e=>{var t;const{color:l}=a;if((0,o.Tn)(l))return l(e);if((0,o.Kg)(l))return l;{const a=j(l);for(const t of a)if(t.percentage>e)return t.color;return null==(t=a[a.length-1])?void 0:t.color}};return(e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,o.C4)([(0,n.R1)(u).b(),(0,n.R1)(u).m(e.type),(0,n.R1)(u).is(e.status),{[(0,n.R1)(u).m("without-text")]:!e.showText,[(0,n.R1)(u).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)((0,n.R1)(u).b("bar"))},[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(u).be("bar","outer")),style:(0,o.Tr)({height:`${e.strokeWidth}px`})},[(0,l.Lk)("div",{class:(0,o.C4)([(0,n.R1)(u).be("bar","inner"),{[(0,n.R1)(u).bem("bar","inner","indeterminate")]:e.indeterminate},{[(0,n.R1)(u).bem("bar","inner","striped")]:e.striped},{[(0,n.R1)(u).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:(0,o.Tr)((0,n.R1)(s))},[(e.showText||e.$slots.default)&&e.textInside?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)((0,n.R1)(u).be("bar","innerText"))},[(0,l.RG)(e.$slots,"default",{percentage:e.percentage},(()=>[(0,l.Lk)("span",null,(0,o.v_)((0,n.R1)(y)),1)]))],2)):(0,l.Q3)("v-if",!0)],6)],6)],2)):((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,o.C4)((0,n.R1)(u).b("circle")),style:(0,o.Tr)({height:`${e.width}px`,width:`${e.width}px`})},[((0,l.uX)(),(0,l.CE)("svg",{viewBox:"0 0 100 100"},[(0,l.Lk)("path",{class:(0,o.C4)((0,n.R1)(u).be("circle","track")),d:(0,n.R1)(p),stroke:`var(${(0,n.R1)(u).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,n.R1)(c),fill:"none",style:(0,o.Tr)((0,n.R1)(f))},null,14,["d","stroke","stroke-linecap","stroke-width"]),(0,l.Lk)("path",{class:(0,o.C4)((0,n.R1)(u).be("circle","path")),d:(0,n.R1)(p),stroke:(0,n.R1)(h),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,n.R1)(c),style:(0,o.Tr)((0,n.R1)(k))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),!e.showText&&!e.$slots.default||e.textInside?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,o.C4)((0,n.R1)(u).e("text")),style:(0,o.Tr)({fontSize:`${(0,n.R1)(R)}px`})},[(0,l.RG)(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?((0,l.uX)(),(0,l.Wv)((0,n.R1)(i.tk),{key:1},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)((0,n.R1)(_))))])),_:1})):((0,l.uX)(),(0,l.CE)("span",{key:0},(0,o.v_)((0,n.R1)(y)),1))]))],6))],10,["aria-valuenow"]))}});var v=(0,c.A)(p,[["__file","progress.vue"]]),m=t(713);const g=(0,m.GU)(v)},7063:function(e,a,t){t(4974),t(3568)},7412:function(e,a,t){t.d(a,{A:function(){return s}});var l=t(6918);const o={t:"1745291574744",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"20390",width:"200",height:"200"};function n(e,a){return(0,l.uX)(),(0,l.CE)("svg",o,a[0]||(a[0]=[(0,l.Lk)("path",{d:"M204.8 307.2l307.2 0 0-102.4-409.6 0 0 614.912 409.6 0 0-102.912-307.2 0 0-409.6zM307.2 409.6l307.2 0 0-153.6 307.2 256-307.2 256 0-153.6-307.2 0 0-204.8z","p-id":"20391"},null,-1)]))}var i=t(3508);const r={},u=(0,i.A)(r,[["render",n]]);var s=u},7770:function(e,a,t){t.d(a,{Lf:function(){return c},UC:function(){return i},Yr:function(){return r},dO:function(){return s},db:function(){return d},em:function(){return o},fC:function(){return b},ho:function(){return n},id:function(){return u},lh:function(){return p}});var l=t(3162);const o=(e={})=>(0,l.A)({url:"api/storage/info",params:e}),n=()=>(0,l.A)({url:"api/storage/all"}),i=(e={})=>(0,l.A)({url:"api/storage/search",params:e}),r=(e={})=>(0,l.A)({url:"api/storage/support/category/update",params:e,method:"post"}),u=(e={})=>(0,l.A)({url:"api/storage/create",params:e,method:"put"}),s=(e={})=>(0,l.A)({url:"api/storage/register",data:e,method:"POST"}),c=(e={})=>(0,l.A)({url:"api/storage/maintenance",data:e,method:"POST"}),d=(e={})=>(0,l.A)({url:"api/storage/migrate",data:e,method:"POST"}),b=(e={})=>(0,l.A)({url:"api/storage/clear",params:e,method:"delete"}),p=(e={})=>(0,l.A)({url:"api/storage/destroy",params:e,method:"delete"})},7861:function(e,a,t){t.d(a,{Gj:function(){return n},HU:function(){return u},Og:function(){return c},T7:function(){return o},Ve:function(){return s},bg:function(){return i},lH:function(){return r}});var l=t(3162);const o=(e={})=>(0,l.A)({url:"api/template/info",params:e}),n=()=>(0,l.A)({url:"api/template/all"}),i=(e={})=>(0,l.A)({url:"api/template/search",params:e}),r=(e={})=>(0,l.A)({url:"api/template/create",params:e,method:"put"}),u=(e={})=>(0,l.A)({url:"api/template/download",data:e,method:"POST"}),s=(e={})=>(0,l.A)({url:"api/template/script",data:e,method:"POST"}),c=(e={})=>(0,l.A)({url:"api/template/destroy",params:e,method:"delete"})},9757:function(e,a,t){t.r(a),t.d(a,{default:function(){return ie}});var l=t(6845),o=(t(4974),t(8206),t(6192)),n=(t(7063),t(3295)),i=(t(9994),t(6951)),r=(t(5560),t(4279)),u=(t(3110),t(2889)),s=(t(2914),t(7477)),c=(t(6788),t(6672),t(7836)),d=(t(3020),t(5567),t(6918)),b=t(4673),p=t(1654),v=t(4878),m=t(6555),g=t(2303);const f={t:"1745290632537",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12529",width:"200",height:"200"};function k(e,a){return(0,d.uX)(),(0,d.CE)("svg",f,a[0]||(a[0]=[(0,d.Lk)("path",{d:"M950.857143 932.571429V310.857143q0-7.428571-5.428572-12.857143T932.571429 292.571429H310.857143q-7.428571 0-12.857143 5.428571T292.571429 310.857143v621.714286q0 7.428571 5.428571 12.857142t12.857143 5.428572h621.714286q7.428571 0 12.857142-5.428572t5.428572-12.857142z m73.142857-621.714286v621.714286q0 37.714286-26.857143 64.571428t-64.571428 26.857143H310.857143q-37.714286 0-64.571429-26.857143t-26.857143-64.571428V310.857143q0-37.714286 26.857143-64.571429t64.571429-26.857143h621.714286q37.714286 0 64.571428 26.857143t26.857143 64.571429z m-219.428571-219.428572v91.428572h-73.142858V91.428571q0-7.428571-5.428571-12.857142T713.142857 73.142857H91.428571q-7.428571 0-12.857142 5.428572T73.142857 91.428571v621.714286q0 7.428571 5.428572 12.857143t12.857142 5.428571h91.428572v73.142858H91.428571q-37.714286 0-64.571428-26.857143T0 713.142857V91.428571Q0 53.714286 26.857143 26.857143T91.428571 0h621.714286q37.714286 0 64.571429 26.857143t26.857143 64.571428z","p-id":"12530"},null,-1)]))}var h=t(3508);const _={},R=(0,h.A)(_,[["render",k]]);var y=R,j=t(9027),$=t(7412);const w={t:"1745290762878",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13487",width:"200",height:"200"};function F(e,a){return(0,d.uX)(),(0,d.CE)("svg",w,a[0]||(a[0]=[(0,d.Lk)("path",{d:"M410.816 673.514667L230.997333 853.333333H384v85.333334H85.333333V640h85.333334v153.002667l179.818666-179.84 60.330667 60.373333z m-53.632-256L170.666667 230.997333V384H85.333333V85.333333h298.666667v85.333334h-153.002667l186.517334 186.517333-60.330667 60.330667z m234.666667-45.696L793.002667 170.666667H640V85.333333h298.666667v298.666667h-85.333334v-153.002667l-201.152 201.173334-60.330666-60.373334z m67.029333 226.709333L853.333333 793.002667V640h85.333334v298.666667H640v-85.333334h153.002667l-194.474667-194.453333 60.352-60.352z",fill:"#000000","p-id":"13488"},null,-1)]))}const W={},C=(0,h.A)(W,[["render",F]]);var I=C,x=t(3364),V=t(7898),T=(t(7191),t(5143)),X=(t(493),t(9622),t(6622)),U=(t(4005),t(7233),t(5286),t(1210),t(8068),t(7770)),E=t(1421),z=t(7445),K=t(7774),A=t(8180);t(5280),t(6447);const S={class:"dialog-footer"};var L={__name:"MigrateDialog",emits:["on-update-disk"],setup(e,{expose:a,emit:t}){const l=(0,p.KR)(!1),o=t,{t:n}=(0,z.s9)(),i=(0,p.KR)({id:0,sourceStorageId:0,storageId:void 0}),r=(0,p.Kh)({storageId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}]}),u=(0,p.KR)([]),s=(0,p.KR)(null);function m(){s.value.validate((e=>{e?K.s.confirm(n("cj.dialog.disk.migrateConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.TI)({sourceVolumeId:i.value.id,storageId:i.value.storageId}).then((e=>{0===e.code?(l.value=!1,o("on-update-disk",e.data.source,!0),o("on-update-disk",e.data.migrate,!0),(0,E.zo)(e)):(0,E.Ue)(e)}))})):(0,A.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return a({open:(e,a)=>{i.value.id=e,i.value.sourceStorageId=a,i.value.storageId=void 0,l.value=!0,u.value=[],(0,U.ho)().then((e=>{let{data:a=[]}=e||{};u.value=a.filter((e=>e.storageId!==i.value.sourceStorageId&&1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),u.value=[...u.value]}))}}),(e,a)=>{const t=X.P9,o=X.AV,n=T.xE,v=T.US,g=c.S2,f=V.kZ;return(0,d.uX)(),(0,d.Wv)(f,{modelValue:(0,p.R1)(l),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,p.i9)(l)?l.value=e:null),title:e.$t("cj.dialog.disk.migrate"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",S,[(0,d.bF)(g,{onClick:a[1]||(a[1]=e=>l.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(g,{type:"primary",onClick:m},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(v,{ref_key:"disk_ref",ref:s,model:(0,p.R1)(i),"label-width":"auto",rules:(0,p.R1)(r)},{default:(0,d.k6)((()=>[(0,d.bF)(n,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,d.k6)((()=>[(0,d.bF)(o,{modelValue:(0,p.R1)(i).storageId,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,p.R1)(i).storageId=e),style:{width:"240px"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,p.R1)(u),(a=>((0,d.uX)(),(0,d.Wv)(t,{key:a.value,label:a.hasLanguage?e.$t(a.label):a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const D=L;var q=D,B=t(7255);t(756);const Q={class:"dialog-footer"};var P={__name:"CloneDialog",emits:["on-update-disk"],setup(e,{expose:a,emit:t}){const l=(0,p.KR)(!1),o=t,{t:n}=(0,z.s9)(),i=(0,p.Kh)({description:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.description")}),trigger:["blur","change"]}],storageId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}]}),r=(0,p.KR)({id:0,description:"",storageId:0}),u=(0,p.KR)(null),s=(0,p.KR)([]);function m(){u.value.validate((e=>{e?K.s.confirm(n("cj.dialog.disk.cloneConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Di)({sourceVolumeId:r.value.id,storageId:r.value.storageId,description:r.value.description}).then((e=>{0===e.code?(l.value=!1,o("on-update-disk",e.data.source,!0),o("on-update-disk",e.data.clone,!0),(0,E.zo)(e)):(0,E.Ue)(e)}))})):(0,A.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return a({open:e=>{r.value.id=e,r.value.description="",r.value.storageId=0,l.value=!0,s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0}],(0,U.ho)().then((e=>{let{data:a=[]}=e||{};s.value=a.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...s.value]}))}}),(e,a)=>{const t=B.WK,o=T.xE,n=X.P9,v=X.AV,g=T.US,f=c.S2,k=V.kZ;return(0,d.uX)(),(0,d.Wv)(k,{modelValue:(0,p.R1)(l),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,p.i9)(l)?l.value=e:null),title:e.$t("cj.dialog.disk.clone"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",Q,[(0,d.bF)(f,{onClick:a[2]||(a[2]=e=>l.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(f,{type:"primary",onClick:m},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(g,{ref_key:"disk_ref",ref:u,model:(0,p.R1)(r),"label-width":"auto",rules:(0,p.R1)(i)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:(0,p.R1)(r).description,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,p.R1)(r).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,d.bF)(o,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,d.k6)((()=>[(0,d.bF)(v,{modelValue:(0,p.R1)(r).storageId,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,p.R1)(r).storageId=e),style:{width:"240px"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,p.R1)(s),(a=>((0,d.uX)(),(0,d.Wv)(n,{key:a.value,label:a.hasLanguage?e.$t(a.label):a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const M=P;var O=M;const G={class:"dialog-footer"};var H={__name:"TemplateDialog",emits:["on-update-disk"],setup(e,{expose:a,emit:t}){const l=(0,p.KR)(!1),o=t,{t:n}=(0,z.s9)(),i=(0,p.KR)({id:0,description:""}),r=(0,p.KR)(null),u=(0,p.Kh)({description:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.description")}),trigger:["blur","change"]}]});function s(){r.value.validate((e=>{e?K.s.confirm(n("cj.dialog.disk.templateConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Vy)({volumeId:i.value.id,name:i.value.description}).then((e=>{0===e.code?(l.value=!1,o("on-update-disk",e.data,!0),(0,E.zo)(e)):(0,E.Ue)(e)}))})):(0,A.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return a({open:e=>{i.value.id=e,i.value.description="",l.value=!0}}),(e,a)=>{const t=B.WK,o=T.xE,n=T.US,v=c.S2,m=V.kZ;return(0,d.uX)(),(0,d.Wv)(m,{modelValue:(0,p.R1)(l),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,p.i9)(l)?l.value=e:null),title:e.$t("cj.dialog.disk.template"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",G,[(0,d.bF)(v,{onClick:a[1]||(a[1]=e=>l.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(v,{type:"primary",onClick:s},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(n,{ref_key:"disk_ref",ref:r,model:(0,p.R1)(i),"label-width":"auto",rules:(0,p.R1)(u)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:(0,p.R1)(i).description,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,p.R1)(i).description=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const N=H;var Z=N;const J={class:"dialog-footer"};var Y={__name:"ResizeDialog",emits:["on-update-disk"],setup(e,{expose:a,emit:t}){const l=(0,p.KR)(!1),o=t,{t:n}=(0,z.s9)(),i=(0,p.KR)({id:0,size:0}),r=(0,p.Kh)({size:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:n("cj.tooltip.global.must_number",{name:n("cj.label.disk.capacity")}),trigger:["blur","change"]}]}),u=(0,p.KR)(null);function s(){u.value.validate((e=>{e?K.s.confirm(n("cj.dialog.disk.resizeConfirm"),"Warning",{confirmButtonText:n("cj.btn.basic.confirm"),cancelButtonText:n("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Wq)({volumeId:i.value.id,size:i.value.size}).then((e=>{0===e.code?(l.value=!1,o("on-update-disk",e.data.source,!0),(0,E.zo)(e)):(0,E.Ue)(e)}))})):(0,A.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return a({open:e=>{i.value.id=e,i.value.size=10,l.value=!0}}),(e,a)=>{const t=B.WK,o=T.xE,n=T.US,v=c.S2,m=V.kZ;return(0,d.uX)(),(0,d.Wv)(m,{modelValue:(0,p.R1)(l),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,p.i9)(l)?l.value=e:null),title:e.$t("cj.dialog.disk.resize"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",J,[(0,d.bF)(v,{onClick:a[1]||(a[1]=e=>l.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(v,{type:"primary",onClick:s},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(n,{ref_key:"disk_ref",ref:u,model:(0,p.R1)(i),"label-width":"auto",rules:(0,p.R1)(r)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.disk.capacity"),prop:"size"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:(0,p.R1)(i).size,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,p.R1)(i).size=e),modelModifiers:{number:!0}},{append:(0,d.k6)((()=>a[3]||(a[3]=[(0,d.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const ee=Y;var ae=ee,te=t(9451);const le={class:"flex items-center"};var oe=Object.assign({name:"ViewDisk"},{__name:"ViewDisk",setup(e){const a=(0,te.rd)(),t=(0,te.lq)(),{t:f}=(0,z.s9)(),k=(0,p.KR)(!0),h=(0,p.KR)({id:0,status:0,stroage:{description:"",storageId:0},createTime:(new Date).getTime()}),_=(0,p.KR)(null),R=(0,p.KR)(null),w=(0,p.KR)(null),F=(0,p.KR)(null);function W(){a.back(-1)}function C(e){a.push({path:e})}function V(){_.value.open(h.value.volumeId,h.value.storageId)}function T(){R.value.open(h.value.volumeId)}function X(){w.value.open(h.value.volumeId)}function U(){F.value.open(h.value.volumeId)}function S(){K.s.confirm(f("cj.dialog.disk.deleteConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.RN)({volumeId:h.value.volumeId}).then((e=>{0===e.code?(L(e.data),(0,E.zo)(e)):(0,E.Ue)(e)}))}))}function L(e){e.volumeId===h.value.volumeId&&Object.assign(h.value,e)}return(0,x.A)("disk_detail",(()=>{k.value=!0,(0,v.e9)({volumeId:t.params.id}).then((e=>{0===e.code?h.value={...e.data}:(0,A.nk)({type:"error",message:e.message})})).finally((()=>{k.value=!1}))}),(e=>{L(e)}),(e=>{e===h.value.volumeId&&W()})),(e,a)=>{const t=c.S2,v=r.MF,f=s.u,x=u.C4,E=r.TS,z=i.ve,K=n.R7,A=o.IO,D=l.L;return(0,d.uX)(),(0,d.CE)("div",null,[(0,d.bF)(A,{onBack:W},{content:(0,d.k6)((()=>[(0,d.Lk)("span",null,(0,b.v_)(e.$t("cj.tabs.disk")),1)])),extra:(0,d.k6)((()=>[(0,d.Lk)("div",le,[1===(0,p.R1)(h).status?((0,d.uX)(),(0,d.Wv)(t,{key:0,type:"",onClick:U,icon:I},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.disk.resize")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,p.R1)(h).status?((0,d.uX)(),(0,d.Wv)(t,{key:1,type:"primary",onClick:X,icon:j.A},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.disk.createTemplate")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,p.R1)(h).status?((0,d.uX)(),(0,d.Wv)(t,{key:2,type:"primary",onClick:T,icon:y},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.disk.clone")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,p.R1)(h).status?((0,d.uX)(),(0,d.Wv)(t,{key:3,type:"warning",onClick:V,icon:$.A},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.migrate")),1)])),_:1})):(0,d.Q3)("",!0),[1,9,10].includes((0,p.R1)(h).status)&&0===(0,p.R1)(h).guestId?((0,d.uX)(),(0,d.Wv)(t,{key:4,type:"danger",onClick:S,icon:(0,p.R1)(g.Delete)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)(e.$t("cj.btn.basic.delete")),1)])),_:1},8,["icon"])):(0,d.Q3)("",!0)])])),default:(0,d.k6)((()=>[(0,d.bo)(((0,d.uX)(),(0,d.Wv)(E,{border:"",column:2,style:{"margin-top":"10px"}},{default:(0,d.k6)((()=>[(0,d.bF)(v,{label:e.$t("cj.label.basic.id")},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).volumeId),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.name")},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).name),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.path")},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).path),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.description")},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).description),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.type")},{default:(0,d.k6)((()=>[(0,d.bF)(f,null,{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).type),1)])),_:1})])),_:1},8,["label"]),(0,p.R1)(h).host?((0,d.uX)(),(0,d.Wv)(v,{key:0,label:e.$t("cj.label.host.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:a[0]||(a[0]=e=>C(`/host/${(0,p.R1)(h).hostId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).host.displayName),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,p.R1)(h).template?((0,d.uX)(),(0,d.Wv)(v,{key:1,label:e.$t("cj.label.template.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:a[1]||(a[1]=e=>C(`/template/${(0,p.R1)(h).template.templateId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).template.name),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,p.R1)(h).guest?((0,d.uX)(),(0,d.Wv)(v,{key:2,label:e.$t("cj.label.vm.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:a[2]||(a[2]=e=>C(`/vm/${(0,p.R1)(h).guest.guestId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).guest.description),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,p.R1)(h).storage?((0,d.uX)(),(0,d.Wv)(v,{key:3,label:e.$t("cj.label.storage.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:a[3]||(a[3]=e=>C(`/storage/${(0,p.R1)(h).storage.storageId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(h).storage.description),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,d.bF)(v,{label:e.$t("cj.label.disk.capacity")},{default:(0,d.k6)((()=>[(0,d.bF)(K,{placement:"bottom",effect:"light"},{content:(0,d.k6)((()=>[(0,d.bF)(E,{column:1,border:""},{default:(0,d.k6)((()=>[(0,d.bF)(v,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(m.yv)((0,p.R1)(h).allocation)),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(m.yv)((0,p.R1)(h).capacity)),1)])),_:1},8,["label"])])),_:1})])),default:(0,d.k6)((()=>[(0,d.bF)(z,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,p.R1)(m.Nj)((0,p.R1)(h).allocation,(0,p.R1)(h).capacity)),status:"success"},null,8,["percentage"])])),_:1})])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.status")},{default:(0,d.k6)((()=>[(0,d.bF)(f,{type:(0,p.R1)(m.QJ)((0,p.R1)(h).status)},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(m._k)((0,p.R1)(h).status)),1)])),_:1},8,["type"])])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.createTime")},{default:(0,d.k6)((()=>[(0,d.eW)((0,b.v_)((0,p.R1)(m.BU)((0,p.R1)(h).createTime)),1)])),_:1},8,["label"])])),_:1})),[[D,(0,p.R1)(k)]])])),_:1}),(0,d.bF)(q,{ref_key:"migrateDialogRef",ref:_,onOnUpdateDisk:L},null,512),(0,d.bF)(O,{ref_key:"cloneDialogRef",ref:R,onOnUpdateDisk:L},null,512),(0,d.bF)(Z,{ref_key:"templateDialogRef",ref:w,onOnUpdateDisk:L},null,512),(0,d.bF)(ae,{ref_key:"resizeDialogRef",ref:F,onOnUpdateDisk:L},null,512)])}}});const ne=(0,h.A)(oe,[["__scopeId","data-v-38fcdb8a"]]);var ie=ne}}]);