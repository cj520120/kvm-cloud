"use strict";(self["webpackChunkkvm_cloud_web"]=self["webpackChunkkvm_cloud_web"]||[]).push([[882],{2176:function(e,l,a){a.d(l,{A:function(){return o}});var t=a(6918);function o(e,l,a,o){const u=(0,t.WQ)("websocket");(0,t.sV)((()=>{u.subscribe_notify(e,(e=>{if(7===e.type){let l=e.data;0==l.code?a(l.data):3000001==l.code&&o(e.id)}})),u.subscribe_connect_notify(e,(()=>{l()})),u.init(),l()})),(0,t.xo)((()=>{u.unsubscribe_notify(e),u.unsubscribe_connect_notify(e)}))}},3364:function(e,l,a){a.d(l,{A:function(){return o}});var t=a(6918);function o(e,l,a,o){const u=(0,t.WQ)("websocket");(0,t.sV)((()=>{u.subscribe_notify(e,(e=>{if(2===e.type){let l=e.data;0==l.code?a(l.data):4000001==l.code&&o(e.id)}})),u.subscribe_connect_notify(e,(()=>{l()})),u.init(),l()})),(0,t.xo)((()=>{u.unsubscribe_notify(e),u.unsubscribe_connect_notify(e)}))}},3626:function(e,l,a){a.r(l),a.d(l,{default:function(){return el}});var t=a(6845),o=(a(4974),a(8206),a(6192)),u=(a(7063),a(8301)),n=(a(6810),a(4639),a(4279)),r=(a(3110),a(2889)),i=(a(2914),a(3295)),c=(a(9994),a(129)),s=(a(9886),a(7477)),d=(a(6788),a(6672),a(7836)),b=(a(3020),a(5567),a(6918)),p=a(4673),v=a(1654),m=a(5254),g=a(6555),k=a(2303);const f={t:"1745289994051",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5280",width:"200",height:"200"};function _(e,l){return(0,b.uX)(),(0,b.CE)("svg",f,l[0]||(l[0]=[(0,b.Lk)("path",{d:"M964.40523 523.773713a4631.292836 4631.292836 0 0 0-121.643614-334.801657c-11.08507-41.06818-33.960546-75.992827-83.434347-79.193974a3898.613975 3898.613975 0 0 0-494.228831-0.029215c-49.469627 3.196974-72.332583 38.117448-83.434347 79.185627a4687.486126 4687.486126 0 0 0-121.192866 341.658874",fill:"#8BBBCF","p-id":"5281"},null,-1),(0,b.Lk)("path",{d:"M95.274838 538.832045a3281.372591 3281.372591 0 0 0-69.811732-16.122599A4693.49193 4693.49193 0 0 1 143.363005 181.342724c11.965698-44.674166 43.171672-99.202191 119.66533-104.206332a3931.309922 3931.309922 0 0 1 498.373211 0.025041c76.451922 5.008315 107.666243 59.461215 119.636114 104.114513a4641.004793 4641.004793 0 0 1 118.375689 334.405165 3309.594444 3309.594444 0 0 0-69.807558 16.527438A4625.804558 4625.804558 0 0 0 804.656689 196.993707l-0.479963-1.698653c-14.307085-50.759268-37.274381-52.307672-46.927908-52.90867a3865.145913 3865.145913 0 0 0-490.08445-0.025042c-9.645179 0.600998-32.599954 2.149402-46.927908 52.90867l-1.076787 3.13437a4680.420229 4680.420229 0 0 0-123.884835 340.427663z",fill:"#82AEBF","p-id":"5282"},null,-1),(0,b.Lk)("path",{d:"M159.243536 742.749747c-41.205908 4.440706-79.256578-23.434739-84.657211-63.083895l-16.147641-122.565979c-5.396459-39.615768 26.877955-77.00701 71.831752-81.860902a3545.440151 3545.440151 0 0 1 763.446607 0c44.949623 4.853892 77.232384 42.245134 71.831752 81.860902l-16.143467 122.565979c-5.400633 39.649157-43.455476 67.528775-84.657211 63.083895a3275.984479 3275.984479 0 0 0-705.504581 0z",fill:"#82AEBF","p-id":"5283"},null,-1),(0,b.Lk)("path",{d:"M861.23395 775.237015a3244.010564 3244.010564 0 0 0-698.4679 0c-59.169063 6.364733-114.089406-33.32616-122.645277-90.850827l-17.416414-122.390688c-8.551697-57.457889 38.017281-112.123643 104.056083-119.24797a3577.910724 3577.910724 0 0 1 770.479116 0c66.034628 7.124327 112.603606 61.790081 104.056083 119.24797l-17.420588 122.390688c-8.551697 57.524667-63.47204 97.219733-122.641103 90.850827zM133.792951 507.730412c-24.544915 2.654407-42.282696 22.938081-39.574033 44.845283l14.874694 122.728749c2.708663 21.91555 23.618377 37.445499 46.635756 34.953862a3309.031009 3309.031009 0 0 1 712.541264 0c23.021553 2.491637 43.927093-13.038312 46.635756-34.953862l14.87052-122.728749c2.708663-21.907203-15.033291-42.190877-39.569859-44.845283a3512.431185 3512.431185 0 0 0-756.414098 0z",fill:"#82AEBF","p-id":"5284"},null,-1),(0,b.Lk)("path",{d:"M733.325769 613.46428c29.695132 36.602432 44.557305 80.466921 40.846979 126.14275-11.022466 115.867358-127.444912 199.735759-260.328019 199.906877-132.891454-0.329714-249.217907-84.340018-260.102644-200.22407-3.65607-45.675829 11.256187-89.523623 40.997228-126.092667",fill:"#EDE9D3","p-id":"5285"},null,-1),(0,b.Lk)("path",{d:"M513.828035 972.193159c-148.029085-0.434054-279.693502-96.543611-293.892074-230.048583-4.703642-52.094819 10.66771-103.688806 46.63993-148.375493 11.711109-14.59089 34.12749-17.629267 49.632397-6.711142 15.509081 10.905605 18.167661 31.439695 6.368907 45.796864-25.801167 31.443868-37.524797 67.537122-35.003945 103.935048 7.984088 97.816557 109.414979 169.790212 226.292347 170.044801 116.864847-0.112687 218.375037-71.965307 226.475986-169.773517 2.562588-36.393753-9.119306-72.499527-34.882911-103.972611-11.773713-14.369689-9.094265-34.899605 6.427337-45.79269 15.513254-10.87639 37.925462-7.833839 49.632397 6.769572 35.917963 44.73677 51.226711 96.339105 46.464639 148.42975-14.357168 133.492452-146.138446 229.443412-294.15501 229.698001z",fill:"#EBE6D1","p-id":"5286"},null,-1),(0,b.Lk)("path",{d:"M813.179171 637.921549a3375.60403 3375.60403 0 0 0-602.362516 0c-19.227754 1.719521-36.289413-11.24784-38.121621-29.210994-1.832208-17.950634 12.616779-34.12749 32.286935-35.888748a3440.419968 3440.419968 0 0 1 614.027715 0c19.674329 1.761257 34.119143 17.938113 32.286935 35.888748-1.832208 17.963155-18.88552 30.930516-38.117448 29.210994z",fill:"#5A7985","p-id":"5287"},null,-1),(0,b.Lk)("path",{d:"M512.592651 676.431315c41.402067-0.004174 74.306694 25.283641 73.492842 55.383612-0.805504 30.129186-33.718478 53.693306-73.51371 53.701653-39.799407-0.025042-72.69986-23.601682-73.497017-53.730868-0.805504-30.095797 32.10747-55.371091 73.517885-55.354397z",fill:"#82AEBF","p-id":"5288"},null,-1),(0,b.Lk)("path",{d:"M512.563435 818.195833c-57.345202-0.050083-105.495973-37.391242-107.365744-85.475236-1.869771-48.029737 46.297695-88.99775 107.39496-88.960187 61.101438-0.016694 109.248035 40.972187 107.365743 88.99775-1.886465 48.083994-50.049757 85.412632-107.394959 85.437673z m0.020868-109.081092c-22.504027-0.008347-39.786886 11.994913-39.636636 22.095015 0.150249 10.116795 17.487365 21.623398 39.628289 21.631745 22.13675 0 39.47804-11.498256 39.636637-21.615051 0.150249-10.108448-17.128436-22.111709-39.62829-22.111709z",fill:"#82AEBF","p-id":"5289"},null,-1)]))}var y=a(3508);const h={},R=(0,y.A)(h,[["render",_]]);var j=R;const I={t:"1745292153497",class:"icon",viewBox:"0 0 1025 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26555",width:"200",height:"200"};function F(e,l){return(0,b.uX)(),(0,b.CE)("svg",I,l[0]||(l[0]=[(0,b.Lk)("path",{d:"M986.632 947.2h-947.2C18.28 947.2 1 964.48 1 985.601 1 1006.72 18.28 1024 39.432 1024h947.2c21.12 0 38.368-17.28 38.368-38.399 0-21.121-17.249-38.401-38.368-38.401zM713.91 450.404c-13.216 0-24.014 10.346-24.98 23.454l-0.326-0.082C674.75 571 585.713 638.743 489.345 625.065c-96.527-13.678-163.808-103.905-150.273-201.451 13.614-97.548 102.891-165.539 199.425-151.774 27.069 3.822 51.895 13.758 73.239 28.09l-31.096 49.18c-1.531 2.361 0.558 5.375 3.302 4.803l116.84-25.814a3.205 3.205 0 0 0 2.41-3.742L677.493 205.8c-0.567-2.772-4.194-3.418-5.645-1.057l-33.035 52.269c-27.235-18.158-58.819-30.693-93.304-35.583-124.09-17.582-238.746 69.707-256.155 195.106-17.404 125.394 68.978 241.266 193.061 258.853 123.849 17.587 238.42-69.458 256.075-194.529 0.239-1.628 0.399-3.417 0.399-5.213 0-13.919-11.199-25.242-24.979-25.242z","p-id":"26556"},null,-1),(0,b.Lk)("path",{d:"M895.848 0H130.152C58.823 0 1 57.823 1 129.152v621.599c0 71.329 57.823 129.152 129.152 129.152h765.696c71.329 0 129.152-57.823 129.152-129.152V129.152C1025 57.823 967.177 0 895.848 0zM948.2 750.751c0 28.928-23.552 52.353-52.352 52.353H130.152c-28.897 0-52.321-23.553-52.321-52.353V129.152c0-28.928 23.52-52.352 52.321-52.352h765.696c28.928 0 52.352 23.552 52.352 52.352v621.599z","p-id":"26557"},null,-1)]))}const W={},$=(0,y.A)(W,[["render",F]]);var V=$,w=a(6692),C=a(5688),X=a(6187),U=a(8882),K=a(7412);const T={t:"1745303926668",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"30810",width:"200",height:"200"};function x(e,l){return(0,b.uX)(),(0,b.CE)("svg",T,l[0]||(l[0]=[(0,b.Lk)("path",{d:"M853.333333 85.333333h-85.333333v170.666667H256v85.333333H170.666667v341.333334h85.333333v85.333333h85.333333v170.666667h341.333334v-85.333334h170.666666v-85.333333h-170.666666v-85.333333h170.666666v-85.333334h-170.666666v-85.333333H341.333333v170.666667H256V341.333333h512V256h85.333333V85.333333z m-256 768h-170.666666v-256h170.666666v256z","p-id":"30811"},null,-1)]))}const z={},S=(0,y.A)(z,[["render",x]]);var D=S,L=a(8084),E=a(7471),Q=a(6797),A=a(7898),B=(a(7191),a(5143)),O=(a(493),a(9622),a(6622)),q=(a(4005),a(7233),a(5286),a(1210),a(8068),a(3597)),M=a(1421),N=a(7445),P=a(8180);a(6447);const H={class:"dialog-footer"};var Z={__name:"MigrateDialog",emits:["on-update-vm"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,hostId:0}),n=(0,v.KR)([]),{t:r}=(0,N.s9)(),i=(0,v.Kh)({hostId:[{required:!0,message:r("cj.tooltip.global.select_empty",{name:r("cj.label.host.label")}),trigger:["blur","change"]}]}),c=(0,v.KR)(null);function s(){c.value.validate((e=>{if(e){let e="on-update-vm",l=m.aL,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:r("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.hostId=void 0,t.value=!0,n.value=[];const l=e.hostId;(0,q.M0)().then((e=>{let{data:a=[]}=e||{};n.value=a.filter((e=>1===e.status&&e.hostId!==l)).map((e=>({label:e.displayName,value:e.hostId}))),n.value=[...n.value]}))}}),(e,l)=>{const a=O.P9,o=O.AV,r=B.xE,m=B.US,g=d.S2,k=A.kZ;return(0,b.uX)(),(0,b.Wv)(k,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.migrate"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",H,[(0,b.bF)(g,{onClick:l[1]||(l[1]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(g,{type:"primary",onClick:s},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(m,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:c,rules:(0,v.R1)(i)},{default:(0,b.k6)((()=>[(0,b.bF)(r,{label:e.$t("cj.label.host.label"),prop:"hostId"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).hostId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).hostId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(n),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const J=Z;var G=J,Y=a(7861);const ee={class:"dialog-footer"};var le={__name:"AttachCdDialog",emits:["on-update-vm"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,templateId:void 0}),{t:n}=(0,N.s9)(),r=(0,v.Kh)({templateId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.vm.cd")}),trigger:["blur","change"]}]}),i=(0,v.KR)(null),c=(0,v.KR)([]);function s(){i.value.validate((e=>{if(e){let e="on-update-vm",l=m.t9,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.templateId=void 0,i.value&&i.value.resetFields(),t.value=!0,(0,Y.Gj)().then((e=>{let{data:l=[]}=e||{};c.value=l.filter((e=>2===e.status&&0===e.templateType)).map((e=>({label:e.name,value:e.templateId})))}))}}),(e,l)=>{const a=O.P9,o=O.AV,n=B.xE,m=B.US,g=d.S2,k=A.kZ;return(0,b.uX)(),(0,b.Wv)(k,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.attachCd"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",ee,[(0,b.bF)(g,{onClick:l[1]||(l[1]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(g,{type:"primary",onClick:s},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(m,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:i,rules:(0,v.R1)(r)},{default:(0,b.k6)((()=>[(0,b.bF)(n,{label:e.$t("cj.label.vm.cd"),prop:"templateId"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).templateId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).templateId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(c),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const ae=le;var te=ae,oe=a(7255),ue=(a(756),a(5060)),ne=a(112);const re={class:"flex items-center"},ie={class:"flex items-center"},ce={class:"dialog-footer"};var se={__name:"EditGuestDialog",emits:["on-update-vm"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:void 0,description:"",category:100,bootstrapType:0,groupId:void 0,schemeId:void 0}),{t:n}=(0,N.s9)(),r=(0,v.Kh)({description:[{required:!0,message:n("cj.tooltip.global.not_empty",{name:n("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:n("cj.tooltip.global.length_error",{name:n("cj.label.basic.description")}),trigger:["blur","change"]}],bootstrapType:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.vm.bootstrapType")}),trigger:["blur","change"]}],category:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.vm.category")}),trigger:["blur","change"]}],schemeId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.scheme.label")}),trigger:["blur","change"]}]}),i=(0,v.KR)(null),s=(0,v.KR)([]),k=(0,v.KR)([]),f=(0,v.KR)([{label:"Centos",value:101},{label:"Ubuntu",value:102},{label:"Windows",value:300},{label:"Deepin",value:103},{label:"RedHat",value:104},{label:"Debian",value:105},{label:"OpenEuler",value:106},{label:"UOS",value:107},{label:"Oracle",value:108},{label:"Linux",value:100},{label:"Unix",value:200},{label:"Android",value:400},{label:"Other",value:500}]),_=(0,v.KR)([{label:"BIOS",value:0},{label:"UEFI",value:1}]);function y(){i.value.validate((e=>{if(e){let e="on-update-vm",l=m.mW,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.groupId=e.groupId,u.description=e.description,u.category=e.systemCategory>0?e.systemCategory:void 0,u.bootstrapType=e.bootstrapType,u.schemeId=e.schemeId>0?e.schemeId:void 0,t.value=!0,i.value&&i.value.resetFields(),(0,ue.jY)().then((e=>{let{data:l=[]}=e||{};s.value=l.map((e=>({label:e.name,value:e.schemeId}))),s.value=[...s.value]})),(0,ne.dz)().then((e=>{let{data:l=[]}=e||{};k.value=l.map((e=>({label:e.groupName,value:e.groupId}))),k.value=[{label:"cj.label.select.default",value:0,hasLanguage:!0},...k.value]}))}}),(e,l)=>{const a=oe.WK,o=B.xE,n=c.zv,m=O.P9,h=O.AV,R=B.US,j=d.S2,I=A.kZ;return(0,b.uX)(),(0,b.Wv)(I,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[6]||(l[6]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.edit"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",ce,[(0,b.bF)(j,{onClick:l[5]||(l[5]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(j,{type:"primary",onClick:y},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(R,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:i,rules:(0,v.R1)(r)},{default:(0,b.k6)((()=>[(0,b.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,b.k6)((()=>[(0,b.bF)(a,{modelValue:(0,v.R1)(u).description,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.vm.category"),prop:"category"},{default:(0,b.k6)((()=>[(0,b.bF)(h,{modelValue:(0,v.R1)(u).category,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(u).category=e)},{label:(0,b.k6)((({label:e,value:l})=>[(0,b.Lk)("div",re,[(0,b.bF)(n,{src:(0,v.R1)(g.Og)(l),size:16,style:{"margin-right":"8px"}},null,8,["src"]),(0,b.Lk)("span",null,(0,p.v_)(e),1)])])),default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(f),(l=>((0,b.uX)(),(0,b.Wv)(m,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},{default:(0,b.k6)((()=>[(0,b.Lk)("div",ie,[(0,b.bF)(n,{src:(0,v.R1)(g.Og)(l.value),size:16,style:{"margin-right":"8px"}},null,8,["src"]),(0,b.Lk)("span",{style:(0,p.Tr)({color:l.value})},(0,p.v_)(l.label),5)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.vm.bootstrapType"),prop:"bootstrapType"},{default:(0,b.k6)((()=>[(0,b.bF)(h,{modelValue:(0,v.R1)(u).bootstrapType,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.R1)(u).bootstrapType=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(_),(l=>((0,b.uX)(),(0,b.Wv)(m,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.scheme.label"),prop:"schemeId"},{default:(0,b.k6)((()=>[(0,b.bF)(h,{modelValue:(0,v.R1)(u).schemeId,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,v.R1)(u).schemeId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(s),(l=>((0,b.uX)(),(0,b.Wv)(m,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.group.label"),prop:"groupId"},{default:(0,b.k6)((()=>[(0,b.bF)(h,{modelValue:(0,v.R1)(u).groupId,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,v.R1)(u).groupId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(k),(l=>((0,b.uX)(),(0,b.Wv)(m,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const de=se;var be=de,pe=a(7770),ve=a(4878);const me={class:"flex items-center"},ge={class:"flex items-center"},ke={class:"dialog-footer"};var fe={__name:"ReInstallDialog",emits:["on-update-vm"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,category:100,bootstrapType:0,templateId:0,bootDeviceDriver:"",isoTemplateId:void 0,diskTemplateId:void 0,volumeId:void 0,storageId:void 0,diskSize:0,installType:0}),n=(0,v.KR)([]),r=(0,v.KR)([]),i=(0,v.KR)([{label:"cj.label.select.auto",value:0,hasLanguage:!0}]),s=(0,v.KR)([{label:"Centos",value:101},{label:"Ubuntu",value:102},{label:"Windows",value:300},{label:"Deepin",value:103},{label:"RedHat",value:104},{label:"Debian",value:105},{label:"OpenEuler",value:106},{label:"UOS",value:107},{label:"Oracle",value:108},{label:"Linux",value:100},{label:"Unix",value:200},{label:"Android",value:400},{label:"Other",value:500}]),k=(0,v.KR)([{label:"BIOS",value:0},{label:"UEFI",value:1}]),f=(0,v.KR)([{label:"cj.enum.installType.from_cdroom",value:0,hasLanguage:!0},{label:"cj.enum.installType.from_template",value:1,hasLanguage:!0},{label:"cj.enum.installType.from_disk",value:2,hasLanguage:!0}]),_=(0,v.KR)([{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"ide",value:"ide"},{label:"sata",value:"sata"}]),y=(0,v.KR)([]),h=(0,v.KR)(null),{t:R}=(0,N.s9)(),j=(0,v.Kh)({category:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.vm.category")}),trigger:["blur","change"]}],bootstrapType:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.vm.bootstrapType")}),trigger:["blur","change"]}],bootDeviceDriver:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.vm.rootDiskDriver")}),trigger:["blur","change"]}],installType:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.vm.installType")}),trigger:["blur","change"]}],storageId:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.storage.label")}),trigger:["blur","change"]}],diskSize:[{required:!0,message:R("cj.tooltip.global.not_empty",{name:R("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:R("cj.tooltip.global.must_number",{name:R("cj.label.disk.capacity")}),trigger:["blur","change"]}],isoTemplateId:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.vm.cd")}),trigger:["blur","change"]}],diskTemplateId:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.template.label")}),trigger:["blur","change"]}],volumeId:[{required:!0,message:R("cj.tooltip.global.select_empty",{name:R("cj.label.disk.label")}),trigger:["blur","change"]}]});function I(){h.value.validate((e=>{if(e){let e="on-update-vm",l=m.np,a={guestId:u.guestId,category:u.category,bootstrapType:u.bootstrapType,bootDeviceDriver:u.bootDeviceDriver};switch(u.installType){case 0:a={storageId:u.storageId,isoTemplateId:u.isoTemplateId,diskSize:u.diskSize,...a};break;case 1:a={storageId:u.storageId,diskTemplateId:u.diskTemplateId,diskSize:u.diskSize,...a};break;case 2:a={volumeId:u.volumeId,...a};break}l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:R("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.category=e.systemCategory,u.bootstrapType=e.bootstrapType,u.bootDeviceDriver="scsi",u.diskSize=100,u.isoTemplateId=void 0,u.diskTemplateId=void 0,u.templateId=void 0,u.volumeId=void 0,u.storageId=0,u.installType=0,t.value=!0,h.value&&h.value.resetFields(),(0,pe.ho)().then((e=>{let{data:l=[]}=e||{};i.value=l.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),i.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...i.value]})),(0,Y.Gj)().then((e=>{let{data:l=[]}=e||{};n.value=l.filter((e=>0===e.templateType&&2===e.status)).map((e=>({label:e.name,value:e.templateId}))),r.value=l.filter((e=>2===e.templateType&&2===e.status)).map((e=>({label:e.name,value:e.templateId})))})),(0,ve.UQ)().then((e=>{let{data:l=[]}=e||{};y.value=l.filter((e=>1===e.status)).map((e=>({label:e.description,value:e.volumeId})))}))}}),(e,l)=>{const a=c.zv,o=O.P9,m=O.AV,R=B.xE,F=oe.WK,W=B.US,$=d.S2,V=A.kZ;return(0,b.uX)(),(0,b.Wv)(V,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[10]||(l[10]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.reInstall"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",ke,[(0,b.bF)($,{onClick:l[9]||(l[9]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)($,{type:"primary",onClick:I},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(W,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:h,rules:(0,v.R1)(j)},{default:(0,b.k6)((()=>[(0,b.bF)(R,{label:e.$t("cj.label.vm.category"),prop:"category"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).category,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).category=e)},{label:(0,b.k6)((({label:e,value:l})=>[(0,b.Lk)("div",me,[(0,b.bF)(a,{src:(0,v.R1)(g.Og)(l),size:16,style:{"margin-right":"8px"}},null,8,["src"]),(0,b.Lk)("span",null,(0,p.v_)(e),1)])])),default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(s),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},{default:(0,b.k6)((()=>[(0,b.Lk)("div",ge,[(0,b.bF)(a,{src:(0,v.R1)(g.Og)(l.value),size:16,style:{"margin-right":"8px"}},null,8,["src"]),(0,b.Lk)("span",{style:(0,p.Tr)({color:l.value})},(0,p.v_)(l.label),5)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(R,{label:e.$t("cj.label.vm.bootstrapType"),prop:"bootstrapType"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).bootstrapType,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(u).bootstrapType=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(k),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(R,{label:e.$t("cj.label.vm.rootDiskDriver"),prop:"bootDeviceDriver"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).bootDeviceDriver,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.R1)(u).bootDeviceDriver=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(_),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(R,{label:e.$t("cj.label.vm.installType"),prop:"installType"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).installType,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,v.R1)(u).installType=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(f),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),2!==(0,v.R1)(u).installType?((0,b.uX)(),(0,b.Wv)(R,{key:0,label:e.$t("cj.label.storage.label"),prop:"storageId"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).storageId,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,v.R1)(u).storageId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(i),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,b.Q3)("",!0),1===(0,v.R1)(u).installType?((0,b.uX)(),(0,b.Wv)(R,{key:1,label:e.$t("cj.label.template.label"),prop:"diskTemplateId"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).diskTemplateId,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,v.R1)(u).diskTemplateId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(r),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,b.Q3)("",!0),0===(0,v.R1)(u).installType?((0,b.uX)(),(0,b.Wv)(R,{key:2,label:e.$t("cj.label.vm.cd"),prop:"isoTemplateId"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).isoTemplateId,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,v.R1)(u).isoTemplateId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(n),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,b.Q3)("",!0),2===(0,v.R1)(u).installType?((0,b.uX)(),(0,b.Wv)(R,{key:3,label:e.$t("cj.label.disk.label"),prop:"volumeId"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(u).volumeId,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,v.R1)(u).volumeId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(y),(l=>((0,b.uX)(),(0,b.Wv)(o,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,b.Q3)("",!0),2!==(0,v.R1)(u).installType?((0,b.uX)(),(0,b.Wv)(R,{key:4,label:e.$t("cj.label.disk.capacity"),prop:"diskSize"},{default:(0,b.k6)((()=>[(0,b.bF)(F,{modelValue:(0,v.R1)(u).diskSize,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,v.R1)(u).diskSize=e),modelModifiers:{number:!0}},{append:(0,b.k6)((()=>l[11]||(l[11]=[(0,b.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"])):(0,b.Q3)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const _e=fe;var ye=_e,he=a(6390),Re=(a(8145),a(6951)),je=(a(5560),a(1177),a(3364));const Ie={class:"dialog-footer"};var Fe={__name:"AttachDiskDialog",emits:["on-attach-disk"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,volumeId:void 0,diskDriver:"scsi"}),n=(0,v.KR)([{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"sata",value:"sata"}]),{t:r}=(0,N.s9)(),i=(0,v.Kh)({volumeId:[{required:!0,message:r("cj.tooltip.global.select_empty",{name:r("cj.label.disk.label")}),trigger:["blur","change"]}],diskDriver:[{required:!0,message:r("cj.tooltip.global.select_empty",{name:r("cj.label.disk.driver")}),trigger:["blur","change"]}]}),c=(0,v.KR)(null),s=(0,v.KR)([]);function g(){c.value.validate((e=>{if(e){let e="on-attach-disk",l=m.oZ,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data.volume,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:r("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.volumeId=void 0,u.diskDriver="scsi",t.value=!0,(0,ve.UQ)().then((e=>{let{data:l=[]}=e||{};s.value=l.filter((e=>1===e.status)).map((e=>({label:e.description,value:e.volumeId})))}))}}),(e,l)=>{const a=O.P9,o=O.AV,r=B.xE,m=B.US,k=d.S2,f=A.kZ;return(0,b.uX)(),(0,b.Wv)(f,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.attachDisk"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",Ie,[(0,b.bF)(k,{onClick:l[2]||(l[2]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(k,{type:"primary",onClick:g},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(m,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:c,rules:(0,v.R1)(i)},{default:(0,b.k6)((()=>[(0,b.bF)(r,{label:e.$t("cj.label.disk.driver"),prop:"diskDriver"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).diskDriver,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).diskDriver=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(n),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(r,{label:e.$t("cj.label.disk.label"),prop:"volumeId"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).volumeId,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(u).volumeId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(s),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const We=Fe;var $e=We;const Ve={class:"dialog-footer"};var we={__name:"EditVmDiskDialog",emits:["on-update-disk-data"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,deviceId:0,driver:"scsi"}),n=(0,v.KR)([{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"sata",value:"sata"}]);function r(){let e="on-update-disk-data",l=m.wF,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}return l({open:e=>{u.guestId=e.guestId,u.deviceId=e.deviceId,u.driver=e.deviceDriver,u.deviceId>0?n.value=[{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"sata",value:"sata"}]:n.value=[{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"ide",value:"ide"},{label:"sata",value:"sata"}],t.value=!0}}),(e,l)=>{const a=O.P9,o=O.AV,i=B.xE,c=B.US,s=d.S2,m=A.kZ;return(0,b.uX)(),(0,b.Wv)(m,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.diskAttach"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",Ve,[(0,b.bF)(s,{onClick:l[1]||(l[1]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(s,{type:"primary",onClick:r},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(c,{model:(0,v.R1)(u),"label-width":"auto"},{default:(0,b.k6)((()=>[(0,b.bF)(i,{label:e.$t("cj.label.disk.driver")},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).driver,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).driver=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(n),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};const Ce=we;var Xe=Ce;const Ue={class:"dialog-footer"};var Ke={__name:"CreateDiskDialog",emits:["on-create-disk"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,{t:u}=(0,N.s9)(),n=(0,v.Kh)({guestId:0,description:"",storageId:0,capacity:100,diskDriver:"scsi"}),r=(0,v.KR)([{label:"scsi",value:"scsi"},{label:"virtio",value:"virtio"},{label:"sata",value:"sata"}]),i=(0,v.Kh)({description:[{required:!0,message:u("cj.tooltip.global.not_empty",{name:u("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:u("cj.tooltip.global.length_error",{name:u("cj.label.basic.description")}),trigger:["blur","change"]}],storageId:[{required:!0,message:u("cj.tooltip.global.select_empty",{name:u("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}],capacity:[{required:!0,message:u("cj.tooltip.global.not_empty",{name:u("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:u("cj.tooltip.global.must_number",{name:u("cj.label.disk.capacity")}),trigger:["blur","change"]}],diskDriver:[{required:!0,message:u("cj.tooltip.global.select_empty",{name:u("cj.label.disk.driver")}),trigger:["blur","change"]}]}),c=(0,v.KR)(null),s=(0,v.KR)([]);function g(){c.value.validate((e=>{if(e){let e="on-create-disk",l=m.M,a={guestId:n.guestId,diskDriver:n.diskDriver,description:n.description,storageId:n.storageId,volumeSize:n.capacity};console.log("params",a),l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:u("cj.tooltip.global.has_error")})}))}return l({open:e=>{t.value=!0,n.guestId=e.guestId,n.diskDriver="scsi",n.description="",n.storageId=0,n.capacity=100,s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0}],(0,pe.ho)().then((e=>{let{data:l=[]}=e||{};s.value=l.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),s.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...s.value]}))}}),(e,l)=>{const a=oe.WK,o=B.xE,u=O.P9,m=O.AV,k=B.US,f=d.S2,_=A.kZ;return(0,b.uX)(),(0,b.Wv)(_,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.disk.create"),width:"600","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",Ue,[(0,b.bF)(f,{onClick:l[4]||(l[4]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(f,{type:"primary",onClick:g},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(k,{ref_key:"disk_ref",ref:c,model:(0,v.R1)(n),"label-width":"auto",rules:(0,v.R1)(i)},{default:(0,b.k6)((()=>[(0,b.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,b.k6)((()=>[(0,b.bF)(a,{modelValue:(0,v.R1)(n).description,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(n).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(n).storageId,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(n).storageId=e),style:{width:"240px"}},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(s),(l=>((0,b.uX)(),(0,b.Wv)(u,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.disk.capacity"),prop:"capacity"},{default:(0,b.k6)((()=>[(0,b.bF)(a,{modelValue:(0,v.R1)(n).capacity,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,v.R1)(n).capacity=e),modelModifiers:{number:!0}},{append:(0,b.k6)((()=>l[6]||(l[6]=[(0,b.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(o,{label:e.$t("cj.label.disk.driver"),prop:"diskDriver"},{default:(0,b.k6)((()=>[(0,b.bF)(m,{modelValue:(0,v.R1)(n).diskDriver,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,v.R1)(n).diskDriver=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(r),(l=>((0,b.uX)(),(0,b.Wv)(u,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const Te=Ke;var xe=Te,ze=a(9451),Se=a(7774);a(5280);const De={class:"disk-list"};var Le={__name:"VmDisk",props:{guestId:Number},setup(e){const l=(0,v.KR)([]),a=(0,v.KR)(!0),o=(0,ze.rd)(),u=e,{t:r}=(0,N.s9)();(0,je.A)("disk_list",h,j,I);const c=(0,v.KR)(null),f=(0,v.KR)(null),_=(0,v.KR)(null);function y(e,l){f.value.open(l)}function h(){a.value=!0,(0,m.lM)({guestId:u.guestId}).then((e=>{l.value=e.data})).finally((()=>{a.value=!1}))}function R(e,l){o.push({path:`/disk/${l.volumeId}`})}function j(e){let a=l.value.findIndex((l=>l.volumeId===e.volumeId));-1!==a?Object.assign(l.value[a],e):e.guestId===u.guestId&&l.value.push(e)}function I(e){let a=l.value.findIndex((l=>l.volumeId===e));-1!==a&&l.value.splice(a,1)}function F(e,l){Se.s.confirm(r("cj.dialog.vm.detachDiskConfirm"),"Warning",{confirmButtonText:r("cj.btn.basic.confirm"),cancelButtonText:r("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.ir)({guestId:l.guestId,volumeId:l.volumeId}).then((e=>{0===e.code?(I(l.volumeId),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function W(){c.value.open({guestId:u.guestId})}function $(){_.value.open({guestId:u.guestId})}return(e,o)=>{const u=d.S2,m=B.xE,h=B.US,I=he.o8,V=s.u,w=n.MF,C=n.TS,X=Re.ve,U=i.R7,K=he.Up,T=t.L;return(0,b.uX)(),(0,b.CE)("div",De,[(0,b.bF)(h,{inline:!0},{default:(0,b.k6)((()=>[(0,b.bF)(m,null,{default:(0,b.k6)((()=>[(0,b.bF)(u,{type:"primary",size:"small",icon:(0,v.R1)(k.Link),onClick:W},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(r)("cj.btn.vm.attach.disk")),1)])),_:1},8,["icon"]),(0,b.bF)(u,{size:"small",onClick:$,icon:e.DocumentAdd},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])])),_:1})])),_:1}),(0,b.bo)(((0,b.uX)(),(0,b.Wv)(K,{data:(0,v.R1)(l),style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,b.k6)((()=>[(0,b.bF)(I,{label:e.$t("cj.label.basic.id"),prop:"volumeId"},null,8,["label"]),(0,b.bF)(I,{label:e.$t("cj.label.basic.name"),prop:"name"},null,8,["label"]),(0,b.bF)(I,{label:e.$t("cj.label.basic.description"),prop:"description"},null,8,["label"]),(0,b.bF)(I,{label:e.$t("cj.label.disk.driver")},{default:(0,b.k6)((e=>[(0,b.bF)(V,null,{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.row.deviceDriver),1)])),_:2},1024)])),_:1},8,["label"]),(0,b.bF)(I,{label:e.$t("cj.label.basic.type")},{default:(0,b.k6)((e=>[(0,b.bF)(V,null,{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.row.type),1)])),_:2},1024)])),_:1},8,["label"]),(0,b.bF)(I,{prop:"capacity",label:e.$t("cj.label.disk.capacity")},{default:(0,b.k6)((l=>[(0,b.bF)(U,{placement:"bottom",effect:"light"},{content:(0,b.k6)((()=>[(0,b.bF)(C,{column:1,border:""},{default:(0,b.k6)((()=>[(0,b.bF)(w,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.yv)(l.row.allocation)),1)])),_:2},1032,["label"]),(0,b.bF)(w,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.yv)(l.row.capacity)),1)])),_:2},1032,["label"])])),_:2},1024)])),default:(0,b.k6)((()=>[(0,b.bF)(X,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,v.R1)(g.Nj)(l.row.allocation,l.row.capacity)),status:"success"},null,8,["percentage"])])),_:2},1024)])),_:1},8,["label"]),(0,b.bF)(I,{prop:"status",label:e.$t("cj.label.basic.status")},{default:(0,b.k6)((e=>[(0,b.bF)(V,{type:(0,v.R1)(g.QJ)(e.row.status)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g._k)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"]),(0,b.bF)(I,{prop:"createTime",label:e.$t("cj.label.basic.createTime")},{default:(0,b.k6)((e=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.BU)(e.row.createTime)),1)])),_:1},8,["label"]),(0,b.bF)(I,{label:e.$t("cj.label.basic.operation")},{default:(0,b.k6)((l=>[(0,b.bF)(u,{size:"small",type:"",onClick:e=>R(l.$index,l.row),icon:(0,v.R1)(k.View)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),(0,b.bF)(u,{size:"small",type:"",onClick:e=>y(l.$index,l.row),icon:(0,v.R1)(k.Edit)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.edit")),1)])),_:2},1032,["onClick","icon"]),0!==l.row.deviceId?((0,b.uX)(),(0,b.Wv)(u,{key:0,size:"small",type:"danger",onClick:e=>F(l.$index,l.row),icon:(0,v.R1)(k.Delete)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.detach.disk")),1)])),_:2},1032,["onClick","icon"])):(0,b.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])),[[T,(0,v.R1)(a)]]),(0,b.bF)($e,{ref_key:"attachDiskDialogRef",ref:c,onOnAttachDisk:j},null,512),(0,b.bF)(Xe,{ref_key:"editVmDiskDialogRef",ref:f,onOnUpdateDiskData:j},null,512),(0,b.bF)(xe,{ref_key:"createDiskDialogRef",ref:_,onOnCreateDisk:j},null,512)])}}};const Ee=Le;var Qe=Ee,Ae=a(3097);const Be={class:"dialog-footer"};var Oe={__name:"AttachNicDialog",emits:["on-attach-nic"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)(!1),o=a,u=(0,v.Kh)({guestId:0,networkId:void 0,driver:"virtio"}),{t:n}=(0,N.s9)(),r=(0,v.Kh)({networkId:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.network.label")}),trigger:["blur","change"]}],driver:[{required:!0,message:n("cj.tooltip.global.select_empty",{name:n("cj.label.network.nic.driver")}),trigger:["blur","change"]}]}),i=(0,v.KR)(null),c=(0,v.KR)([{label:"virtio",value:"virtio"},{label:"rtl8139",value:"rtl8139"},{label:"e1000",value:"e1000"}]),s=(0,v.KR)([]);function g(){i.value.validate((e=>{if(e){let e="on-attach-nic",l=m.LJ,a={...u};l(a).then((l=>{0===l.code?(t.value=!1,o(e,l.data.network,!0),(0,M.zo)(l)):(0,M.Ue)(l)}))}else(0,P.nk)({type:"error",message:n("cj.tooltip.global.has_error")})}))}return l({open:e=>{u.guestId=e.guestId,u.networkId=void 0,u.driver="virtio",i.value&&i.value.resetFields(),t.value=!0,(0,Ae.Mw)().then((e=>{let{data:l=[]}=e||{};s.value=l.filter((e=>2===e.status)).map((e=>({label:e.name,value:e.networkId})))}))}}),(e,l)=>{const a=O.P9,o=O.AV,n=B.xE,m=B.US,k=d.S2,f=A.kZ;return(0,b.uX)(),(0,b.Wv)(f,{modelValue:(0,v.R1)(t),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,v.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.vm.attachNic"),width:"400","close-on-click-modal":!1},{footer:(0,b.k6)((()=>[(0,b.Lk)("div",Be,[(0,b.bF)(k,{onClick:l[2]||(l[2]=e=>t.value=!1)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,b.bF)(k,{type:"primary",onClick:g},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,b.k6)((()=>[(0,b.bF)(m,{model:(0,v.R1)(u),"label-width":"auto",ref_key:"vm_ref",ref:i,rules:(0,v.R1)(r)},{default:(0,b.k6)((()=>[(0,b.bF)(n,{label:e.$t("cj.label.network.nic.driver"),prop:"driver"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).driver,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(u).driver=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(c),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,b.bF)(n,{label:e.$t("cj.label.network.label"),prop:"networkId"},{default:(0,b.k6)((()=>[(0,b.bF)(o,{modelValue:(0,v.R1)(u).networkId,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(u).networkId=e)},{default:(0,b.k6)((()=>[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)((0,v.R1)(s),(l=>((0,b.uX)(),(0,b.Wv)(a,{key:l.value,label:l.hasLanguage?e.$t(l.label):l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const qe=Oe;var Me=qe;const Ne={class:"nic-list"};var Pe={__name:"VmNic",props:{guestId:Number},setup(e){const l=(0,v.KR)([]),a=(0,v.KR)(!0),o=e,{t:u}=(0,N.s9)(),n=(0,v.KR)(null);function r(e){let a=l.value.findIndex((l=>l.guestNetworkId===e.guestNetworkId));-1!==a?Object.assign(l.value[a],e):l.value.push(e)}function i(e){let a=l.value.findIndex((l=>l.guestNetworkId===e));-1!==a&&l.value.splice(a,1)}function c(e,l){Se.s.confirm(u("cj.dialog.vm.detachNicConfirm"),"Warning",{confirmButtonText:u("cj.btn.basic.confirm"),cancelButtonText:u("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.$g)({guestId:l.guestId,guestNetworkId:l.guestNetworkId}).then((e=>{0===e.code?(i(l.guestNetworkId),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function s(){n.value.open({guestId:o.guestId})}return(0,b.sV)((()=>{a.value=!0,(0,m.GZ)({guestId:o.guestId}).then((e=>{l.value=e.data})).finally((()=>{a.value=!1}))})),(e,o)=>{const i=d.S2,m=B.xE,g=B.US,f=he.o8,_=he.Up,y=t.L;return(0,b.uX)(),(0,b.CE)("div",Ne,[(0,b.bF)(g,{inline:!0},{default:(0,b.k6)((()=>[(0,b.bF)(m,null,{default:(0,b.k6)((()=>[(0,b.bF)(i,{type:"primary",size:"small",icon:(0,v.R1)(k.Link),onClick:s},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(u)("cj.btn.vm.attach.nic")),1)])),_:1},8,["icon"])])),_:1})])),_:1}),(0,b.bo)(((0,b.uX)(),(0,b.Wv)(_,{data:(0,v.R1)(l),style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,b.k6)((()=>[(0,b.bF)(f,{label:e.$t("cj.label.network.nic.mac"),prop:"mac"},null,8,["label"]),(0,b.bF)(f,{label:e.$t("cj.label.network.nic.ip"),prop:"ip"},null,8,["label"]),(0,b.bF)(f,{label:e.$t("cj.label.disk.driver"),prop:"driveType"},null,8,["label"]),(0,b.bF)(f,{label:e.$t("cj.label.basic.operation")},{default:(0,b.k6)((l=>[0!==l.row.deviceId?((0,b.uX)(),(0,b.Wv)(i,{key:0,size:"small",type:"danger",onClick:e=>c(l.$index,l.row),icon:(0,v.R1)(k.Delete)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.detach.nic")),1)])),_:2},1032,["onClick","icon"])):(0,b.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])),[[y,(0,v.R1)(a)]]),(0,b.bF)(Me,{ref_key:"attachNicDialogRef",ref:n,onOnAttachNic:r},null,512)])}}};const He=Pe;var Ze=He;const Je={class:"flex items-center"};var Ge=Object.assign({name:"ViewVm"},{__name:"ViewVm",setup(e){const l=(0,ze.rd)(),a=(0,ze.lq)(),{t:f}=(0,N.s9)(),_=(0,v.KR)(!0),y=(0,v.KR)("first"),h=(0,v.KR)(null),R=(0,v.KR)(null),I=(0,v.KR)(null),F=(0,v.KR)(null),W=(0,v.KR)(null),$=(0,v.KR)({vmId:0,name:"",description:"",cpu:0,memory:0,share:0,cdRoom:0,schemeId:9,lastVmId:0,type:0,networkId:0,groupId:0,systemCategory:0,bootstrapType:0,vmIp:"",lastStartTime:(new Date).getTime(),createTime:(new Date).getTime()});function T(){_.value=!0,(0,m.pk)({guestId:a.params.id}).then((e=>{0===e.code?Object.assign($.value,e.data):(0,P.nk)({type:"error",message:e.message})})).finally((()=>{_.value=!1}))}function x(e){e===$.value.vmId&&z()}function z(){l.back(-1)}function S(e){e.guestId===$.value.guestId&&Object.assign($.value,e)}function A(){let{href:e}=l.resolve({path:`/vnc/${$.value.guestId}`});window.open(e,"_blank")}function B(e){l.push({path:`/network/${e}`})}function O(e){l.push({path:`/template/${e}`})}function q(e){l.push({path:`/host/${e}`})}function H(e){l.push({path:`/scheme/${e}`})}function Z(){Se.s.confirm(f("cj.dialog.vm.stopConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.rW)({guestId:$.value.guestId,force:!1}).then((e=>{0===e.code?(S(e.data),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function J(){Se.s.confirm(f("cj.dialog.vm.forceStopConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.rW)({guestId:$.value.guestId,force:!0}).then((e=>{0===e.code?(S(e.data),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function Y(){Se.s.confirm(f("cj.dialog.vm.deleteConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.Uk)({guestId:$.value.guestId}).then((e=>{0===e.code?(S(e.data),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function ee(){Se.s.confirm(f("cj.dialog.vm.restartConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.Ul)({guestId:$.value.guestId}).then((e=>{0===e.code?(S(e.data),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function le(){Se.s.confirm(f("cj.dialog.vm.detachCdConfirm"),"Warning",{confirmButtonText:f("cj.btn.basic.confirm"),cancelButtonText:f("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,m.xe)({guestId:$.value.guestId}).then((e=>{0===e.code?(S(e.data),(0,M.zo)(e)):(0,M.Ue)(e)}))}))}function ae(){h.value.open($.value)}function oe(){R.value.open($.value)}function ue(){I.value.open($.value)}function ne(){F.value.open($.value)}function re(){W.value.open($.value)}return(0,L.A)("vm_detail",T,S,x),(e,l)=>{const m=d.S2,T=n.MF,x=s.u,L=c.zv,M=i.R7,N=r.C4,P=n.TS,ie=u.v$,ce=u.q,se=o.IO,de=t.L;return(0,b.uX)(),(0,b.CE)("div",null,[(0,b.bF)(se,{onBack:z},{content:(0,b.k6)((()=>[(0,b.Lk)("span",null,(0,p.v_)(e.$t("cj.tabs.vm")),1)])),extra:(0,b.k6)((()=>[(0,b.Lk)("div",Je,[[1,2].includes((0,v.R1)($).status)?((0,b.uX)(),(0,b.Wv)(m,{key:0,size:"small",type:"",onClick:A,icon:U.A},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.vnc")),1)])),_:1})):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&0===(0,v.R1)($).cdRoom?((0,b.uX)(),(0,b.Wv)(m,{key:1,size:"small",type:"",onClick:ue,icon:j},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.attach.cd")),1)])),_:1})):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&0!==(0,v.R1)($).cdRoom?((0,b.uX)(),(0,b.Wv)(m,{key:2,size:"small",type:"",onClick:le,icon:j},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.detach.cd")),1)])),_:1})):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&1!==(0,v.R1)($).status&&2!==(0,v.R1)($).status&&5!==(0,v.R1)($).status?((0,b.uX)(),(0,b.Wv)(m,{key:3,size:"small",type:"primary",onClick:ne,icon:(0,v.R1)(k.Edit)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.edit")),1)])),_:1},8,["icon"])):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&4===(0,v.R1)($).status?((0,b.uX)(),(0,b.Wv)(m,{key:4,size:"small",type:"success",onClick:ae,icon:w.A},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.start")),1)])),_:1})):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&2===(0,v.R1)($).status?((0,b.uX)(),(0,b.Wv)(m,{key:5,size:"small",type:"primary",onClick:ee,icon:V},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.restart")),1)])),_:1})):(0,b.Q3)("",!0),[1,2,3,5].includes((0,v.R1)($).status)?((0,b.uX)(),(0,b.Wv)(m,{key:6,size:"small",type:"danger",onClick:Z,icon:C.A},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.stop")),1)])),_:1})):(0,b.Q3)("",!0),[1,2,3,5].includes((0,v.R1)($).status)?((0,b.uX)(),(0,b.Wv)(m,{key:7,size:"small",type:"danger",onClick:J,icon:D},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.forceStop")),1)])),_:1})):(0,b.Q3)("",!0),1==(0,v.R1)($).type&&[4,6].includes((0,v.R1)($).status)?((0,b.uX)(),(0,b.Wv)(m,{key:8,size:"small",type:"primary",onClick:re,icon:X.A},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.vm.reInstall")),1)])),_:1})):(0,b.Q3)("",!0),2===(0,v.R1)($).status?((0,b.uX)(),(0,b.Wv)(m,{key:9,size:"small",type:"warning",onClick:oe,icon:K.A},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.migrate")),1)])),_:1})):(0,b.Q3)("",!0),[4,6,8].includes((0,v.R1)($).status)?((0,b.uX)(),(0,b.Wv)(m,{key:10,size:"small",type:"danger",onClick:Y,icon:(0,v.R1)(k.Delete)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)(e.$t("cj.btn.basic.delete")),1)])),_:1},8,["icon"])):(0,b.Q3)("",!0)])])),default:(0,b.k6)((()=>[(0,b.bF)(ce,{class:"demo-tabs",modelValue:(0,v.R1)(y),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,v.i9)(y)?y.value=e:null),type:"card"},{default:(0,b.k6)((()=>[(0,b.bF)(ie,{label:e.$t("cj.tabs.basic"),name:"first"},{default:(0,b.k6)((()=>[(0,b.bo)(((0,b.uX)(),(0,b.Wv)(P,{border:"",column:2,style:{"margin-top":"10px"}},{default:(0,b.k6)((()=>[(0,b.bF)(T,{label:e.$t("cj.label.basic.id")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).guestId),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.basic.name")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).name),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.vm.uuid")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).uuid),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.basic.description")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).description),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.vm.bootstrapType")},{default:(0,b.k6)((()=>[(0,b.bF)(x,null,{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.WH)((0,v.R1)($).bootstrapType)),1)])),_:1})])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.cpu.label")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).cpu),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.memory.label")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.LX)((0,v.R1)($).memory)),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.basic.type")},{default:(0,b.k6)((()=>[(0,b.bF)(x,null,{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(f)((0,v.R1)(g.LB)((0,v.R1)($).type))),1)])),_:1})])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.vm.category")},{default:(0,b.k6)((()=>[(0,b.bF)(M,{class:"item",effect:"dark",content:(0,v.R1)(g.c7)((0,v.R1)($).systemCategory),placement:"bottom"},{default:(0,b.k6)((()=>[(0,b.bF)(L,{src:(0,v.R1)(g.Og)((0,v.R1)($).systemCategory),size:24},null,8,["src"])])),_:1},8,["content"])])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.network.nic.ip")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).guestIp),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.basic.status")},{default:(0,b.k6)((()=>[(0,b.bF)(x,{type:(0,v.R1)(g.P5)((0,v.R1)($).status)},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.hX)((0,v.R1)($).status)),1)])),_:1},8,["type"])])),_:1},8,["label"]),(0,v.R1)($).network?((0,b.uX)(),(0,b.Wv)(T,{key:0,label:e.$t("cj.label.network.label")},{default:(0,b.k6)((()=>[(0,b.bF)(N,{type:"primary",onClick:l[0]||(l[0]=e=>B((0,v.R1)($).network.networkId))},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).network.name),1)])),_:1})])),_:1},8,["label"])):(0,b.Q3)("",!0),(0,v.R1)($).group?((0,b.uX)(),(0,b.Wv)(T,{key:1,label:e.$t("cj.label.group.label")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).group.groupName),1)])),_:1},8,["label"])):(0,b.Q3)("",!0),(0,v.R1)($).template?((0,b.uX)(),(0,b.Wv)(T,{key:2,label:e.$t("cj.label.vm.cd")},{default:(0,b.k6)((()=>[(0,b.bF)(N,{type:"primary",onClick:l[1]||(l[1]=e=>O((0,v.R1)($).template.templateId))},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).template.name),1)])),_:1})])),_:1},8,["label"])):(0,b.Q3)("",!0),(0,v.R1)($).host?((0,b.uX)(),(0,b.Wv)(T,{key:3,label:e.$t("cj.label.host.label")},{default:(0,b.k6)((()=>[(0,b.bF)(N,{type:"primary",onClick:l[2]||(l[2]=e=>q((0,v.R1)($).host.hostId))},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).host.displayName),1)])),_:1})])),_:1},8,["label"])):(0,b.Q3)("",!0),(0,v.R1)($).scheme?((0,b.uX)(),(0,b.Wv)(T,{key:4,label:e.$t("cj.label.scheme.label")},{default:(0,b.k6)((()=>[(0,b.bF)(N,{type:"primary",onClick:l[3]||(l[3]=e=>H((0,v.R1)($).scheme.schemeId))},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)($).scheme.name),1)])),_:1})])),_:1},8,["label"])):(0,b.Q3)("",!0),(0,b.bF)(T,{label:e.$t("cj.label.vm.lastStartTime")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.BU)((0,v.R1)($).lastStartTime)),1)])),_:1},8,["label"]),(0,b.bF)(T,{label:e.$t("cj.label.basic.createTime")},{default:(0,b.k6)((()=>[(0,b.eW)((0,p.v_)((0,v.R1)(g.BU)((0,v.R1)($).createTime)),1)])),_:1},8,["label"])])),_:1})),[[de,(0,v.R1)(_)]])])),_:1},8,["label"]),(0,b.bF)(ie,{label:e.$t("cj.tabs.disk"),name:"disk"},{default:(0,b.k6)((()=>[(0,b.bF)(Qe,{guestId:Number((0,v.R1)(a).params.id)},null,8,["guestId"])])),_:1},8,["label"]),(0,b.bF)(ie,{label:e.$t("cj.tabs.network"),name:"network"},{default:(0,b.k6)((()=>[(0,b.bF)(Ze,{guestId:Number((0,v.R1)(a).params.id)},null,8,["guestId"])])),_:1},8,["label"]),(0,b.bF)(ie,{label:e.$t("cj.tabs.config"),name:"config"},{default:(0,b.k6)((()=>[(0,b.bF)(E.A,{allocateType:2,allocateId:Number((0,v.R1)(a).params.id)},null,8,["allocateId"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,b.bF)(Q.A,{ref_key:"startDialogRef",ref:h,onOnUpdateVm:S},null,512),(0,b.bF)(G,{ref_key:"migrateDialogRef",ref:R,onOnUpdateVm:S},null,512),(0,b.bF)(te,{ref_key:"attachCdDialogRef",ref:I,onOnUpdateVm:S},null,512),(0,b.bF)(be,{ref_key:"editGuestDialogRef",ref:F,onOnUpdateVm:S},null,512),(0,b.bF)(ye,{ref_key:"reInstallDialogRef",ref:W,onOnUpdateVm:S},null,512)])}}});const Ye=(0,y.A)(Ge,[["__scopeId","data-v-1758d722"]]);var el=Ye},7407:function(e,l,a){a.r(l),a.d(l,{default:function(){return S}});var t=a(6845),o=(a(4974),a(8206),a(9464)),u=(a(2708),a(6390)),n=(a(8145),a(3295)),r=(a(9994),a(6951)),i=(a(5560),a(4279)),c=(a(3110),a(6672),a(920)),s=(a(458),a(7477)),d=(a(6788),a(1177),a(3979)),b=(a(2403),a(9136)),p=(a(2890),a(2666),a(5143)),v=(a(493),a(7836)),m=(a(3020),a(9622),a(7255)),g=(a(756),a(5567),a(6918)),k=a(1654),f=a(4673),_=a(7770),y=a(2303),h=a(6555),R=a(7898),j=(a(7191),a(6622)),I=(a(4005),a(7233),a(5286),a(9343),a(1421)),F=a(7445),W=a(8180);a(6447);const $={class:"dialog-footer"};var V={__name:"EditStorageDialog",emits:["on-create-storage"],setup(e,{expose:l,emit:a}){const t=(0,k.KR)(!1),o=a,{t:u}=(0,F.s9)(),n=(0,k.Kh)({description:"",type:"nfs",gluster:{uri:"",volume:""},nfs:{uri:"",path:""},ceph:{pool:"",username:"",secret:"",uri:""},supportCategory:[]});function r(e,l,a,t,o){if(!(n.type!==t||l&&0!==l.length))return a(new Error(u("cj.tooltip.global.not_empty",{name:u(o)})));a()}const i=(0,k.KR)(null),c=(0,k.Kh)({description:[{required:!0,message:u("cj.tooltip.global.not_empty",{name:u("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:u("cj.tooltip.global.length_error",{name:u("cj.label.basic.description")}),trigger:["blur","change"]}],type:[{required:!0,message:u("cj.tooltip.global.select_empty",{name:u("cj.label.basic.type")}),trigger:["blur","change"]}],nfs:{uri:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"nfs","cj.label.storage.nfs.server")},trigger:["blur","change"]}],path:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"nfs","cj.label.storage.nfs.export")},trigger:["blur","change"]}]},gluster:{uri:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"glusterfs","cj.label.storage.gluster.server")},trigger:["blur","change"]}],volume:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"glusterfs","cj.label.storage.gluster.volume")},trigger:["blur","change"]}]},ceph:{uri:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"ceph-rbd","cj.label.storage.ceph.mon")},trigger:["blur","change"]}],pool:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"ceph-rbd","cj.label.storage.ceph.pool")},trigger:["blur","change"]}],username:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"ceph-rbd","cj.label.storage.ceph.user")},trigger:["blur","change"]}],secret:[{required:!0,validator:(e,l,a)=>{r(e,l,a,"ceph-rbd","cj.label.storage.ceph.secret")},trigger:["blur","change"]}]}});function s(){i.value.validate((e=>{if(e){let e="on-create-storage",l=_.id,a=0;n.supportCategory.forEach((e=>{a|=e}));let u={};switch(n.type){case"nfs":u={uri:n.nfs.uri,path:n.nfs.path};break;case"glusterfs":u={uri:n.gluster.uri,volume:n.gluster.volume};break;case"ceph-rbd":u={uri:n.ceph.uri,pool:n.ceph.pool,username:n.ceph.username,secret:n.ceph.secret};break}let r={description:n.description,type:n.type,supportCategory:a,param:JSON.stringify(u)};l(r).then((l=>{0===l.code?(t.value=!1,o(e,l.data,!0),(0,I.zo)(l)):(0,I.Ue)(l)}))}else(0,W.nk)({type:"error",message:u("cj.tooltip.global.has_error")})}))}return l({open:()=>{t.value=!0}}),(e,l)=>{const a=m.WK,o=p.xE,u=j.P9,r=j.AV,d=b.dI,_=b.o5,y=p.US,h=v.S2,I=R.kZ;return(0,g.uX)(),(0,g.Wv)(I,{modelValue:(0,k.R1)(t),"onUpdate:modelValue":l[12]||(l[12]=e=>(0,k.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.storage.create"),width:"600","close-on-click-modal":!1},{footer:(0,g.k6)((()=>[(0,g.Lk)("div",$,[(0,g.bF)(h,{onClick:l[11]||(l[11]=e=>t.value=!1)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,g.bF)(h,{type:"primary",onClick:s},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,g.k6)((()=>[(0,g.bF)(y,{model:(0,k.R1)(n),"label-width":"auto",ref_key:"storage_ref",ref:i,rules:(0,k.R1)(c)},{default:(0,g.k6)((()=>[(0,g.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).description,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,k.R1)(n).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(o,{label:e.$t("cj.label.basic.type"),prop:"type"},{default:(0,g.k6)((()=>[(0,g.bF)(r,{modelValue:(0,k.R1)(n).type,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,k.R1)(n).type=e),style:{width:"100%"}},{default:(0,g.k6)((()=>[(0,g.bF)(u,{label:"NFS",value:"nfs"}),(0,g.bF)(u,{label:"Glusterfs",value:"glusterfs"}),(0,g.bF)(u,{label:"Ceph Rbd",value:"ceph-rbd"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),"nfs"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:0,label:e.$t("cj.label.storage.nfs.server"),prop:"nfs.uri"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).nfs.uri,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,k.R1)(n).nfs.uri=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"nfs"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:1,label:e.$t("cj.label.storage.nfs.export"),prop:"nfs.path"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).nfs.path,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,k.R1)(n).nfs.path=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"glusterfs"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:2,label:e.$t("cj.label.storage.gluster.server"),prop:"gluster.uri"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).gluster.uri,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,k.R1)(n).gluster.uri=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"glusterfs"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:3,label:e.$t("cj.label.storage.gluster.volume"),prop:"gluster.volume"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).gluster.volume,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,k.R1)(n).gluster.volume=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"ceph-rbd"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:4,label:e.$t("cj.label.storage.ceph.mon"),prop:"ceph.uri"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).ceph.uri,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,k.R1)(n).ceph.uri=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"ceph-rbd"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:5,label:e.$t("cj.label.storage.ceph.pool"),prop:"ceph.pool"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).ceph.pool,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,k.R1)(n).ceph.pool=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"ceph-rbd"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:6,label:e.$t("cj.label.storage.ceph.user"),prop:"ceph.username"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).ceph.username,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,k.R1)(n).ceph.username=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),"ceph-rbd"===(0,k.R1)(n).type?((0,g.uX)(),(0,g.Wv)(o,{key:7,label:e.$t("cj.label.storage.ceph.secret"),prop:"ceph.secret"},{default:(0,g.k6)((()=>[(0,g.bF)(a,{modelValue:(0,k.R1)(n).ceph.secret,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,k.R1)(n).ceph.secret=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,g.bF)(o,{label:e.$t("cj.label.storage.support")},{default:(0,g.k6)((()=>[(0,g.bF)(_,{modelValue:(0,k.R1)(n).supportCategory,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,k.R1)(n).supportCategory=e)},{default:(0,g.k6)((()=>[(0,g.bF)(d,{label:e.$t("cj.enum.storageSupport.template"),value:1},null,8,["label"]),(0,g.bF)(d,{label:e.$t("cj.enum.storageSupport.disk"),value:2},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const w=V;var C=w,X=a(2176),U=a(9451),K=a(7774),T=(a(5280),Object.assign({name:"Storage"},{__name:"Storage",setup(e){const l=(0,U.rd)(),a=(0,k.KR)(null),{t:R}=(0,F.s9)(),j=(0,k.KR)({keyword:"",no:1,size:10}),W=(0,k.KR)(!1),$=(0,k.KR)({data:[],total:0}),V=(0,k.KR)(["storageId","description","capacity","supportCategory","status","createTime"]),w=(0,k.KR)([{label:"cj.label.basic.id",prop:"storageId"},{label:"cj.label.basic.name",prop:"name"},{label:"cj.label.basic.description",prop:"description"},{label:"cj.label.basic.type",prop:"type"},{label:"cj.label.storage.support",prop:"supportCategory"},{label:"cj.label.disk.capacity",prop:"capacity"},{label:"cj.label.basic.status",prop:"status"},{label:"cj.label.basic.createTime",prop:"createTime"}]),T=(0,k.KR)(null);function x(e){j.value.no=e,S()}function z(e){j.value.size=e,S()}function S(){W.value=!0,(0,_.UC)(j.value).then((e=>{const{list:l=[],total:a=0}=e.data||{};$.value={data:l,total:a}})).catch((()=>{$.value={data:[],total:0}})).finally((()=>{W.value=!1}))}function D(){a.value.open()}function L(e,a){l.push({path:`/storage/${a.storageId}`})}function E(e,l=!1){let a=$.value.data.findIndex((l=>l.storageId===e.storageId));-1!==a?Object.assign($.value.data[a],e):l&&($.value.data.push(e),$.value.total++)}function Q(e){let l=$.value.data.findIndex((l=>l.storageId===e));-1!==l&&($.value.data.splice(l,1),$.value.total--)}function A(e,l){K.s.confirm(R("cj.dialog.storage.deleteConfirm"),"Warning",{confirmButtonText:R("cj.btn.basic.confirm"),cancelButtonText:R("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,_.lh)({storageId:l.storageId}).then((e=>{0===e.code?(Q(l.storageId),(0,I.zo)(e)):(0,I.Ue)(e)}))}))}return(0,X.A)("storage_list",S,E,Q),(e,l)=>{const _=m.WK,R=p.xE,I=v.S2,F=p.US,X=b.dI,U=b.o5,K=d.Vc,Q=u.o8,B=s.u,O=c.sI,q=i.MF,M=i.TS,N=r.ve,P=n.R7,H=u.Up,Z=o.aQ,J=(0,g.gN)("Admin"),G=t.L;return(0,g.uX)(),(0,g.CE)("div",null,[(0,g.bF)(F,{model:(0,k.R1)(j),inline:"",size:"small"},{default:(0,g.k6)((()=>[(0,g.bF)(R,{label:e.$t("cj.label.basic.keyword")},{default:(0,g.k6)((()=>[(0,g.bF)(_,{modelValue:(0,k.R1)(j).keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,k.R1)(j).keyword=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(R,null,{default:(0,g.k6)((()=>[(0,g.bF)(I,{type:"primary",onClick:S,icon:(0,k.R1)(y.Search),disabled:(0,k.R1)(W)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon","disabled"])])),_:1})])),_:1},8,["model"]),(0,g.bo)(((0,g.uX)(),(0,g.Wv)(H,{data:(0,k.R1)($).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,g.k6)((()=>[(0,g.bF)(Q,null,{header:(0,g.k6)((()=>[(0,g.bo)(((0,g.uX)(),(0,g.Wv)(I,{size:"small",onClick:D,icon:(0,k.R1)(y.DocumentAdd)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"])),[[J]]),(0,g.bF)(I,{size:"small",ref_key:"btnFilter",ref:T,icon:(0,k.R1)(y.Filter)},null,8,["icon"]),(0,g.bF)(K,{"virtual-ref":(0,k.R1)(T),trigger:"click","virtual-triggering":""},{default:(0,g.k6)((()=>[(0,g.bF)(U,{modelValue:(0,k.R1)(V),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,k.i9)(V)?V.value=e:null),min:1},{default:(0,g.k6)((()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,k.R1)(w),(l=>((0,g.uX)(),(0,g.Wv)(X,{label:e.$t(l.label),value:l.prop,key:l.prop,style:{display:"block"},vertical:""},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["virtual-ref"])])),default:(0,g.k6)((()=>[(0,k.R1)(V).includes("storageId")?((0,g.uX)(),(0,g.Wv)(Q,{key:0,prop:"storageId",label:e.$t("cj.label.basic.id")},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("name")?((0,g.uX)(),(0,g.Wv)(Q,{key:1,prop:"name",label:e.$t("cj.label.basic.name"),"min-width":"300","show-overflow-tooltip":""},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("description")?((0,g.uX)(),(0,g.Wv)(Q,{key:2,prop:"description",label:e.$t("cj.label.basic.description"),"min-width":"150","show-overflow-tooltip":""},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("type")?((0,g.uX)(),(0,g.Wv)(Q,{key:3,prop:"type",label:e.$t("cj.label.basic.type")},{default:(0,g.k6)((e=>[(0,g.bF)(B,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.row.type),1)])),_:2},1024)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("supportCategory")?((0,g.uX)(),(0,g.Wv)(Q,{key:4,prop:"supportCategory",label:e.$t("cj.label.storage.support"),"min-width":"150","show-overflow-tooltip":""},{default:(0,g.k6)((l=>[(0,g.bF)(O,null,{default:(0,g.k6)((()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,k.R1)(h.zb)(l.row.supportCategory),(l=>((0,g.uX)(),(0,g.CE)("div",{key:l},[(0,g.bF)(B,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t(l)),1)])),_:2},1024)])))),128))])),_:2},1024)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("capacity")?((0,g.uX)(),(0,g.Wv)(Q,{key:5,prop:"capacity",label:e.$t("cj.label.disk.capacity")},{default:(0,g.k6)((l=>[(0,g.bF)(P,{placement:"bottom",effect:"light"},{content:(0,g.k6)((()=>[(0,g.bF)(M,{column:1,border:""},{default:(0,g.k6)((()=>[(0,g.bF)(q,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)((0,k.R1)(h.I5)(l.row.allocation)),1)])),_:2},1032,["label"]),(0,g.bF)(q,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)((0,k.R1)(h.I5)(l.row.capacity)),1)])),_:2},1032,["label"])])),_:2},1024)])),default:(0,g.k6)((()=>[(0,g.bF)(N,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,k.R1)(h.Nj)(l.row.allocation,l.row.capacity)),status:"success"},null,8,["percentage"])])),_:2},1024)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("status")?((0,g.uX)(),(0,g.Wv)(Q,{key:6,prop:"status",label:e.$t("cj.label.basic.status")},{default:(0,g.k6)((e=>[(0,g.bF)(B,{type:(0,k.R1)(h.wB)(e.row.status)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)((0,k.R1)(h.Q3)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(V).includes("createTime")?((0,g.uX)(),(0,g.Wv)(Q,{key:7,prop:"createTime",label:e.$t("cj.label.basic.createTime"),"min-width":"180","show-overflow-tooltip":""},{default:(0,g.k6)((e=>[(0,g.eW)((0,f.v_)((0,k.R1)(h.BU)(e.row.createTime)),1)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,g.bF)(Q,{label:e.$t("cj.label.basic.operation"),"min-width":"250"},{default:(0,g.k6)((l=>[(0,g.bF)(I,{size:"small",type:"",onClick:e=>L(l.$index,l.row),icon:(0,k.R1)(y.View)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),(0,g.bo)(((0,g.uX)(),(0,g.Wv)(I,{size:"small",type:"danger",onClick:e=>A(l.$index,l.row),icon:(0,k.R1)(y.Delete)},{default:(0,g.k6)((()=>[(0,g.eW)((0,f.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])),[[J]])])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[G,(0,k.R1)(W)]]),l[4]||(l[4]=(0,g.Lk)("br",null,null,-1)),(0,g.bF)(Z,{size:"small",background:"",onCurrentChange:x,onSizeChange:z,"current-page":(0,k.R1)(j).no,"onUpdate:currentPage":l[2]||(l[2]=e=>(0,k.R1)(j).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,k.R1)(j).size,"onUpdate:pageSize":l[3]||(l[3]=e=>(0,k.R1)(j).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,k.R1)($).total},null,8,["current-page","page-size","total"]),(0,g.bF)(C,{ref_key:"editStorageDialogRef",ref:a,onOnCreateStorage:E,onOnUpdateStorage:E},null,512)])}}})),x=a(3508);const z=(0,x.A)(T,[["__scopeId","data-v-0c98b7ac"]]);var S=z},7412:function(e,l,a){a.d(l,{A:function(){return c}});var t=a(6918);const o={t:"1745291574744",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"20390",width:"200",height:"200"};function u(e,l){return(0,t.uX)(),(0,t.CE)("svg",o,l[0]||(l[0]=[(0,t.Lk)("path",{d:"M204.8 307.2l307.2 0 0-102.4-409.6 0 0 614.912 409.6 0 0-102.912-307.2 0 0-409.6zM307.2 409.6l307.2 0 0-153.6 307.2 256-307.2 256 0-153.6-307.2 0 0-204.8z","p-id":"20391"},null,-1)]))}var n=a(3508);const r={},i=(0,n.A)(r,[["render",u]]);var c=i},8381:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var t=a(6845),o=(a(4974),a(8206),a(6192)),u=(a(7063),a(8301)),n=(a(6810),a(4639),a(3295)),r=(a(9994),a(6951)),i=(a(5560),a(4279)),c=(a(3110),a(2889)),s=(a(2914),a(920)),d=(a(458),a(7477)),b=(a(6788),a(6672),a(7836)),p=(a(3020),a(5567),a(6918)),v=a(4673),m=a(1654),g=a(7770),k=a(6555),f=a(2303),_=a(8830),y=a(3912),h=a(7412);const R={t:"1745290905104",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14467",width:"200",height:"200"};function j(e,l){return(0,p.uX)(),(0,p.CE)("svg",R,l[0]||(l[0]=[(0,p.Lk)("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z","p-id":"14468"},null,-1)]))}var I=a(3508);const F={},W=(0,I.A)(F,[["render",j]]);var $=W,V=a(2176),w=a(7471),C=a(7898),X=(a(7191),a(5143)),U=(a(493),a(9622),a(6622)),K=(a(4005),a(7233),a(5286),a(1210),a(8068),a(1421)),T=a(7445),x=a(7774),z=a(8180);a(5280),a(6447);const S={class:"dialog-footer"};var D={__name:"MigrateDialog",emits:["on-update-storage"],setup(e,{expose:l,emit:a}){const t=(0,m.KR)(!1),o=a,{t:u}=(0,T.s9)(),n=(0,m.KR)([]),r=(0,m.KR)({sourceStorageId:0,toStorageId:void 0}),i=(0,p.EW)((()=>n.value.filter((e=>e.storageId!==r.value.sourceStorageId)).map((e=>({label:`${e.description}`,value:e.storageId}))))),c=(0,m.Kh)({toStorageId:[{required:!0,message:u("cj.tooltip.global.select_empty",{name:u("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}]}),s=(0,m.KR)(null);function d(){s.value.validate((e=>{e?x.s.confirm(u("cj.dialog.storage.migrateConfirm"),"Warning",{confirmButtonText:u("cj.btn.basic.confirm"),cancelButtonText:u("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,g.db)({sourceStorageId:r.value.storageId,destStorageId:r.value.toStorageId}).then((e=>{0===e.code?(t.value=!1,o("on-update-storage",e.data,!0),(0,K.zo)(e)):(0,K.Ue)(e)}))})):(0,z.nk)({type:"error",message:u("cj.tooltip.global.has_error")})}))}return l({open:e=>{r.value.storageId=e,t.value=!0,n.value=[],(0,g.ho)().then((e=>{n.value=e.data.filter((e=>e.storageId!==r.value.storageId))})).catch((()=>{toStoragePool.value=[]}))}}),(e,l)=>{const a=U.P9,o=U.AV,u=X.xE,n=X.US,g=b.S2,k=C.kZ;return(0,p.uX)(),(0,p.Wv)(k,{modelValue:(0,m.R1)(t),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.i9)(t)?t.value=e:null),title:e.$t("cj.dialog.storage.migrate"),width:"400","close-on-click-modal":!1},{footer:(0,p.k6)((()=>[(0,p.Lk)("div",S,[(0,p.bF)(g,{onClick:l[1]||(l[1]=e=>t.value=!1)},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,p.bF)(g,{type:"primary",onClick:d},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,p.k6)((()=>[(0,p.bF)(n,{model:(0,m.R1)(r),"label-width":"auto",ref_key:"storage_ref",ref:s,rules:(0,m.R1)(c)},{default:(0,p.k6)((()=>[(0,p.bF)(u,{label:e.$t("cj.label.storage.toStoragePool"),prop:"toStorageId"},{default:(0,p.k6)((()=>[(0,p.bF)(o,{modelValue:(0,m.R1)(r).toStorageId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(r).toStorageId=e),placeholder:"Select",style:{width:"240px"}},{default:(0,p.k6)((()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,m.R1)(i),(e=>((0,p.uX)(),(0,p.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const L=D;var E=L,Q=a(9136);a(2890),a(2666),a(9343);const A={class:"dialog-footer"};var B={__name:"EditStorageCategoryDialog",emits:["on-update-storage"],setup(e,{expose:l,emit:a}){const t=(0,m.KR)(!1),o=a,u=(0,m.Kh)({storageId:"",supportCategory:[]});function n(){t.value=!1;let e="on-update-storage",l=g.Yr,a=0;u.supportCategory.forEach((e=>{a|=e}));let n={storageId:u.storageId,supportCategory:a};l(n).then((l=>{0===l.code?(o(e,l.data,!0),(0,K.zo)(l)):(0,K.Ue)(l)}))}return l({open:e=>{u.storageId=e.storageId,u.supportCategory=(0,k.n)(e.supportCategory),t.value=!0}}),(e,l)=>{const a=Q.dI,o=Q.o5,r=X.xE,i=X.US,c=b.S2,s=C.kZ;return(0,p.uX)(),(0,p.Wv)(s,{modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=e=>t.value=e),title:e.$t("cj.dialog.storage.edit"),width:"400","close-on-click-modal":!1},{footer:(0,p.k6)((()=>[(0,p.Lk)("div",A,[(0,p.bF)(c,{onClick:l[1]||(l[1]=e=>t.value=!1)},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,p.bF)(c,{type:"primary",onClick:n},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,p.k6)((()=>[(0,p.bF)(i,{model:u,"label-width":"auto"},{default:(0,p.k6)((()=>[(0,p.bF)(r,{label:e.$t("cj.label.storage.support")},{default:(0,p.k6)((()=>[(0,p.bF)(o,{modelValue:u.supportCategory,"onUpdate:modelValue":l[0]||(l[0]=e=>u.supportCategory=e)},{default:(0,p.k6)((()=>[(0,p.bF)(a,{label:e.$t("cj.enum.storageSupport.template"),value:1},null,8,["label"]),(0,p.bF)(a,{label:e.$t("cj.enum.storageSupport.disk"),value:2},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};const O=B;var q=O,M=a(9451);const N={class:"flex items-center"};var P=Object.assign({name:"ViewStorage"},{__name:"ViewStorage",setup(e){const l=(0,M.rd)(),a=(0,M.lq)(),{t:R}=(0,T.s9)(),j=(0,m.KR)("first"),I=(0,m.KR)({storageId:0,status:0,createTime:(new Date).getTime()}),F=(0,m.KR)(null),W=(0,m.KR)(null),C=(0,m.KR)(!0);function X(){C.value=!0,(0,g.em)({storageId:a.params.id}).then((e=>{0===e.code?Object.assign(I.value,e.data):(0,K.Ue)(e)})).finally((()=>{C.value=!1}))}function U(e){e===I.value.storageId&&z()}function z(){l.back(-1)}function S(e){l.push({path:`/host/${e}`})}function D(){x.s.confirm(R("cj.dialog.storage.cleanConfirm"),"Warning",{confirmButtonText:R("cj.btn.basic.confirm"),cancelButtonText:R("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,g.fC)({storageId:I.value.storageId}).then((e=>{0===e.code?(P(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function L(){F.value.open(I.value.storageId)}function Q(){x.s.confirm(R("cj.dialog.storage.deleteConfirm"),"Warning",{confirmButtonText:R("cj.btn.basic.confirm"),cancelButtonText:R("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,g.lh)({storageId:I.value.storageId}).then((e=>{0===e.code?(P(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function A(){x.s.confirm(R("cj.dialog.storage.maintenanceConfirm"),"Warning",{confirmButtonText:R("cj.btn.basic.confirm"),cancelButtonText:R("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,g.Lf)({storageId:I.value.storageId}).then((e=>{0===e.code?(P(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function B(){W.value.open(I.value)}function O(){x.s.confirm(R("cj.dialog.storage.registerConfirm"),"Info",{confirmButtonText:R("cj.btn.basic.confirm"),cancelButtonText:R("cj.btn.basic.cancel"),type:"info"}).then((()=>{(0,g.dO)({storageId:I.value.storageId}).then((e=>{0===e.code?(P(e.data),(0,K.zo)(e)):(0,K.Ue)(e)}))}))}function P(e){e.storageId===I.value.storageId&&Object.assign(I.value,{...e})}return(0,V.A)("storage_detail",X,P,U),(e,l)=>{const g=b.S2,R=i.MF,V=d.u,X=s.sI,U=c.C4,K=i.TS,T=r.ve,x=n.R7,M=u.v$,H=u.q,Z=o.IO,J=(0,p.gN)("Admin"),G=t.L;return(0,p.uX)(),(0,p.CE)("div",null,[(0,p.bF)(Z,{onBack:z},{content:(0,p.k6)((()=>[(0,p.Lk)("span",null,(0,v.v_)(e.$t("cj.tabs.storage")),1)])),extra:(0,p.k6)((()=>[(0,p.Lk)("div",N,["local"!==(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(g,{key:0,type:"",onClick:B,icon:(0,m.R1)(f.Edit)},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.edit")),1)])),_:1},8,["icon"])):(0,p.Q3)("",!0),1!==(0,m.R1)(I).status?((0,p.uX)(),(0,p.Wv)(g,{key:1,type:"success",onClick:O,icon:_.A},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.user.register")),1)])),_:1})):(0,p.Q3)("",!0),1===(0,m.R1)(I).status?(0,p.bo)(((0,p.uX)(),(0,p.Wv)(g,{key:2,type:"warning",onClick:A,icon:y.A},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.maintenance")),1)])),_:1})),[[J]]):(0,p.Q3)("",!0),[1,2].includes((0,m.R1)(I).status)?(0,p.bo)(((0,p.uX)(),(0,p.Wv)(g,{key:3,type:"primary",onClick:L,icon:h.A},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.migrate")),1)])),_:1})),[[J]]):(0,p.Q3)("",!0),[1,2].includes((0,m.R1)(I).status)?(0,p.bo)(((0,p.uX)(),(0,p.Wv)(g,{key:4,type:"warning",onClick:D,icon:$},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.storage.clean")),1)])),_:1})),[[J]]):(0,p.Q3)("",!0),(0,p.bo)(((0,p.uX)(),(0,p.Wv)(g,{type:"danger",onClick:Q,icon:(0,m.R1)(f.Delete)},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t("cj.btn.basic.delete")),1)])),_:1},8,["icon"])),[[J]])])])),default:(0,p.k6)((()=>[(0,p.bF)(H,{class:"demo-tabs",modelValue:(0,m.R1)(j),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.i9)(j)?j.value=e:null),type:"card"},{default:(0,p.k6)((()=>[(0,p.bF)(M,{label:e.$t("cj.tabs.basic"),name:"first"},{default:(0,p.k6)((()=>[(0,p.bo)(((0,p.uX)(),(0,p.Wv)(K,{border:"",column:2,style:{"margin-top":"10px"}},{default:(0,p.k6)((()=>[(0,p.bF)(R,{label:e.$t("cj.label.basic.id")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).storageId),1)])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.basic.name")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).name),1)])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.basic.description")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).description),1)])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.basic.type")},{default:(0,p.k6)((()=>[(0,p.bF)(V,null,{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).type),1)])),_:1})])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.storage.support")},{default:(0,p.k6)((()=>[(0,p.bF)(X,null,{default:(0,p.k6)((()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,m.R1)(k.zb)((0,m.R1)(I).supportCategory),(l=>((0,p.uX)(),(0,p.CE)("div",{key:l},[(0,p.bF)(V,null,{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(e.$t(l)),1)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["label"]),"local"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:0,label:e.$t("cj.label.host.label")},{default:(0,p.k6)((()=>[(0,p.bF)(U,{type:"primary",onClick:l[0]||(l[0]=e=>S((0,m.R1)(I).host.hostId))},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).host.displayName),1)])),_:1})])),_:1},8,["label"])):(0,p.Q3)("",!0),"local"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:1,label:e.$t("cj.label.storage.local.path")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).mountPath),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"nfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:2,label:e.$t("cj.label.storage.nfs.server")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).uri),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"nfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:3,label:e.$t("cj.label.storage.nfs.export")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).path),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"nfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:4,label:e.$t("cj.label.storage.mountPath")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).mountPath),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"glusterfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:5,label:e.$t("cj.label.storage.gluster.volume")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).volume),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"glusterfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:6,label:e.$t("cj.label.storage.gluster.server")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).uri),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"glusterfs"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:7,label:e.$t("cj.label.storage.mountPath")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(I).mountPath),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"ceph-rbd"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:8,label:e.$t("cj.label.storage.ceph.mon")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).uri),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"ceph-rbd"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:9,label:e.$t("cj.label.storage.ceph.pool")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).pool),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),"ceph-rbd"===(0,m.R1)(I).type?((0,p.uX)(),(0,p.Wv)(R,{key:10,label:e.$t("cj.label.storage.ceph.user")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)(JSON.parse((0,m.R1)(I).param).username),1)])),_:1},8,["label"])):(0,p.Q3)("",!0),(0,p.bF)(R,{label:e.$t("cj.label.disk.capacity")},{default:(0,p.k6)((()=>[(0,p.bF)(x,{placement:"bottom",effect:"light"},{content:(0,p.k6)((()=>[(0,p.bF)(K,{column:1,border:""},{default:(0,p.k6)((()=>[(0,p.bF)(R,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(k.I5)((0,m.R1)(I).allocation)),1)])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(k.I5)((0,m.R1)(I).capacity)),1)])),_:1},8,["label"])])),_:1})])),default:(0,p.k6)((()=>[(0,p.bF)(T,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,m.R1)(k.Nj)((0,m.R1)(I).allocation,(0,m.R1)(I).capacity)),status:"success"},null,8,["percentage"])])),_:1})])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.basic.status")},{default:(0,p.k6)((()=>[(0,p.bF)(V,{type:(0,m.R1)(k.wB)((0,m.R1)(I).status)},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(k.Q3)((0,m.R1)(I).status)),1)])),_:1},8,["type"])])),_:1},8,["label"]),(0,p.bF)(R,{label:e.$t("cj.label.basic.createTime")},{default:(0,p.k6)((()=>[(0,p.eW)((0,v.v_)((0,m.R1)(k.BU)((0,m.R1)(I).createTime)),1)])),_:1},8,["label"])])),_:1})),[[G,(0,m.R1)(C)]])])),_:1},8,["label"]),(0,p.bF)(M,{label:e.$t("cj.tabs.config"),name:"second"},{default:(0,p.k6)((()=>[(0,p.bF)(w.A,{allocateType:4,allocateId:Number((0,m.R1)(a).params.id)},null,8,["allocateId"])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1}),(0,p.bF)(E,{ref_key:"migrateDialogRef",ref:F,onOnUpdateStorage:P},null,512),(0,p.bF)(q,{ref_key:"editStorageCategoryRef",ref:W,onOnUpdateStorage:P},null,512)])}}});const H=(0,I.A)(P,[["__scopeId","data-v-1846b66c"]]);var Z=H},8882:function(e,l,a){a.d(l,{A:function(){return c}});var t=a(6918);const o={t:"1745290465121",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11419",width:"200",height:"200"};function u(e,l){return(0,t.uX)(),(0,t.CE)("svg",o,l[0]||(l[0]=[(0,t.Lk)("path",{d:"M512 0c282.7776 0 512 229.2224 512 512 0 282.7776-229.2224 512-512 512C229.2224 1024 0 794.7776 0 512 0 229.2224 229.2224 0 512 0z m0 51.2C257.501867 51.2 51.2 257.501867 51.2 512s206.301867 460.8 460.8 460.8 460.8-206.301867 460.8-460.8S766.498133 51.2 512 51.2z m217.6 691.2a12.8 12.8 0 1 1 0 25.6h-435.2a12.8 12.8 0 1 1 0-25.6h435.2zM614.4 678.4a12.8 12.8 0 1 1 0 25.6H409.6a12.8 12.8 0 1 1 0-25.6h204.8zM742.4 256a25.6 25.6 0 0 1 25.6 25.6V614.4a25.6 25.6 0 0 1-25.6 25.6h-460.8A25.6 25.6 0 0 1 256 614.4V281.6a25.6 25.6 0 0 1 25.6-25.6h460.8z m-19.2 25.6h-422.4c-10.615467 0-19.2 8.6016-19.2 19.217067v294.365866c0 10.615467 8.6016 19.217067 19.2 19.217067h422.4c10.615467 0 19.2-8.6016 19.2-19.217067V300.817067c0-10.615467-8.6016-19.217067-19.2-19.217067z m-71.355733 95.112533c28.791467 0.802133 47.598933 14.199467 56.388266 40.209067l-28.791466 6.6048c-3.9936-13.602133-13.192533-20.821333-27.5968-21.6064-20.411733 1.194667-31.197867 15.394133-32.4096 42.5984 0.802133 27.5968 11.605333 42.205867 32.4096 43.810133 16.384-0.4096 25.992533-10.205867 28.791466-29.405866l28.808534 8.994133c-6.8096 30.0032-26.0096 45.0048-57.6 45.0048-40.789333-1.9968-62.208-24.797867-64.2048-68.4032 1.9968-42.8032 23.3984-65.399467 64.2048-67.805867z m-164.4032 1.809067l50.397866 80.9984c0.4096 0.802133 1.006933 1.792 1.809067 3.003733 2.798933 4.4032 4.590933 7.799467 5.393067 10.1888v-0.597333a238.216533 238.216533 0 0 1-0.597334-19.797333V378.538667h28.194134v131.9936H542.037333l-52.189866-82.7904-7.202134-11.997867c0.392533 5.597867 0.597333 12.987733 0.597334 22.186667v72.6016h-28.194134V378.538667h32.392534z m-108.014934 105.557333c0-0.3584 0.4096-1.365333 1.211734-2.952533 0.802133-2.013867 1.792-5.410133 3.003733-10.205867l29.405867-92.398933H445.44l-49.800533 131.9936h-33.604267L311.637333 378.538667h32.392534l31.214933 92.398933c0.802133 2.9696 1.706667 5.922133 2.679467 8.840533l1.501866 4.317867z",fill:"#323132","p-id":"11420"},null,-1)]))}var n=a(3508);const r={},i=(0,n.A)(r,[["render",u]]);var c=i}}]);