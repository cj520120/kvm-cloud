"use strict";(self["webpackChunkkvm_cloud_web"]=self["webpackChunkkvm_cloud_web"]||[]).push([[532],{573:function(e,t,l){l.d(t,{fR:function(){return v}});var a=l(6918),o=l(4673),i=l(1654),n=l(2267);const r=(0,n.b_)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:(0,n.jq)(String),default:"solid"}});var s=l(7860),u=l(7636);const c=(0,a.pM)({name:"ElDivider"}),d=(0,a.pM)({...c,props:r,setup(e){const t=e,l=(0,u.DU)("divider"),n=(0,a.EW)((()=>l.cssVar({"border-style":t.borderStyle})));return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)([(0,i.R1)(l).b(),(0,i.R1)(l).m(e.direction)]),style:(0,o.Tr)((0,i.R1)(n)),role:"separator"},[e.$slots.default&&"vertical"!==e.direction?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)([(0,i.R1)(l).e("text"),(0,i.R1)(l).is(e.contentPosition)])},[(0,a.RG)(e.$slots,"default")],2)):(0,a.Q3)("v-if",!0)],6))}});var p=(0,s.A)(d,[["__file","divider.vue"]]),b=l(713);const v=(0,b.GU)(p)},2403:function(e,t,l){l(4974),l(754)},2828:function(e,t,l){l.r(t),l.d(t,{default:function(){return ne}});var a=l(6845),o=(l(4974),l(8206),l(6192)),i=(l(7063),l(3295)),n=(l(9994),l(6951)),r=(l(5560),l(4279)),s=(l(3110),l(2889)),u=(l(2914),l(7477)),c=(l(6788),l(6672),l(7836)),d=(l(3020),l(5567),l(6918)),p=l(4673),b=l(1654),v=l(4878),m=l(6555),f=l(2303);const g={t:"1745290632537",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12529",width:"200",height:"200"};function k(e,t){return(0,d.uX)(),(0,d.CE)("svg",g,t[0]||(t[0]=[(0,d.Lk)("path",{d:"M950.857143 932.571429V310.857143q0-7.428571-5.428572-12.857143T932.571429 292.571429H310.857143q-7.428571 0-12.857143 5.428571T292.571429 310.857143v621.714286q0 7.428571 5.428571 12.857142t12.857143 5.428572h621.714286q7.428571 0 12.857142-5.428572t5.428572-12.857142z m73.142857-621.714286v621.714286q0 37.714286-26.857143 64.571428t-64.571428 26.857143H310.857143q-37.714286 0-64.571429-26.857143t-26.857143-64.571428V310.857143q0-37.714286 26.857143-64.571429t64.571429-26.857143h621.714286q37.714286 0 64.571428 26.857143t26.857143 64.571429z m-219.428571-219.428572v91.428572h-73.142858V91.428571q0-7.428571-5.428571-12.857142T713.142857 73.142857H91.428571q-7.428571 0-12.857142 5.428572T73.142857 91.428571v621.714286q0 7.428571 5.428572 12.857143t12.857142 5.428571h91.428572v73.142858H91.428571q-37.714286 0-64.571428-26.857143T0 713.142857V91.428571Q0 53.714286 26.857143 26.857143T91.428571 0h621.714286q37.714286 0 64.571429 26.857143t26.857143 64.571428z","p-id":"12530"},null,-1)]))}var y=l(3508);const h={},_=(0,y.A)(h,[["render",k]]);var R=_,j=l(9027),w=l(7412);const $={t:"1745290762878",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13487",width:"200",height:"200"};function W(e,t){return(0,d.uX)(),(0,d.CE)("svg",$,t[0]||(t[0]=[(0,d.Lk)("path",{d:"M410.816 673.514667L230.997333 853.333333H384v85.333334H85.333333V640h85.333334v153.002667l179.818666-179.84 60.330667 60.373333z m-53.632-256L170.666667 230.997333V384H85.333333V85.333333h298.666667v85.333334h-153.002667l186.517334 186.517333-60.330667 60.330667z m234.666667-45.696L793.002667 170.666667H640V85.333333h298.666667v298.666667h-85.333334v-153.002667l-201.152 201.173334-60.330666-60.373334z m67.029333 226.709333L853.333333 793.002667V640h85.333334v298.666667H640v-85.333334h153.002667l-194.474667-194.453333 60.352-60.352z",fill:"#000000","p-id":"13488"},null,-1)]))}const F={},C=(0,y.A)(F,[["render",W]]);var I=C,x=l(3364),V=l(7898),X=(l(7191),l(5143)),E=(l(493),l(9622),l(6622)),T=(l(4005),l(7233),l(5286),l(1210),l(8068),l(7770)),S=l(1421),U=l(7445),K=l(7774),A=l(8180);l(5280),l(6447);const z={class:"dialog-footer"};var L={__name:"MigrateDialog",emits:["on-update-disk"],setup(e,{expose:t,emit:l}){const a=(0,b.KR)(!1),o=l,{t:i}=(0,U.s9)(),n=(0,b.KR)({id:0,sourceStorageId:0,storageId:void 0}),r=(0,b.Kh)({storageId:[{required:!0,message:i("cj.tooltip.global.select_empty",{name:i("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}]}),s=(0,b.KR)([]),u=(0,b.KR)(null);function m(){u.value.validate((e=>{e?K.s.confirm(i("cj.dialog.disk.migrateConfirm"),"Warning",{confirmButtonText:i("cj.btn.basic.confirm"),cancelButtonText:i("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.TI)({sourceVolumeId:n.value.id,storageId:n.value.storageId}).then((e=>{0===e.code?(a.value=!1,o("on-update-disk",e.data.source,!0),o("on-update-disk",e.data.migrate,!0),(0,S.zo)(e)):(0,S.Ue)(e)}))})):(0,A.nk)({type:"error",message:i("cj.tooltip.global.has_error")})}))}return t({open:(e,t)=>{n.value.id=e,n.value.sourceStorageId=t,n.value.storageId=void 0,a.value=!0,s.value=[],(0,T.ho)().then((e=>{let{data:t=[]}=e||{};s.value=t.filter((e=>e.storageId!==n.value.sourceStorageId&&1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),s.value=[...s.value]}))}}),(e,t)=>{const l=E.P9,o=E.AV,i=X.xE,v=X.US,f=c.S2,g=V.kZ;return(0,d.uX)(),(0,d.Wv)(g,{modelValue:(0,b.R1)(a),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,b.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.disk.migrate"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",z,[(0,d.bF)(f,{onClick:t[1]||(t[1]=e=>a.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(f,{type:"primary",onClick:m},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(v,{ref_key:"disk_ref",ref:u,model:(0,b.R1)(n),"label-width":"auto",rules:(0,b.R1)(r)},{default:(0,d.k6)((()=>[(0,d.bF)(i,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,d.k6)((()=>[(0,d.bF)(o,{modelValue:(0,b.R1)(n).storageId,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,b.R1)(n).storageId=e),style:{width:"240px"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,b.R1)(s),(t=>((0,d.uX)(),(0,d.Wv)(l,{key:t.value,label:t.hasLanguage?e.$t(t.label):t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const Q=L;var D=Q,B=l(7255);l(756);const q={class:"dialog-footer"};var P={__name:"CloneDialog",emits:["on-update-disk"],setup(e,{expose:t,emit:l}){const a=(0,b.KR)(!1),o=l,{t:i}=(0,U.s9)(),n=(0,b.Kh)({description:[{required:!0,message:i("cj.tooltip.global.not_empty",{name:i("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:i("cj.tooltip.global.length_error",{name:i("cj.label.basic.description")}),trigger:["blur","change"]}],storageId:[{required:!0,message:i("cj.tooltip.global.select_empty",{name:i("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}]}),r=(0,b.KR)({id:0,description:"",storageId:0}),s=(0,b.KR)(null),u=(0,b.KR)([]);function m(){s.value.validate((e=>{e?K.s.confirm(i("cj.dialog.disk.cloneConfirm"),"Warning",{confirmButtonText:i("cj.btn.basic.confirm"),cancelButtonText:i("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Di)({sourceVolumeId:r.value.id,storageId:r.value.storageId,description:r.value.description}).then((e=>{0===e.code?(a.value=!1,o("on-update-disk",e.data.source,!0),o("on-update-disk",e.data.clone,!0),(0,S.zo)(e)):(0,S.Ue)(e)}))})):(0,A.nk)({type:"error",message:i("cj.tooltip.global.has_error")})}))}return t({open:e=>{r.value.id=e,r.value.description="",r.value.storageId=0,a.value=!0,u.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0}],(0,T.ho)().then((e=>{let{data:t=[]}=e||{};u.value=t.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),u.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...u.value]}))}}),(e,t)=>{const l=B.WK,o=X.xE,i=E.P9,v=E.AV,f=X.US,g=c.S2,k=V.kZ;return(0,d.uX)(),(0,d.Wv)(k,{modelValue:(0,b.R1)(a),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,b.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.disk.clone"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",q,[(0,d.bF)(g,{onClick:t[2]||(t[2]=e=>a.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(g,{type:"primary",onClick:m},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(f,{ref_key:"disk_ref",ref:s,model:(0,b.R1)(r),"label-width":"auto",rules:(0,b.R1)(n)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,d.k6)((()=>[(0,d.bF)(l,{modelValue:(0,b.R1)(r).description,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,b.R1)(r).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,d.bF)(o,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,d.k6)((()=>[(0,d.bF)(v,{modelValue:(0,b.R1)(r).storageId,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,b.R1)(r).storageId=e),style:{width:"240px"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,b.R1)(u),(t=>((0,d.uX)(),(0,d.Wv)(i,{key:t.value,label:t.hasLanguage?e.$t(t.label):t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const O=P;var M=O;const N={class:"dialog-footer"};var G={__name:"TemplateDialog",emits:["on-update-disk"],setup(e,{expose:t,emit:l}){const a=(0,b.KR)(!1),o=l,{t:i}=(0,U.s9)(),n=(0,b.KR)({id:0,description:""}),r=(0,b.KR)(null),s=(0,b.Kh)({description:[{required:!0,message:i("cj.tooltip.global.not_empty",{name:i("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:i("cj.tooltip.global.length_error",{name:i("cj.label.basic.description")}),trigger:["blur","change"]}]});function u(){r.value.validate((e=>{e?K.s.confirm(i("cj.dialog.disk.templateConfirm"),"Warning",{confirmButtonText:i("cj.btn.basic.confirm"),cancelButtonText:i("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Vy)({volumeId:n.value.id,name:n.value.description}).then((e=>{0===e.code?(a.value=!1,o("on-update-disk",e.data,!0),(0,S.zo)(e)):(0,S.Ue)(e)}))})):(0,A.nk)({type:"error",message:i("cj.tooltip.global.has_error")})}))}return t({open:e=>{n.value.id=e,n.value.description="",a.value=!0}}),(e,t)=>{const l=B.WK,o=X.xE,i=X.US,v=c.S2,m=V.kZ;return(0,d.uX)(),(0,d.Wv)(m,{modelValue:(0,b.R1)(a),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,b.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.disk.template"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",N,[(0,d.bF)(v,{onClick:t[1]||(t[1]=e=>a.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(v,{type:"primary",onClick:u},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(i,{ref_key:"disk_ref",ref:r,model:(0,b.R1)(n),"label-width":"auto",rules:(0,b.R1)(s)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,d.k6)((()=>[(0,d.bF)(l,{modelValue:(0,b.R1)(n).description,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,b.R1)(n).description=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const H=G;var Z=H;const J={class:"dialog-footer"};var Y={__name:"ResizeDialog",emits:["on-update-disk"],setup(e,{expose:t,emit:l}){const a=(0,b.KR)(!1),o=l,{t:i}=(0,U.s9)(),n=(0,b.KR)({id:0,size:0}),r=(0,b.Kh)({size:[{required:!0,message:i("cj.tooltip.global.not_empty",{name:i("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:i("cj.tooltip.global.must_number",{name:i("cj.label.disk.capacity")}),trigger:["blur","change"]}]}),s=(0,b.KR)(null);function u(){s.value.validate((e=>{e?K.s.confirm(i("cj.dialog.disk.resizeConfirm"),"Warning",{confirmButtonText:i("cj.btn.basic.confirm"),cancelButtonText:i("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.Wq)({volumeId:n.value.id,size:n.value.size}).then((e=>{0===e.code?(a.value=!1,o("on-update-disk",e.data.source,!0),(0,S.zo)(e)):(0,S.Ue)(e)}))})):(0,A.nk)({type:"error",message:i("cj.tooltip.global.has_error")})}))}return t({open:e=>{n.value.id=e,n.value.size=10,a.value=!0}}),(e,t)=>{const l=B.WK,o=X.xE,i=X.US,v=c.S2,m=V.kZ;return(0,d.uX)(),(0,d.Wv)(m,{modelValue:(0,b.R1)(a),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,b.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.disk.resize"),width:"400","close-on-click-modal":!1},{footer:(0,d.k6)((()=>[(0,d.Lk)("div",J,[(0,d.bF)(v,{onClick:t[1]||(t[1]=e=>a.value=!1)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,d.bF)(v,{type:"primary",onClick:u},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,d.k6)((()=>[(0,d.bF)(i,{ref_key:"disk_ref",ref:s,model:(0,b.R1)(n),"label-width":"auto",rules:(0,b.R1)(r)},{default:(0,d.k6)((()=>[(0,d.bF)(o,{label:e.$t("cj.label.disk.capacity"),prop:"size"},{default:(0,d.k6)((()=>[(0,d.bF)(l,{modelValue:(0,b.R1)(n).size,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,b.R1)(n).size=e),modelModifiers:{number:!0}},{append:(0,d.k6)((()=>t[3]||(t[3]=[(0,d.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const ee=Y;var te=ee,le=l(9451);const ae={key:0,class:"flex items-center"};var oe=Object.assign({name:"ViewDisk"},{__name:"ViewDisk",setup(e){const t=(0,le.rd)(),l=(0,le.lq)(),{t:g}=(0,U.s9)(),k=(0,b.KR)(!0),y=(0,b.KR)({id:0,status:0,stroage:{description:"",storageId:0},createTime:(new Date).getTime()}),h=(0,b.KR)(null),_=(0,b.KR)(null),$=(0,b.KR)(null),W=(0,b.KR)(null);function F(){t.back(-1)}function C(e){t.push({path:e})}function V(){h.value.open(y.value.volumeId,y.value.storageId)}function X(){_.value.open(y.value.volumeId)}function E(){$.value.open(y.value.volumeId)}function T(){W.value.open(y.value.volumeId)}function z(){K.s.confirm(g("cj.dialog.disk.deleteConfirm"),"Warning",{confirmButtonText:g("cj.btn.basic.confirm"),cancelButtonText:g("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,v.RN)({volumeId:y.value.volumeId}).then((e=>{0===e.code?(L(e.data),(0,S.zo)(e)):(0,S.Ue)(e)}))}))}function L(e){e.volumeId===y.value.volumeId&&Object.assign(y.value,e)}return(0,x.A)("disk_detail",(()=>{k.value=!0,(0,v.e9)({volumeId:l.params.id}).then((e=>{0===e.code?y.value={...e.data}:(0,A.nk)({type:"error",message:e.message})})).finally((()=>{k.value=!1}))}),(e=>{L(e)}),(e=>{e===y.value.volumeId&&F()})),(e,t)=>{const l=c.S2,v=r.MF,g=u.u,x=s.C4,S=r.TS,U=n.ve,K=i.R7,A=o.IO,Q=a.L;return(0,d.uX)(),(0,d.CE)("div",null,[(0,d.bF)(A,{onBack:F},{content:(0,d.k6)((()=>[(0,d.Lk)("span",null,(0,p.v_)(e.$t("cj.tabs.disk")),1)])),extra:(0,d.k6)((()=>["disk"===(0,b.R1)(y).device?((0,d.uX)(),(0,d.CE)("div",ae,[1===(0,b.R1)(y).status?((0,d.uX)(),(0,d.Wv)(l,{key:0,type:"",onClick:T,icon:I},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.disk.resize")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,b.R1)(y).status?((0,d.uX)(),(0,d.Wv)(l,{key:1,type:"primary",onClick:E,icon:j.A},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.disk.createTemplate")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,b.R1)(y).status?((0,d.uX)(),(0,d.Wv)(l,{key:2,type:"primary",onClick:X,icon:R},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.disk.clone")),1)])),_:1})):(0,d.Q3)("",!0),1===(0,b.R1)(y).status?((0,d.uX)(),(0,d.Wv)(l,{key:3,type:"warning",onClick:V,icon:w.A},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.migrate")),1)])),_:1})):(0,d.Q3)("",!0),[1,9,10].includes((0,b.R1)(y).status)&&0===(0,b.R1)(y).guestId?((0,d.uX)(),(0,d.Wv)(l,{key:4,type:"danger",onClick:z,icon:(0,b.R1)(f.Delete)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)(e.$t("cj.btn.basic.delete")),1)])),_:1},8,["icon"])):(0,d.Q3)("",!0)])):(0,d.Q3)("",!0)])),default:(0,d.k6)((()=>[(0,d.bo)(((0,d.uX)(),(0,d.Wv)(S,{border:"",column:2,style:{"margin-top":"10px"}},{default:(0,d.k6)((()=>[(0,d.bF)(v,{label:e.$t("cj.label.basic.id")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).volumeId),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.name")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).name),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.serial")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).serial),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.deviceType")},{default:(0,d.k6)((()=>[(0,d.bF)(g,null,{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).device),1)])),_:1})])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.path")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).path),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.description")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).description),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.type")},{default:(0,d.k6)((()=>[(0,d.bF)(g,null,{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).type),1)])),_:1})])),_:1},8,["label"]),(0,b.R1)(y).host?((0,d.uX)(),(0,d.Wv)(v,{key:0,label:e.$t("cj.label.host.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:t[0]||(t[0]=e=>C(`/host/${(0,b.R1)(y).hostId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).host.displayName),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,b.R1)(y).template&&"disk"===(0,b.R1)(y).device?((0,d.uX)(),(0,d.Wv)(v,{key:1,label:e.$t("cj.label.template.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:t[1]||(t[1]=e=>C(`/template/${(0,b.R1)(y).template.templateId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).template.name),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,b.R1)(y).guest?((0,d.uX)(),(0,d.Wv)(v,{key:2,label:e.$t("cj.label.vm.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:t[2]||(t[2]=e=>C(`/vm/${(0,b.R1)(y).guest.guestId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).guest.description),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,b.R1)(y).storage&&"disk"===(0,b.R1)(y).device?((0,d.uX)(),(0,d.Wv)(v,{key:3,label:e.$t("cj.label.storage.label")},{default:(0,d.k6)((()=>[(0,d.bF)(x,{type:"primary",onClick:t[3]||(t[3]=e=>C(`/storage/${(0,b.R1)(y).storage.storageId}`))},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(y).storage.description),1)])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),"disk"===(0,b.R1)(y).device?((0,d.uX)(),(0,d.Wv)(v,{key:4,label:e.$t("cj.label.disk.capacity")},{default:(0,d.k6)((()=>[(0,d.bF)(K,{placement:"bottom",effect:"light"},{content:(0,d.k6)((()=>[(0,d.bF)(S,{column:1,border:""},{default:(0,d.k6)((()=>[(0,d.bF)(v,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(m.yv)((0,b.R1)(y).allocation)),1)])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(m.yv)((0,b.R1)(y).capacity)),1)])),_:1},8,["label"])])),_:1})])),default:(0,d.k6)((()=>[(0,d.bF)(U,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,b.R1)(m.Nj)((0,b.R1)(y).allocation,(0,b.R1)(y).capacity)),status:"success"},null,8,["percentage"])])),_:1})])),_:1},8,["label"])):(0,d.Q3)("",!0),(0,d.bF)(v,{label:e.$t("cj.label.basic.status")},{default:(0,d.k6)((()=>[(0,d.bF)(g,{type:(0,b.R1)(m.QJ)((0,b.R1)(y).status)},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(m._k)((0,b.R1)(y).status)),1)])),_:1},8,["type"])])),_:1},8,["label"]),(0,d.bF)(v,{label:e.$t("cj.label.basic.createTime")},{default:(0,d.k6)((()=>[(0,d.eW)((0,p.v_)((0,b.R1)(m.BU)((0,b.R1)(y).createTime)),1)])),_:1},8,["label"])])),_:1})),[[Q,(0,b.R1)(k)]])])),_:1}),(0,d.bF)(D,{ref_key:"migrateDialogRef",ref:h,onOnUpdateDisk:L},null,512),(0,d.bF)(M,{ref_key:"cloneDialogRef",ref:_,onOnUpdateDisk:L},null,512),(0,d.bF)(Z,{ref_key:"templateDialogRef",ref:$,onOnUpdateDisk:L},null,512),(0,d.bF)(te,{ref_key:"resizeDialogRef",ref:W,onOnUpdateDisk:L},null,512)])}}});const ie=(0,y.A)(oe,[["__scopeId","data-v-6f455e35"]]);var ne=ie},2890:function(e,t,l){l(4974)},3364:function(e,t,l){l.d(t,{A:function(){return o}});var a=l(6918);function o(e,t,l,o){const i=(0,a.WQ)("websocket");(0,a.sV)((()=>{i.subscribe_notify(e,(e=>{if(2===e.type){let t=e.data;0==t.code?l(t.data):4000001==t.code&&o(e.id)}})),i.subscribe_connect_notify(e,(()=>{t()})),i.init(),t()})),(0,a.xo)((()=>{i.unsubscribe_notify(e),i.unsubscribe_connect_notify(e)}))}},3568:function(e,t,l){l(4974)},3979:function(e,t,l){l.d(t,{Vc:function(){return W}});var a=l(6918),o=l(1654),i=l(4673),n=l(3295),r=l(9504),s=l(2267),u=l(4603),c=l(5092),d=l(2386);const p=(0,s.b_)({trigger:u.p.trigger,triggerKeys:u.p.triggerKeys,placement:r.Qy.placement,disabled:u.p.disabled,visible:c.E.visible,transition:c.E.transition,popperOptions:r.Qy.popperOptions,tabindex:r.Qy.tabindex,content:c.E.content,popperStyle:c.E.popperStyle,popperClass:c.E.popperClass,enterable:{...c.E.enterable,default:!0},effect:{...c.E.effect,default:"light"},teleported:c.E.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),b={"update:visible":e=>(0,d.Lm)(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0};var v=l(7860),m=l(7636),f=l(2679);const g="onUpdate:visible",k=(0,a.pM)({name:"ElPopover"}),y=(0,a.pM)({...k,props:p,emits:b,setup(e,{expose:t,emit:l}){const r=e,s=(0,a.EW)((()=>r[g])),u=(0,m.DU)("popover"),c=(0,o.KR)(),d=(0,a.EW)((()=>{var e;return null==(e=(0,o.R1)(c))?void 0:e.popperRef})),p=(0,a.EW)((()=>[{width:(0,f._V)(r.width)},r.popperStyle])),b=(0,a.EW)((()=>[u.b(),r.popperClass,{[u.m("plain")]:!!r.content}])),v=(0,a.EW)((()=>r.transition===`${u.namespace.value}-fade-in-linear`)),k=()=>{var e;null==(e=c.value)||e.hide()},y=()=>{l("before-enter")},h=()=>{l("before-leave")},_=()=>{l("after-enter")},R=()=>{l("update:visible",!1),l("after-leave")};return t({popperRef:d,hide:k}),(e,t)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(n.R7),(0,a.v6)({ref_key:"tooltipRef",ref:c},e.$attrs,{trigger:e.trigger,"trigger-keys":e.triggerKeys,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":(0,o.R1)(b),"popper-style":(0,o.R1)(p),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":(0,o.R1)(v),"onUpdate:visible":(0,o.R1)(s),onBeforeShow:y,onBeforeHide:h,onShow:_,onHide:R}),{content:(0,a.k6)((()=>[e.title?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,i.C4)((0,o.R1)(u).e("title")),role:"title"},(0,i.v_)(e.title),3)):(0,a.Q3)("v-if",!0),(0,a.RG)(e.$slots,"default",{},(()=>[(0,a.eW)((0,i.v_)(e.content),1)]))])),default:(0,a.k6)((()=>[e.$slots.reference?(0,a.RG)(e.$slots,"reference",{key:0}):(0,a.Q3)("v-if",!0)])),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var h=(0,v.A)(y,[["__file","popover.vue"]]);const _=(e,t)=>{const l=t.arg||t.value,a=null==l?void 0:l.popperRef;a&&(a.triggerRef=e)};var R={mounted(e,t){_(e,t)},updated(e,t){_(e,t)}};const j="popover";var w=l(713);const $=(0,w.PZ)(R,j),W=(0,w.GU)(h,{directive:$})},4878:function(e,t,l){l.d(t,{Di:function(){return c},Ke:function(){return r},RN:function(){return p},TI:function(){return s},UQ:function(){return i},Vy:function(){return d},Wq:function(){return u},Xf:function(){return b},e9:function(){return o},u_:function(){return n}});var a=l(3162);const o=(e={})=>(0,a.A)({url:"api/volume/info",params:e}),i=(e={})=>(0,a.A)({url:"api/volume/not/attach/all",params:e}),n=(e={})=>(0,a.A)({url:"api/volume/search",params:e}),r=(e={})=>(0,a.A)({url:"api/volume/create",params:e,method:"put"}),s=(e={})=>(0,a.A)({url:"api/volume/migrate",data:e,method:"PUT"}),u=(e={})=>(0,a.A)({url:"api/volume/resize",params:e,method:"POST"}),c=(e={})=>(0,a.A)({url:"api/volume/clone",params:e,method:"PUT"}),d=(e={})=>(0,a.A)({url:"api/volume/template/create",params:e,method:"put"}),p=(e={})=>(0,a.A)({url:"api/volume/destroy",params:e,method:"delete"}),b=(e={})=>(0,a.A)({url:"api/volume/all",params:e})},5560:function(e,t,l){l(4974)},5759:function(e,t,l){l.r(t),l.d(t,{default:function(){return Q}});var a=l(6845),o=(l(4974),l(8206),l(9464)),i=(l(2708),l(6390)),n=(l(8145),l(2889)),r=(l(2914),l(3295)),s=(l(9994),l(6951)),u=(l(5560),l(4279)),c=(l(3110),l(6672),l(7477)),d=(l(6788),l(1177),l(3979)),p=(l(2403),l(9136)),b=(l(2890),l(2666),l(5143)),v=(l(493),l(7836)),m=(l(3020),l(7255)),f=(l(756),l(9622),l(6622)),g=(l(4005),l(7233),l(5567),l(5286),l(8068),l(6918)),k=l(1654),y=l(4673),h=l(4878),_=l(7770),R=l(7861),j=l(2303),w=l(6555),$=l(7898),W=(l(7191),l(1210),l(1421)),F=l(7445),C=l(8180);l(6447);const I={class:"dialog-footer"};var x={__name:"EditDiskDialog",emits:["on-create-disk"],setup(e,{expose:t,emit:l}){const a=(0,k.KR)(!1),o=l,{t:i}=(0,F.s9)(),n=(0,k.Kh)({description:"",storageId:0,capacity:100}),r=(0,k.Kh)({description:[{required:!0,message:i("cj.tooltip.global.not_empty",{name:i("cj.label.basic.description")}),trigger:["blur","change"]},{min:1,max:32,message:i("cj.tooltip.global.length_error",{name:i("cj.label.basic.description")}),trigger:["blur","change"]}],storageId:[{required:!0,message:i("cj.tooltip.global.select_empty",{name:i("cj.label.storage.toStoragePool")}),trigger:["blur","change"]}],capacity:[{required:!0,message:i("cj.tooltip.global.not_empty",{name:i("cj.label.disk.capacity")}),trigger:["blur","change"]},{type:"number",message:i("cj.tooltip.global.must_number",{name:i("cj.label.disk.capacity")}),trigger:["blur","change"]}]}),s=(0,k.KR)(null),u=(0,k.KR)([]);function c(){s.value.validate((e=>{if(e){let e="on-create-disk",t=h.Ke,l={description:n.description,storageId:n.storageId,volumeSize:n.capacity};t(l).then((t=>{0===t.code?(a.value=!1,o(e,t.data,!0),(0,W.zo)(t)):(0,W.Ue)(t)}))}else(0,C.nk)({type:"error",message:i("cj.tooltip.global.has_error")})}))}return t({open:()=>{a.value=!0,n.description="",n.storageId=0,n.capacity=100,u.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0}],(0,_.ho)().then((e=>{let{data:t=[]}=e||{};u.value=t.filter((e=>1===e.status&&2===(2&e.supportCategory))).map((e=>({label:e.description,value:e.storageId}))),u.value=[{label:"cj.label.select.auto",value:0,hasLanguage:!0},...u.value]}))}}),(e,t)=>{const l=m.WK,o=b.xE,i=f.P9,d=f.AV,p=b.US,h=v.S2,_=$.kZ;return(0,g.uX)(),(0,g.Wv)(_,{modelValue:(0,k.R1)(a),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,k.i9)(a)?a.value=e:null),title:e.$t("cj.dialog.disk.create"),width:"600","close-on-click-modal":!1},{footer:(0,g.k6)((()=>[(0,g.Lk)("div",I,[(0,g.bF)(h,{onClick:t[3]||(t[3]=e=>a.value=!1)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.cancel")),1)])),_:1}),(0,g.bF)(h,{type:"primary",onClick:c},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.confirm")),1)])),_:1})])])),default:(0,g.k6)((()=>[(0,g.bF)(p,{ref_key:"disk_ref",ref:s,model:(0,k.R1)(n),"label-width":"auto",rules:(0,k.R1)(r)},{default:(0,g.k6)((()=>[(0,g.bF)(o,{label:e.$t("cj.label.basic.description"),prop:"description"},{default:(0,g.k6)((()=>[(0,g.bF)(l,{modelValue:(0,k.R1)(n).description,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,k.R1)(n).description=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(o,{label:e.$t("cj.label.storage.toStoragePool"),prop:"storageId"},{default:(0,g.k6)((()=>[(0,g.bF)(d,{modelValue:(0,k.R1)(n).storageId,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,k.R1)(n).storageId=e),style:{width:"240px"}},{default:(0,g.k6)((()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,k.R1)(u),(t=>((0,g.uX)(),(0,g.Wv)(i,{key:t.value,label:t.hasLanguage?e.$t(t.label):t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(o,{label:e.$t("cj.label.disk.capacity"),prop:"capacity"},{default:(0,g.k6)((()=>[(0,g.bF)(l,{modelValue:(0,k.R1)(n).capacity,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,k.R1)(n).capacity=e),modelModifiers:{number:!0}},{append:(0,g.k6)((()=>t[5]||(t[5]=[(0,g.eW)("GB")]))),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};const V=x;var X=V,E=l(3364),T=l(9451),S=l(7774);l(5280);const U={key:1},K={key:1};var A=Object.assign({name:"Disk"},{__name:"Disk",setup(e){const t=(0,T.rd)(),l=(0,k.KR)(null),{t:$}=(0,F.s9)(),C=(0,k.KR)({keyword:"",status:-1,storageId:0,templateId:0,no:1,size:10}),I=(0,k.KR)([{label:"cj.label.select.all",value:0,hasLanguage:!0}]),x=(0,k.KR)([{label:"cj.label.select.all",value:0,hasLanguage:!0}]),V=(0,k.KR)(!1),A=(0,k.KR)({data:[],total:0}),z=(0,k.KR)([]),L=[{label:"cj.label.basic.id",prop:"volumeId"},{label:"cj.label.basic.name",prop:"name"},{label:"cj.label.basic.description",prop:"description"},{label:"cj.label.basic.type",prop:"type"},{label:"cj.label.disk.capacity",prop:"capacity"},{label:"cj.label.vm.label",prop:"guest"},{label:"cj.label.basic.status",prop:"status"},{label:"cj.label.basic.createTime",prop:"createTime"},{label:"cj.label.disk.deviceType",prop:"deviceType"}];function Q(){localStorage.setItem("disk_visible_columns",JSON.stringify(z.value))}(0,g.sV)((()=>{let e=["volumeId","name","deviceType","capacity","guest","status","createTime"];z.value=localStorage.getItem("disk_visible_columns")?JSON.parse(localStorage.getItem("disk_visible_columns")):e}));const D=(0,k.KR)(null);function B(){O(),(0,_.ho)().then((e=>{let{data:t=[]}=e||{};I.value=t.map((e=>({label:e.description,value:e.storageId}))),I.value=[{label:"cj.label.select.all",value:0,hasLanguage:!0},...I.value]})),(0,R.Gj)().then((e=>{let{data:t=[]}=e||{};x.value=t.map((e=>({label:e.name,value:e.templateId}))),x.value=[{label:"cj.label.select.all",value:0,hasLanguage:!0},...x.value]}))}function q(e){C.value.no=e,O()}function P(e){C.value.size=e,O()}function O(){V.value=!0;let e={...C.value};e.storageId<=0&&delete e.storageId,e.templateId<=0&&delete e.templateId,e.status<0&&delete e.status,(0,h.u_)(e).then((e=>{const{list:t=[],total:l=0}=e.data||{};A.value={data:t,total:l}})).catch((()=>{A.value={data:[],total:0}})).finally((()=>{V.value=!1}))}function M(){l.value.open()}function N(e,l){t.push({path:`/disk/${l.volumeId}`})}function G(e){t.push({path:`/vm/${e.guest.guestId}`})}function H(e,t=!1){let l=A.value.data.findIndex((t=>t.volumeId===e.volumeId));-1!==l?Object.assign(A.value.data[l],e):t&&(A.value.data.push(e),A.value.total++)}function Z(e){let t=A.value.data.findIndex((t=>t.volumeId===e));-1!==t&&(A.value.data.splice(t,1),A.value.total--)}function J(e,t){S.s.confirm($("cj.dialog.disk.deleteConfirm"),"Warning",{confirmButtonText:$("cj.btn.basic.confirm"),cancelButtonText:$("cj.btn.basic.cancel"),type:"warning"}).then((()=>{(0,h.RN)({volumeId:t.volumeId}).then((e=>{0===e.code?(H(e.data),(0,W.zo)(e)):(0,W.Ue)(e)}))}))}return(0,E.A)("disk_list",B,H,Z),(e,t)=>{const h=f.P9,_=f.AV,R=b.xE,W=m.WK,F=v.S2,E=b.US,T=p.dI,S=p.o5,B=d.Vc,Z=i.o8,Y=c.u,ee=u.MF,te=u.TS,le=s.ve,ae=r.R7,oe=n.C4,ie=i.Up,ne=o.aQ,re=a.L;return(0,g.uX)(),(0,g.CE)("div",null,[(0,g.bF)(E,{model:(0,k.R1)(C),inline:"",size:"small"},{default:(0,g.k6)((()=>[(0,g.bF)(R,{label:e.$t("cj.label.storage.label")},{default:(0,g.k6)((()=>[(0,g.bF)(_,{modelValue:(0,k.R1)(C).storageId,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,k.R1)(C).storageId=e),placeholder:"",filterable:""},{default:(0,g.k6)((()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,k.R1)(I),(t=>((0,g.uX)(),(0,g.Wv)(h,{key:t.value,label:t.hasLanguage?e.$t(t.label):t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(R,{label:e.$t("cj.label.template.label")},{default:(0,g.k6)((()=>[(0,g.bF)(_,{modelValue:(0,k.R1)(C).templateId,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,k.R1)(C).templateId=e),placeholder:"",filterable:""},{default:(0,g.k6)((()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,k.R1)(x),(t=>((0,g.uX)(),(0,g.Wv)(h,{key:t.value,label:t.hasLanguage?e.$t(t.label):t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(R,{label:e.$t("cj.label.basic.status")},{default:(0,g.k6)((()=>[(0,g.bF)(_,{modelValue:(0,k.R1)(C).status,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,k.R1)(C).status=e),placeholder:"",filterable:""},{default:(0,g.k6)((()=>[(0,g.bF)(h,{label:(0,k.R1)($)("cj.label.select.all"),value:-1},null,8,["label"]),(0,g.bF)(h,{label:"Ready",value:1}),(0,g.bF)(h,{label:"Creating",value:0}),(0,g.bF)(h,{label:"Cloning",value:4}),(0,g.bF)(h,{label:"CreateTemplate",value:5}),(0,g.bF)(h,{label:"Migrating",value:6}),(0,g.bF)(h,{label:"Resizing",value:7}),(0,g.bF)(h,{label:"Deleting",value:8}),(0,g.bF)(h,{label:"Error",value:9})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(R,{label:e.$t("cj.label.basic.keyword")},{default:(0,g.k6)((()=>[(0,g.bF)(W,{modelValue:(0,k.R1)(C).keyword,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,k.R1)(C).keyword=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,g.bF)(R,null,{default:(0,g.k6)((()=>[(0,g.bF)(F,{type:"primary",onClick:O,icon:(0,k.R1)(j.Search),disabled:(0,k.R1)(V)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.search")),1)])),_:1},8,["icon","disabled"])])),_:1})])),_:1},8,["model"]),(0,g.bo)(((0,g.uX)(),(0,g.Wv)(ie,{data:(0,k.R1)(A).data,style:{width:"100%"},"table-layout":"auto",border:""},{default:(0,g.k6)((()=>[(0,g.bF)(Z,null,{header:(0,g.k6)((()=>[(0,g.bF)(F,{size:"small",onClick:M,icon:(0,k.R1)(j.DocumentAdd)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.create")),1)])),_:1},8,["icon"]),(0,g.bF)(F,{size:"small",ref_key:"btnFilter",ref:D,icon:(0,k.R1)(j.Filter)},null,8,["icon"]),(0,g.bF)(B,{"virtual-ref":(0,k.R1)(D),trigger:"click","virtual-triggering":""},{default:(0,g.k6)((()=>[(0,g.bF)(S,{modelValue:(0,k.R1)(z),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,k.i9)(z)?z.value=e:null),min:1,onChange:t[5]||(t[5]=e=>Q())},{default:(0,g.k6)((()=>[((0,g.uX)(),(0,g.CE)(g.FK,null,(0,g.pI)(L,(t=>(0,g.bF)(T,{label:e.$t(t.label),value:t.prop,key:t.prop,style:{display:"block"},vertical:""},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["virtual-ref"])])),default:(0,g.k6)((()=>[(0,k.R1)(z).includes("volumeId")?((0,g.uX)(),(0,g.Wv)(Z,{key:0,label:e.$t("cj.label.basic.id"),prop:"volumeId"},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("name")?((0,g.uX)(),(0,g.Wv)(Z,{key:1,label:e.$t("cj.label.basic.name"),prop:"name","min-width":"350","show-overflow-tooltip":""},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("description")?((0,g.uX)(),(0,g.Wv)(Z,{key:2,label:e.$t("cj.label.basic.description"),prop:"description","min-width":"150","show-overflow-tooltip":""},null,8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("type")?((0,g.uX)(),(0,g.Wv)(Z,{key:3,label:e.$t("cj.label.basic.type")},{default:(0,g.k6)((e=>[(0,g.bF)(Y,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.row.type),1)])),_:2},1024)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("capacity")?((0,g.uX)(),(0,g.Wv)(Z,{key:4,prop:"capacity",label:e.$t("cj.label.disk.capacity")},{default:(0,g.k6)((t=>["disk"===t.row.device?((0,g.uX)(),(0,g.Wv)(ae,{key:0,placement:"bottom",effect:"light"},{content:(0,g.k6)((()=>[(0,g.bF)(te,{column:1,border:""},{default:(0,g.k6)((()=>[(0,g.bF)(ee,{label:e.$t("cj.label.disk.allocation"),"label-align":"right",align:"center"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)((0,k.R1)(w.yv)(t.row.allocation)),1)])),_:2},1032,["label"]),(0,g.bF)(ee,{label:e.$t("cj.label.disk.capacity"),"label-align":"right",align:"center"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)((0,k.R1)(w.yv)(t.row.capacity)),1)])),_:2},1032,["label"])])),_:2},1024)])),default:(0,g.k6)((()=>[(0,g.bF)(le,{"text-inside":!0,"stroke-width":18,percentage:Math.floor((0,k.R1)(w.Nj)(t.row.allocation,t.row.capacity)),status:"success"},null,8,["percentage"])])),_:2},1024)):((0,g.uX)(),(0,g.CE)("span",U,"-"))])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("guest")?((0,g.uX)(),(0,g.Wv)(Z,{key:5,label:e.$t("cj.label.vm.label"),"min-width":"150","show-overflow-tooltip":""},{default:(0,g.k6)((t=>[t.row.guest?((0,g.uX)(),(0,g.Wv)(ae,{key:0,placement:"right",effect:"light"},{content:(0,g.k6)((()=>[(0,g.bF)(te,{column:1,border:""},{default:(0,g.k6)((()=>[(0,g.bF)(ee,{label:e.$t("cj.label.basic.name"),"label-align":"right"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(t.row.guest.name),1)])),_:2},1032,["label"]),(0,g.bF)(ee,{label:e.$t("cj.label.basic.description"),"label-align":"right"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(t.row.guest.description),1)])),_:2},1032,["label"]),(0,g.bF)(ee,{label:e.$t("cj.label.network.nic.ip"),"label-align":"right"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(t.row.guest.guestIp),1)])),_:2},1032,["label"]),(0,g.bF)(ee,{label:e.$t("cj.label.vm.label"),"label-align":"right"},{default:(0,g.k6)((()=>[(0,g.bF)(Y,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)((0,k.R1)(w.WH)(t.row.guest.bootstrapType)),1)])),_:2},1024)])),_:2},1032,["label"]),t.row.guestId>0?((0,g.uX)(),(0,g.Wv)(ee,{key:0,label:e.$t("cj.label.disk.driver"),"label-align":"right"},{default:(0,g.k6)((()=>[(0,g.bF)(Y,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(t.row.deviceDriver),1)])),_:2},1024)])),_:2},1032,["label"])):(0,g.Q3)("",!0)])),_:2},1024)])),default:(0,g.k6)((()=>[(0,g.bF)(oe,{onClick:e=>G(t.row),type:"primary"},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(t.row.guest.description),1)])),_:2},1032,["onClick"])])),_:2},1024)):((0,g.uX)(),(0,g.CE)("span",K,"-"))])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("deviceType")?((0,g.uX)(),(0,g.Wv)(Z,{key:6,prop:"deviceType",label:e.$t("cj.label.disk.deviceType")},{default:(0,g.k6)((e=>[(0,g.bF)(Y,null,{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.row.device),1)])),_:2},1024)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("status")?((0,g.uX)(),(0,g.Wv)(Z,{key:7,prop:"status",label:e.$t("cj.label.basic.status")},{default:(0,g.k6)((e=>[(0,g.bF)(Y,{type:(0,k.R1)(w.QJ)(e.row.status)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)((0,k.R1)(w._k)(e.row.status)),1)])),_:2},1032,["type"])])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,k.R1)(z).includes("createTime")?((0,g.uX)(),(0,g.Wv)(Z,{key:8,prop:"createTime",label:e.$t("cj.label.basic.createTime"),"min-width":"180","show-overflow-tooltip":""},{default:(0,g.k6)((e=>[(0,g.eW)((0,y.v_)((0,k.R1)(w.BU)(e.row.createTime)),1)])),_:1},8,["label"])):(0,g.Q3)("",!0),(0,g.bF)(Z,{label:e.$t("cj.label.basic.operation"),"min-width":"250","show-overflow-tooltip":""},{default:(0,g.k6)((t=>[(0,g.bF)(F,{size:"small",type:"",onClick:e=>N(t.$index,t.row),icon:(0,k.R1)(j.View)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.view")),1)])),_:2},1032,["onClick","icon"]),[1,9,10].includes(t.row.status)&&0===t.row.guestId?((0,g.uX)(),(0,g.Wv)(F,{key:0,size:"small",type:"danger",onClick:e=>J(t.$index,t.row),icon:(0,k.R1)(j.Delete)},{default:(0,g.k6)((()=>[(0,g.eW)((0,y.v_)(e.$t("cj.btn.basic.delete")),1)])),_:2},1032,["onClick","icon"])):(0,g.Q3)("",!0)])),_:1},8,["label"])])),_:1})])),_:1},8,["data"])),[[re,(0,k.R1)(V)]]),t[8]||(t[8]=(0,g.Lk)("br",null,null,-1)),(0,g.bF)(ne,{size:"small",background:"",onCurrentChange:q,onSizeChange:P,"current-page":(0,k.R1)(C).no,"onUpdate:currentPage":t[6]||(t[6]=e=>(0,k.R1)(C).no=e),"page-sizes":[10,20,50,100,200],"page-size":(0,k.R1)(C).size,"onUpdate:pageSize":t[7]||(t[7]=e=>(0,k.R1)(C).size=e),layout:"sizes, prev, pager, next, jumper, total",total:(0,k.R1)(A).total},null,8,["current-page","page-size","total"]),(0,g.bF)(X,{ref_key:"editDiskDialogRef",ref:l,onOnCreateDisk:H,onOnUpdateDisk:H},null,512)])}}}),z=l(3508);const L=(0,z.A)(A,[["__scopeId","data-v-538e2582"]]);var Q=L},6192:function(e,t,l){l.d(t,{IO:function(){return h}});var a=l(6918),o=l(4673),i=l(1654),n=l(387),r=l(573),s=l(2303),u=l(2267),c=l(6663);const d=(0,u.b_)({icon:{type:c.Ze,default:()=>s.Back},title:String,content:{type:String,default:""}}),p={back:()=>!0};var b=l(7860),v=l(2360),m=l(7636);const f=(0,a.pM)({name:"ElPageHeader"}),g=(0,a.pM)({...f,props:d,emits:p,setup(e,{emit:t}){const{t:l}=(0,v.Ym)(),s=(0,m.DU)("page-header");function u(){t("back")}return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)([(0,i.R1)(s).b(),{[(0,i.R1)(s).m("has-breadcrumb")]:!!e.$slots.breadcrumb,[(0,i.R1)(s).m("has-extra")]:!!e.$slots.extra,[(0,i.R1)(s).is("contentful")]:!!e.$slots.default}])},[e.$slots.breadcrumb?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)((0,i.R1)(s).e("breadcrumb"))},[(0,a.RG)(e.$slots,"breadcrumb")],2)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).e("header"))},[(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).e("left"))},[(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).e("back")),role:"button",tabindex:"0",onClick:u},[e.icon||e.$slots.icon?((0,a.uX)(),(0,a.CE)("div",{key:0,"aria-label":e.title||(0,i.R1)(l)("el.pageHeader.title"),class:(0,o.C4)((0,i.R1)(s).e("icon"))},[(0,a.RG)(e.$slots,"icon",{},(()=>[e.icon?((0,a.uX)(),(0,a.Wv)((0,i.R1)(n.tk),{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.icon)))])),_:1})):(0,a.Q3)("v-if",!0)]))],10,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).e("title"))},[(0,a.RG)(e.$slots,"title",{},(()=>[(0,a.eW)((0,o.v_)(e.title||(0,i.R1)(l)("el.pageHeader.title")),1)]))],2)],2),(0,a.bF)((0,i.R1)(r.fR),{direction:"vertical"}),(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).e("content"))},[(0,a.RG)(e.$slots,"content",{},(()=>[(0,a.eW)((0,o.v_)(e.content),1)]))],2)],2),e.$slots.extra?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)((0,i.R1)(s).e("extra"))},[(0,a.RG)(e.$slots,"extra")],2)):(0,a.Q3)("v-if",!0)],2),e.$slots.default?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,o.C4)((0,i.R1)(s).e("main"))},[(0,a.RG)(e.$slots,"default")],2)):(0,a.Q3)("v-if",!0)],2))}});var k=(0,b.A)(g,[["__file","page-header.vue"]]),y=l(713);const h=(0,y.GU)(k)},6951:function(e,t,l){l.d(t,{ve:function(){return f}});l(5286),l(8068);var a=l(6918),o=l(4673),i=l(1654),n=l(387),r=l(2303),s=l(2267);const u=(0,s.b_)({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:(0,s.jq)(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:(0,s.jq)([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:(0,s.jq)(Function),default:e=>`${e}%`}});var c=l(7860),d=l(7636);const p=(0,a.pM)({name:"ElProgress"}),b=(0,a.pM)({...p,props:u,setup(e){const t=e,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},s=(0,d.DU)("progress"),u=(0,a.EW)((()=>{const e={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},l=w(t.percentage);return l.includes("gradient")?e.background=l:e.backgroundColor=l,e})),c=(0,a.EW)((()=>(t.strokeWidth/t.width*100).toFixed(1))),p=(0,a.EW)((()=>["circle","dashboard"].includes(t.type)?Number.parseInt(""+(50-Number.parseFloat(c.value)/2),10):0)),b=(0,a.EW)((()=>{const e=p.value,l="dashboard"===t.type;return`\n          M 50 50\n          m 0 ${l?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${l?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${l?"":"-"}${2*e}\n          `})),v=(0,a.EW)((()=>2*Math.PI*p.value)),m=(0,a.EW)((()=>"dashboard"===t.type?.75:1)),f=(0,a.EW)((()=>{const e=-1*v.value*(1-m.value)/2;return`${e}px`})),g=(0,a.EW)((()=>({strokeDasharray:`${v.value*m.value}px, ${v.value}px`,strokeDashoffset:f.value}))),k=(0,a.EW)((()=>({strokeDasharray:`${v.value*m.value*(t.percentage/100)}px, ${v.value}px`,strokeDashoffset:f.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),y=(0,a.EW)((()=>{let e;return e=t.color?w(t.percentage):l[t.status]||l.default,e})),h=(0,a.EW)((()=>"warning"===t.status?r.WarningFilled:"line"===t.type?"success"===t.status?r.CircleCheck:r.CircleClose:"success"===t.status?r.Check:r.Close)),_=(0,a.EW)((()=>"line"===t.type?12+.4*t.strokeWidth:.111111*t.width+2)),R=(0,a.EW)((()=>t.format(t.percentage)));function j(e){const t=100/e.length,l=e.map(((e,l)=>(0,o.Kg)(e)?{color:e,percentage:(l+1)*t}:e));return l.sort(((e,t)=>e.percentage-t.percentage))}const w=e=>{var l;const{color:a}=t;if((0,o.Tn)(a))return a(e);if((0,o.Kg)(a))return a;{const t=j(a);for(const l of t)if(l.percentage>e)return l.color;return null==(l=t[t.length-1])?void 0:l.color}};return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)([(0,i.R1)(s).b(),(0,i.R1)(s).m(e.type),(0,i.R1)(s).is(e.status),{[(0,i.R1)(s).m("without-text")]:!e.showText,[(0,i.R1)(s).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)((0,i.R1)(s).b("bar"))},[(0,a.Lk)("div",{class:(0,o.C4)((0,i.R1)(s).be("bar","outer")),style:(0,o.Tr)({height:`${e.strokeWidth}px`})},[(0,a.Lk)("div",{class:(0,o.C4)([(0,i.R1)(s).be("bar","inner"),{[(0,i.R1)(s).bem("bar","inner","indeterminate")]:e.indeterminate},{[(0,i.R1)(s).bem("bar","inner","striped")]:e.striped},{[(0,i.R1)(s).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:(0,o.Tr)((0,i.R1)(u))},[(e.showText||e.$slots.default)&&e.textInside?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)((0,i.R1)(s).be("bar","innerText"))},[(0,a.RG)(e.$slots,"default",{percentage:e.percentage},(()=>[(0,a.Lk)("span",null,(0,o.v_)((0,i.R1)(R)),1)]))],2)):(0,a.Q3)("v-if",!0)],6)],6)],2)):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,o.C4)((0,i.R1)(s).b("circle")),style:(0,o.Tr)({height:`${e.width}px`,width:`${e.width}px`})},[((0,a.uX)(),(0,a.CE)("svg",{viewBox:"0 0 100 100"},[(0,a.Lk)("path",{class:(0,o.C4)((0,i.R1)(s).be("circle","track")),d:(0,i.R1)(b),stroke:`var(${(0,i.R1)(s).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,i.R1)(c),fill:"none",style:(0,o.Tr)((0,i.R1)(g))},null,14,["d","stroke","stroke-linecap","stroke-width"]),(0,a.Lk)("path",{class:(0,o.C4)((0,i.R1)(s).be("circle","path")),d:(0,i.R1)(b),stroke:(0,i.R1)(y),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,i.R1)(c),style:(0,o.Tr)((0,i.R1)(k))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),!e.showText&&!e.$slots.default||e.textInside?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,o.C4)((0,i.R1)(s).e("text")),style:(0,o.Tr)({fontSize:`${(0,i.R1)(_)}px`})},[(0,a.RG)(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?((0,a.uX)(),(0,a.Wv)((0,i.R1)(n.tk),{key:1},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)((0,i.R1)(h))))])),_:1})):((0,a.uX)(),(0,a.CE)("span",{key:0},(0,o.v_)((0,i.R1)(R)),1))]))],6))],10,["aria-valuenow"]))}});var v=(0,c.A)(b,[["__file","progress.vue"]]),m=l(713);const f=(0,m.GU)(v)},7063:function(e,t,l){l(4974),l(3568)},7412:function(e,t,l){l.d(t,{A:function(){return u}});var a=l(6918);const o={t:"1745291574744",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"20390",width:"200",height:"200"};function i(e,t){return(0,a.uX)(),(0,a.CE)("svg",o,t[0]||(t[0]=[(0,a.Lk)("path",{d:"M204.8 307.2l307.2 0 0-102.4-409.6 0 0 614.912 409.6 0 0-102.912-307.2 0 0-409.6zM307.2 409.6l307.2 0 0-153.6 307.2 256-307.2 256 0-153.6-307.2 0 0-204.8z","p-id":"20391"},null,-1)]))}var n=l(3508);const r={},s=(0,n.A)(r,[["render",i]]);var u=s},7770:function(e,t,l){l.d(t,{Lf:function(){return c},UC:function(){return n},Yr:function(){return r},dO:function(){return u},db:function(){return d},em:function(){return o},fC:function(){return p},ho:function(){return i},id:function(){return s},lh:function(){return b}});var a=l(3162);const o=(e={})=>(0,a.A)({url:"api/storage/info",params:e}),i=()=>(0,a.A)({url:"api/storage/all"}),n=(e={})=>(0,a.A)({url:"api/storage/search",params:e}),r=(e={})=>(0,a.A)({url:"api/storage/support/category/update",params:e,method:"post"}),s=(e={})=>(0,a.A)({url:"api/storage/create",params:e,method:"put"}),u=(e={})=>(0,a.A)({url:"api/storage/register",data:e,method:"POST"}),c=(e={})=>(0,a.A)({url:"api/storage/maintenance",data:e,method:"POST"}),d=(e={})=>(0,a.A)({url:"api/storage/migrate",data:e,method:"POST"}),p=(e={})=>(0,a.A)({url:"api/storage/clear",params:e,method:"delete"}),b=(e={})=>(0,a.A)({url:"api/storage/destroy",params:e,method:"delete"})},7861:function(e,t,l){l.d(t,{Gj:function(){return i},HU:function(){return s},Og:function(){return c},T7:function(){return o},Ve:function(){return u},bg:function(){return n},lH:function(){return r}});var a=l(3162);const o=(e={})=>(0,a.A)({url:"api/template/info",params:e}),i=()=>(0,a.A)({url:"api/template/all"}),n=(e={})=>(0,a.A)({url:"api/template/search",params:e}),r=(e={})=>(0,a.A)({url:"api/template/create",params:e,method:"put"}),s=(e={})=>(0,a.A)({url:"api/template/download",data:e,method:"POST"}),u=(e={})=>(0,a.A)({url:"api/template/script",data:e,method:"POST"}),c=(e={})=>(0,a.A)({url:"api/template/destroy",params:e,method:"delete"})}}]);