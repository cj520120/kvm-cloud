import requests
import hashlib
import time
import json

MANGE_URI = '%s'
NETWOR_SECERT = '%s'
NETWOR_ID = '%d'

def build_header(networkId):
    nonce = str(int(round(time.time() * 1000)))
    sign = Md5('{0}:{1}:{2}'.format(NETWOR_SECERT, networkId, nonce))
    return {
        'X-Network-ID': networkId,
        'X-Sign': sign,
        'X-Nonce': nonce
    }


def Md5(data):
    md5 = hashlib.md5()
    md5.update(data.encode('utf-8'))
    return md5.hexdigest()


if __name__ == '__main__':
    dns_version = ''
    while True:
        try:
            with requests.get('{0}/api/dns/reload'.format(MANGE_URI), headers=build_header(NETWOR_ID)) as response:
                if response.status_code == 200:
                    body = response.json()
                    if body['code'] == 0:
                        dns_list = body['data']
                        current_version = Md5(json.dumps(dns_list))
                        if dns_version != current_version:
                            dns_body = ''
                            for dns in dns_list:
                                dns_body += '{0} {1}\n'.format(dns['ip'],dns['domain'])
                            dns_version = current_version
                            dns_body = dns_body.strip()
                            with open(
                                    '/etc/dnsmasq.hosts.d/hosts',
                                    'w+') as f:
                                f.write(dns_body)
                            print('reload dns success, version: {0}'.format(dns_version))
                            dns_version = ''
        except:
            pass
        time.sleep(10)